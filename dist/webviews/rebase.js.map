{"version":3,"file":"rebase.js","mappings":"6BAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAMA,YAAiB,EAAQ,EAAgB,CACvC,GAAI,GAAO,OAAO,KAAK,CAAM,EAE7B,GAAI,OAAO,sBAAuB,CAChC,GAAI,GAAU,OAAO,sBAAsB,CAAM,EAEjD,GACE,GAAU,EAAQ,OAAO,SAAU,EAAK,CACtC,MAAO,QAAO,yBAAyB,EAAQ,CAAG,EAAE,UACtD,CAAC,GAGH,EAAK,KAAK,MAAM,EAAM,CAAO,CAC/B,CAEA,MAAO,EACT,CAEA,WAAwB,EAAQ,CAC9B,OAAS,GAAI,EAAG,EAAI,UAAU,OAAQ,IAAK,CACzC,GAAI,GAAS,UAAU,IAAM,KAAO,UAAU,GAAK,CAAC,EAEpD,EAAQ,EACN,GAAQ,OAAO,CAAM,EAAG,EAAI,EAAE,QAAQ,SAAU,EAAK,CACnD,GAAgB,EAAQ,EAAK,EAAO,EAAI,CAC1C,CAAC,EACI,OAAW,0BAChB,OAAO,iBAAiB,EAAQ,OAAO,0BAA0B,CAAM,CAAC,EAExE,GAAQ,OAAO,CAAM,CAAC,EAAE,QAAQ,SAAU,EAAK,CAC7C,OAAO,eAAe,EAAQ,EAAK,OAAO,yBAAyB,EAAQ,CAAG,CAAC,CACjF,CAAC,CAEL,CAEA,MAAO,EACT,CAEA,YAAiB,EAAK,CAGpB,MAAI,OAAO,SAAW,YAAc,MAAO,QAAO,UAAa,SAC7D,GAAU,SAAU,EAAK,CACvB,MAAO,OAAO,EAChB,EAEA,GAAU,SAAU,EAAK,CACvB,MAAO,IAAO,MAAO,SAAW,YAAc,EAAI,cAAgB,QAAU,IAAQ,OAAO,UAAY,SAAW,MAAO,EAC3H,EAGK,GAAQ,CAAG,CACpB,CAEA,YAAyB,EAAK,EAAK,EAAO,CACxC,MAAI,KAAO,GACT,OAAO,eAAe,EAAK,EAAK,CAC9B,MAAO,EACP,WAAY,GACZ,aAAc,GACd,SAAU,EACZ,CAAC,EAED,EAAI,GAAO,EAGN,CACT,CAEA,YAAoB,CAClB,SAAW,OAAO,QAAU,SAAU,EAAQ,CAC5C,OAAS,GAAI,EAAG,EAAI,UAAU,OAAQ,IAAK,CACzC,GAAI,GAAS,UAAU,GAEvB,OAAS,KAAO,GACd,OAAW,UAAU,eAAe,KAAK,EAAQ,CAAG,GAClD,GAAO,GAAO,EAAO,GAG3B,CAEA,MAAO,EACT,EAEO,EAAS,MAAM,KAAM,SAAS,CACvC,CAEA,YAAuC,EAAQ,EAAU,CACvD,GAAI,GAAU,KAAM,MAAO,CAAC,EAC5B,GAAI,GAAS,CAAC,EACV,EAAa,OAAO,KAAK,CAAM,EAC/B,EAAK,EAET,IAAK,EAAI,EAAG,EAAI,EAAW,OAAQ,IAEjC,EADM,EAAW,GACb,IAAS,QAAQ,CAAG,GAAK,IAC7B,GAAO,GAAO,EAAO,IAGvB,MAAO,EACT,CAEA,YAAkC,EAAQ,EAAU,CAClD,GAAI,GAAU,KAAM,MAAO,CAAC,EAE5B,GAAI,GAAS,GAA8B,EAAQ,CAAQ,EAEvD,EAAK,EAET,GAAI,OAAO,sBAAuB,CAChC,GAAI,GAAmB,OAAO,sBAAsB,CAAM,EAE1D,IAAK,EAAI,EAAG,EAAI,EAAiB,OAAQ,IAEvC,EADM,EAAiB,GACnB,IAAS,QAAQ,CAAG,GAAK,IACzB,EAAC,OAAO,UAAU,qBAAqB,KAAK,EAAQ,CAAG,GAC3D,GAAO,GAAO,EAAO,IAEzB,CAEA,MAAO,EACT,CAEA,YAA4B,EAAK,CAC/B,MAAO,IAAmB,CAAG,GAAK,GAAiB,CAAG,GAAK,GAA4B,CAAG,GAAK,GAAmB,CACpH,CAEA,YAA4B,EAAK,CAC/B,GAAI,MAAM,QAAQ,CAAG,EAAG,MAAO,IAAkB,CAAG,CACtD,CAEA,YAA0B,EAAM,CAC9B,GAAI,MAAO,QAAW,KAAe,EAAK,OAAO,WAAa,MAAQ,EAAK,eAAiB,KAAM,MAAO,OAAM,KAAK,CAAI,CAC1H,CAEA,YAAqC,EAAG,EAAQ,CAC9C,GAAI,EAAC,EACL,IAAI,MAAO,IAAM,SAAU,MAAO,IAAkB,EAAG,CAAM,EAC7D,GAAI,GAAI,OAAO,UAAU,SAAS,KAAK,CAAC,EAAE,MAAM,EAAG,EAAE,EAErD,GADI,IAAM,UAAY,EAAE,aAAa,GAAI,EAAE,YAAY,MACnD,IAAM,OAAS,IAAM,MAAO,MAAO,OAAM,KAAK,CAAC,EACnD,GAAI,IAAM,aAAe,2CAA2C,KAAK,CAAC,EAAG,MAAO,IAAkB,EAAG,CAAM,EACjH,CAEA,YAA2B,EAAK,EAAK,CACnC,IAAW,MAAQ,EAAM,EAAI,SAAQ,GAAM,EAAI,QAE/C,OAAS,GAAI,EAAG,EAAO,GAAI,OAAM,CAAG,EAAG,EAAI,EAAK,IAAK,EAAK,GAAK,EAAI,GAEnE,MAAO,EACT,CAEA,aAA8B,CAC5B,KAAM,IAAI,WAAU;AAAA,mFAAsI,CAC5J,CAEA,GAAI,IAAU,SAEd,YAAmB,EAAS,CAC1B,GAAI,MAAO,QAAW,KAAe,OAAO,UAC1C,MAAO,CAAC,CAAe,UAAU,UAAU,MAAM,CAAO,CAE5D,CAEA,GAAI,IAAa,GAAU,uDAAuD,EAC9E,GAAO,GAAU,OAAO,EACxB,GAAU,GAAU,UAAU,EAC9B,GAAS,GAAU,SAAS,GAAK,CAAC,GAAU,SAAS,GAAK,CAAC,GAAU,UAAU,EAC/E,GAAM,GAAU,iBAAiB,EACjC,GAAmB,GAAU,SAAS,GAAK,GAAU,UAAU,EAE/D,GAAc,CAChB,QAAS,GACT,QAAS,EACX,EAEA,WAAY,EAAI,EAAO,EAAI,CACzB,EAAG,iBAAiB,EAAO,EAAI,CAAC,IAAc,EAAW,CAC3D,CAEA,WAAa,EAAI,EAAO,EAAI,CAC1B,EAAG,oBAAoB,EAAO,EAAI,CAAC,IAAc,EAAW,CAC9D,CAEA,YAEA,EAEA,EAAU,CACR,GAAI,EAAC,EAGL,IAFA,EAAS,KAAO,KAAQ,GAAW,EAAS,UAAU,CAAC,GAEnD,EACF,GAAI,CACF,GAAI,EAAG,QACL,MAAO,GAAG,QAAQ,CAAQ,EACrB,GAAI,EAAG,kBACZ,MAAO,GAAG,kBAAkB,CAAQ,EAC/B,GAAI,EAAG,sBACZ,MAAO,GAAG,sBAAsB,CAAQ,CAE5C,MAAE,CACA,MAAO,EACT,CAGF,MAAO,GACT,CAEA,YAAyB,EAAI,CAC3B,MAAO,GAAG,MAAQ,IAAO,UAAY,EAAG,KAAK,SAAW,EAAG,KAAO,EAAG,UACvE,CAEA,WAEA,EAEA,EAEA,EAAK,EAAY,CACf,GAAI,EAAI,CACN,EAAM,GAAO,SAEb,EAAG,CACD,GAAI,GAAY,MAAS,GAAS,KAAO,IAAM,EAAG,aAAe,GAAO,GAAQ,EAAI,CAAQ,EAAI,GAAQ,EAAI,CAAQ,IAAM,GAAc,IAAO,EAC7I,MAAO,GAGT,GAAI,IAAO,EAAK,KAElB,OAAS,EAAK,GAAgB,CAAE,EAClC,CAEA,MAAO,KACT,CAEA,GAAI,IAAU,OAEd,WAAqB,EAAI,EAAM,EAAO,CACpC,GAAI,GAAM,EACR,GAAI,EAAG,UACL,EAAG,UAAU,EAAQ,MAAQ,UAAU,CAAI,MACtC,CACL,GAAI,GAAa,KAAM,EAAG,UAAY,KAAK,QAAQ,GAAS,GAAG,EAAE,QAAQ,IAAM,EAAO,IAAK,GAAG,EAC9F,EAAG,UAAa,GAAa,GAAQ,IAAM,EAAO,KAAK,QAAQ,GAAS,GAAG,CAC7E,CAEJ,CAEA,WAAa,EAAI,EAAM,EAAK,CAC1B,GAAI,GAAQ,GAAM,EAAG,MAErB,GAAI,EAAO,CACT,GAAI,IAAQ,OACV,MAAI,UAAS,aAAe,SAAS,YAAY,iBAC/C,EAAM,SAAS,YAAY,iBAAiB,EAAI,EAAE,EACzC,EAAG,cACZ,GAAM,EAAG,cAGJ,IAAS,OAAS,EAAM,EAAI,GAEnC,CAAM,KAAQ,KAAU,EAAK,QAAQ,QAAQ,IAAM,IACjD,GAAO,WAAa,GAGtB,EAAM,GAAQ,EAAO,OAAO,IAAQ,SAAW,GAAK,KAExD,CACF,CAEA,YAAgB,EAAI,EAAU,CAC5B,GAAI,GAAoB,GAExB,GAAI,MAAO,IAAO,SAChB,EAAoB,MAEpB,GAAG,CACD,GAAI,GAAY,EAAI,EAAI,WAAW,EAEnC,GAAiB,IAAc,QAC7B,GAAoB,EAAY,IAAM,EAI1C,OAAS,CAAC,GAAa,GAAK,EAAG,aAGjC,GAAI,GAAW,OAAO,WAAa,OAAO,iBAAmB,OAAO,WAAa,OAAO,YAGxF,MAAO,IAAY,GAAI,GAAS,CAAiB,CACnD,CAEA,YAAc,EAAK,EAAS,EAAU,CACpC,GAAI,EAAK,CACP,GAAI,GAAO,EAAI,qBAAqB,CAAO,EACvC,EAAI,EACJ,EAAI,EAAK,OAEb,GAAI,EACF,KAAO,EAAI,EAAG,IACZ,EAAS,EAAK,GAAI,CAAC,EAIvB,MAAO,EACT,CAEA,MAAO,CAAC,CACV,CAEA,YAAqC,CACnC,GAAI,GAAmB,SAAS,iBAEhC,MAAI,IAGK,SAAS,eAEpB,CAYA,WAAiB,EAAI,EAA2B,EAA2B,EAAW,EAAW,CAC/F,GAAI,GAAC,EAAG,uBAAyB,IAAO,QACxC,IAAI,GAAQ,EAAK,EAAM,EAAQ,EAAO,EAAQ,EAmB9C,GAjBA,IAAW,QAAU,EAAG,YAAc,IAAO,EAA0B,EACrE,GAAS,EAAG,sBAAsB,EAClC,EAAM,EAAO,IACb,EAAO,EAAO,KACd,EAAS,EAAO,OAChB,EAAQ,EAAO,MACf,EAAS,EAAO,OAChB,EAAQ,EAAO,OAEf,GAAM,EACN,EAAO,EACP,EAAS,OAAO,YAChB,EAAQ,OAAO,WACf,EAAS,OAAO,YAChB,EAAQ,OAAO,YAGZ,IAA6B,IAA8B,IAAO,QAErE,GAAY,GAAa,EAAG,WAGxB,CAAC,IACH,EACE,IAAI,GAAa,EAAU,uBAA0B,GAAI,EAAW,WAAW,IAAM,QAAU,GAA6B,EAAI,EAAW,UAAU,IAAM,UAAW,CACpK,GAAI,GAAgB,EAAU,sBAAsB,EAEpD,GAAO,EAAc,IAAM,SAAS,EAAI,EAAW,kBAAkB,CAAC,EACtE,GAAQ,EAAc,KAAO,SAAS,EAAI,EAAW,mBAAmB,CAAC,EACzE,EAAS,EAAM,EAAO,OACtB,EAAQ,EAAO,EAAO,MACtB,KACF,OAGO,EAAY,EAAU,YAInC,GAAI,GAAa,IAAO,OAAQ,CAE9B,GAAI,GAAW,GAAO,GAAa,CAAE,EACjC,EAAS,GAAY,EAAS,EAC9B,EAAS,GAAY,EAAS,EAElC,GACE,IAAO,EACP,GAAQ,EACR,GAAS,EACT,GAAU,EACV,EAAS,EAAM,EACf,EAAQ,EAAO,EAEnB,CAEA,MAAO,CACL,IAAK,EACL,KAAM,EACN,OAAQ,EACR,MAAO,EACP,MAAO,EACP,OAAQ,CACV,EACF,CAUA,YAAwB,EAAI,EAAQ,EAAY,CAK9C,OAJI,GAAS,GAA2B,EAAI,EAAI,EAC5C,EAAY,EAAQ,CAAE,EAAE,GAGrB,GAAQ,CACb,GAAI,GAAgB,EAAQ,CAAM,EAAE,GAChC,EAAU,OAQd,GANA,IAAmB,OAAS,IAAe,OACzC,EAAU,GAAa,EAEvB,EAAU,GAAa,EAGrB,CAAC,EAAS,MAAO,GACrB,GAAI,IAAW,EAA0B,EAAG,MAC5C,EAAS,GAA2B,EAAQ,EAAK,CACnD,CAEA,MAAO,EACT,CAWA,YAAkB,EAAI,EAAU,EAAS,EAAe,CAKtD,OAJI,GAAe,EACf,EAAI,EACJ,EAAW,EAAG,SAEX,EAAI,EAAS,QAAQ,CAC1B,GAAI,EAAS,GAAG,MAAM,UAAY,QAAU,EAAS,KAAO,EAAS,OAAU,IAAiB,EAAS,KAAO,EAAS,UAAY,EAAQ,EAAS,GAAI,EAAQ,UAAW,EAAI,EAAK,EAAG,CACvL,GAAI,IAAiB,EACnB,MAAO,GAAS,GAGlB,GACF,CAEA,GACF,CAEA,MAAO,KACT,CASA,YAAmB,EAAI,EAAU,CAG/B,OAFI,GAAO,EAAG,iBAEP,GAAS,KAAS,EAAS,OAAS,EAAI,EAAM,SAAS,IAAM,QAAU,GAAY,CAAC,GAAQ,EAAM,CAAQ,IAC/G,EAAO,EAAK,uBAGd,MAAO,IAAQ,IACjB,CAUA,WAAe,EAAI,EAAU,CAC3B,GAAI,GAAQ,EAEZ,GAAI,CAAC,GAAM,CAAC,EAAG,WACb,MAAO,GAKT,KAAO,EAAK,EAAG,wBACb,EAAO,SAAS,YAAY,IAAM,YAAc,IAAO,EAAS,OAAU,EAAC,GAAY,GAAQ,EAAI,CAAQ,IACzG,IAIJ,MAAO,EACT,CASA,YAAiC,EAAI,CACnC,GAAI,GAAa,EACb,EAAY,EACZ,EAAc,EAA0B,EAE5C,GAAI,EACF,EAAG,CACD,GAAI,GAAW,GAAO,CAAE,EACpB,EAAS,EAAS,EAClB,EAAS,EAAS,EACtB,GAAc,EAAG,WAAa,EAC9B,GAAa,EAAG,UAAY,CAC9B,OAAS,IAAO,GAAgB,GAAK,EAAG,aAG1C,MAAO,CAAC,EAAY,CAAS,CAC/B,CASA,YAAuB,EAAK,EAAK,CAC/B,OAAS,KAAK,GACZ,GAAI,EAAC,EAAI,eAAe,CAAC,GAEzB,OAAS,KAAO,GACd,GAAI,EAAI,eAAe,CAAG,GAAK,EAAI,KAAS,EAAI,GAAG,GAAM,MAAO,QAAO,CAAC,EAI5E,MAAO,EACT,CAEA,YAAoC,EAAI,EAAa,CAEnD,GAAI,CAAC,GAAM,CAAC,EAAG,sBAAuB,MAAO,GAA0B,EACvE,GAAI,GAAO,EACP,EAAU,GAEd,EAEE,IAAI,EAAK,YAAc,EAAK,aAAe,EAAK,aAAe,EAAK,aAAc,CAChF,GAAI,GAAU,EAAI,CAAI,EAEtB,GAAI,EAAK,YAAc,EAAK,aAAgB,GAAQ,WAAa,QAAU,EAAQ,WAAa,WAAa,EAAK,aAAe,EAAK,cAAiB,GAAQ,WAAa,QAAU,EAAQ,WAAa,UAAW,CACpN,GAAI,CAAC,EAAK,uBAAyB,IAAS,SAAS,KAAM,MAAO,GAA0B,EAC5F,GAAI,GAAW,EAAa,MAAO,GACnC,EAAU,EACZ,CACF,OAGO,EAAO,EAAK,YAErB,MAAO,GAA0B,CACnC,CAEA,YAAgB,EAAK,EAAK,CACxB,GAAI,GAAO,EACT,OAAS,KAAO,GACd,EAAQ,eAAe,CAAG,GACxB,GAAI,GAAO,EAAI,IAKrB,MAAO,EACT,CAEA,YAAqB,EAAO,EAAO,CACjC,MAAO,MAAK,MAAM,EAAM,GAAG,IAAM,KAAK,MAAM,EAAM,GAAG,GAAK,KAAK,MAAM,EAAM,IAAI,IAAM,KAAK,MAAM,EAAM,IAAI,GAAK,KAAK,MAAM,EAAM,MAAM,IAAM,KAAK,MAAM,EAAM,MAAM,GAAK,KAAK,MAAM,EAAM,KAAK,IAAM,KAAK,MAAM,EAAM,KAAK,CAC5N,CAEA,GAAI,IAEJ,YAAkB,EAAU,EAAI,CAC9B,MAAO,WAAY,CACjB,GAAI,CAAC,GAAkB,CACrB,GAAI,GAAO,UACP,EAAQ,KAEZ,EAAS,SAAW,EAClB,EAAS,KAAK,EAAO,EAAK,EAAE,EAE5B,EAAS,MAAM,EAAO,CAAI,EAG5B,GAAmB,WAAW,UAAY,CACxC,GAAmB,MACrB,EAAG,CAAE,CACP,CACF,CACF,CAEA,aAA0B,CACxB,aAAa,EAAgB,EAC7B,GAAmB,MACrB,CAEA,YAAkB,EAAI,EAAG,EAAG,CAC1B,EAAG,YAAc,EACjB,EAAG,WAAa,CAClB,CAEA,YAAe,EAAI,CACjB,GAAI,GAAU,OAAO,QACjB,EAAI,OAAO,QAAU,OAAO,MAEhC,MAAI,IAAW,EAAQ,IACd,EAAQ,IAAI,CAAE,EAAE,UAAU,EAAI,EAC5B,EACF,EAAE,CAAE,EAAE,MAAM,EAAI,EAAE,GAElB,EAAG,UAAU,EAAI,CAE5B,CAEA,YAAiB,EAAI,EAAM,CACzB,EAAI,EAAI,WAAY,UAAU,EAC9B,EAAI,EAAI,MAAO,EAAK,GAAG,EACvB,EAAI,EAAI,OAAQ,EAAK,IAAI,EACzB,EAAI,EAAI,QAAS,EAAK,KAAK,EAC3B,EAAI,EAAI,SAAU,EAAK,MAAM,CAC/B,CAEA,YAAmB,EAAI,CACrB,EAAI,EAAI,WAAY,EAAE,EACtB,EAAI,EAAI,MAAO,EAAE,EACjB,EAAI,EAAI,OAAQ,EAAE,EAClB,EAAI,EAAI,QAAS,EAAE,EACnB,EAAI,EAAI,SAAU,EAAE,CACtB,CAEA,GAAI,GAAU,WAAa,GAAI,MAAK,EAAE,QAAQ,EAE9C,aAAiC,CAC/B,GAAI,GAAkB,CAAC,EACnB,EACJ,MAAO,CACL,sBAAuB,UAAiC,CAEtD,GADA,EAAkB,CAAC,EACf,EAAC,KAAK,QAAQ,UAClB,IAAI,GAAW,CAAC,EAAE,MAAM,KAAK,KAAK,GAAG,QAAQ,EAC7C,EAAS,QAAQ,SAAU,EAAO,CAChC,GAAI,IAAI,EAAO,SAAS,IAAM,QAAU,IAAU,EAAS,OAC3D,GAAgB,KAAK,CACnB,OAAQ,EACR,KAAM,EAAQ,CAAK,CACrB,CAAC,EAED,GAAI,GAAW,EAAe,CAAC,EAAG,EAAgB,EAAgB,OAAS,GAAG,IAAI,EAGlF,GAAI,EAAM,sBAAuB,CAC/B,GAAI,GAAc,GAAO,EAAO,EAAI,EAEpC,GACE,GAAS,KAAO,EAAY,EAC5B,EAAS,MAAQ,EAAY,EAEjC,CAEA,EAAM,SAAW,EACnB,CAAC,EACH,EACA,kBAAmB,SAA2B,EAAO,CACnD,EAAgB,KAAK,CAAK,CAC5B,EACA,qBAAsB,SAA8B,EAAQ,CAC1D,EAAgB,OAAO,GAAc,EAAiB,CACpD,OAAQ,CACV,CAAC,EAAG,CAAC,CACP,EACA,WAAY,SAAoB,EAAU,CACxC,GAAI,GAAQ,KAEZ,GAAI,CAAC,KAAK,QAAQ,UAAW,CAC3B,aAAa,CAAmB,EAC5B,MAAO,IAAa,YAAY,EAAS,EAC7C,MACF,CAEA,GAAI,GAAY,GACZ,EAAgB,EACpB,EAAgB,QAAQ,SAAU,EAAO,CACvC,GAAI,GAAO,EACP,EAAS,EAAM,OACf,EAAW,EAAO,SAClB,EAAS,EAAQ,CAAM,EACvB,EAAe,EAAO,aACtB,EAAa,EAAO,WACpB,EAAgB,EAAM,KACtB,EAAe,GAAO,EAAQ,EAAI,EAEtC,GAEE,GAAO,KAAO,EAAa,EAC3B,EAAO,MAAQ,EAAa,GAG9B,EAAO,OAAS,EAEZ,EAAO,uBAEL,GAAY,EAAc,CAAM,GAAK,CAAC,GAAY,EAAU,CAAM,GACrE,GAAc,IAAM,EAAO,KAAQ,GAAc,KAAO,EAAO,QAAW,GAAS,IAAM,EAAO,KAAQ,GAAS,KAAO,EAAO,OAE9H,GAAO,GAAkB,EAAe,EAAc,EAAY,EAAM,OAAO,GAK9E,GAAY,EAAQ,CAAQ,GAC/B,GAAO,aAAe,EACtB,EAAO,WAAa,EAEf,GACH,GAAO,EAAM,QAAQ,WAGvB,EAAM,QAAQ,EAAQ,EAAe,EAAQ,CAAI,GAG/C,GACF,GAAY,GACZ,EAAgB,KAAK,IAAI,EAAe,CAAI,EAC5C,aAAa,EAAO,mBAAmB,EACvC,EAAO,oBAAsB,WAAW,UAAY,CAClD,EAAO,cAAgB,EACvB,EAAO,aAAe,KACtB,EAAO,SAAW,KAClB,EAAO,WAAa,KACpB,EAAO,sBAAwB,IACjC,EAAG,CAAI,EACP,EAAO,sBAAwB,EAEnC,CAAC,EACD,aAAa,CAAmB,EAEhC,EAGE,EAAsB,WAAW,UAAY,CAC3C,MAAW,IAAa,YAAY,EAAS,CAC/C,EAAG,CAAa,EAJZ,MAAO,IAAa,YAAY,EAAS,EAO/C,EAAkB,CAAC,CACrB,EACA,QAAS,SAAiB,EAAQ,EAAa,EAAQ,EAAU,CAC/D,GAAI,EAAU,CACZ,EAAI,EAAQ,aAAc,EAAE,EAC5B,EAAI,EAAQ,YAAa,EAAE,EAC3B,GAAI,GAAW,GAAO,KAAK,EAAE,EACzB,EAAS,GAAY,EAAS,EAC9B,EAAS,GAAY,EAAS,EAC9B,EAAc,GAAY,KAAO,EAAO,MAAS,IAAU,GAC3D,EAAc,GAAY,IAAM,EAAO,KAAQ,IAAU,GAC7D,EAAO,WAAa,CAAC,CAAC,EACtB,EAAO,WAAa,CAAC,CAAC,EACtB,EAAI,EAAQ,YAAa,eAAiB,EAAa,MAAQ,EAAa,OAAO,EACnF,KAAK,gBAAkB,GAAQ,CAAM,EAErC,EAAI,EAAQ,aAAc,aAAe,EAAW,KAAQ,MAAK,QAAQ,OAAS,IAAM,KAAK,QAAQ,OAAS,GAAG,EACjH,EAAI,EAAQ,YAAa,oBAAoB,EAC7C,MAAO,GAAO,UAAa,UAAY,aAAa,EAAO,QAAQ,EACnE,EAAO,SAAW,WAAW,UAAY,CACvC,EAAI,EAAQ,aAAc,EAAE,EAC5B,EAAI,EAAQ,YAAa,EAAE,EAC3B,EAAO,SAAW,GAClB,EAAO,WAAa,GACpB,EAAO,WAAa,EACtB,EAAG,CAAQ,CACb,CACF,CACF,CACF,CAEA,YAAiB,EAAQ,CACvB,MAAO,GAAO,WAChB,CAEA,YAA2B,EAAe,EAAU,EAAQ,EAAS,CACnE,MAAO,MAAK,KAAK,KAAK,IAAI,EAAS,IAAM,EAAc,IAAK,CAAC,EAAI,KAAK,IAAI,EAAS,KAAO,EAAc,KAAM,CAAC,CAAC,EAAI,KAAK,KAAK,KAAK,IAAI,EAAS,IAAM,EAAO,IAAK,CAAC,EAAI,KAAK,IAAI,EAAS,KAAO,EAAO,KAAM,CAAC,CAAC,EAAI,EAAQ,SAC7N,CAEA,GAAI,IAAU,CAAC,EACX,GAAW,CACb,oBAAqB,EACvB,EACI,GAAgB,CAClB,MAAO,SAAe,EAAQ,CAE5B,OAAS,KAAU,IACjB,GAAa,eAAe,CAAM,GAAK,CAAE,KAAU,KACjD,GAAO,GAAU,GAAS,IAI9B,GAAQ,QAAQ,SAAU,EAAG,CAC3B,GAAI,EAAE,aAAe,EAAO,WAC1B,KAAM,iCAAiC,OAAO,EAAO,WAAY,iBAAiB,CAEtF,CAAC,EACD,GAAQ,KAAK,CAAM,CACrB,EACA,YAAa,SAAqB,EAAW,EAAU,EAAK,CAC1D,GAAI,GAAQ,KAEZ,KAAK,cAAgB,GAErB,EAAI,OAAS,UAAY,CACvB,EAAM,cAAgB,EACxB,EAEA,GAAI,GAAkB,EAAY,SAClC,GAAQ,QAAQ,SAAU,EAAQ,CAChC,CAAK,EAAS,EAAO,aAEjB,GAAS,EAAO,YAAY,IAC9B,EAAS,EAAO,YAAY,GAAiB,EAAe,CAC1D,SAAU,CACZ,EAAG,CAAG,CAAC,EAKL,EAAS,QAAQ,EAAO,aAAe,EAAS,EAAO,YAAY,IACrE,EAAS,EAAO,YAAY,GAAW,EAAe,CACpD,SAAU,CACZ,EAAG,CAAG,CAAC,EAEX,CAAC,CACH,EACA,kBAAmB,SAA2B,EAAU,EAAI,EAAU,EAAS,CAC7E,GAAQ,QAAQ,SAAU,EAAQ,CAChC,GAAI,GAAa,EAAO,WACxB,GAAI,GAAC,EAAS,QAAQ,IAAe,CAAC,EAAO,qBAC7C,IAAI,GAAc,GAAI,GAAO,EAAU,EAAI,EAAS,OAAO,EAC3D,EAAY,SAAW,EACvB,EAAY,QAAU,EAAS,QAC/B,EAAS,GAAc,EAEvB,EAAS,EAAU,EAAY,QAAQ,EACzC,CAAC,EAED,OAAS,KAAU,GAAS,QAC1B,GAAI,EAAC,EAAS,QAAQ,eAAe,CAAM,EAC3C,IAAI,GAAW,KAAK,aAAa,EAAU,EAAQ,EAAS,QAAQ,EAAO,EAE3E,MAAW,GAAa,KACtB,GAAS,QAAQ,GAAU,GAGjC,EACA,mBAAoB,SAA4B,EAAM,EAAU,CAC9D,GAAI,GAAkB,CAAC,EACvB,UAAQ,QAAQ,SAAU,EAAQ,CAChC,MAAW,GAAO,iBAAoB,YAEtC,EAAS,EAAiB,EAAO,gBAAgB,KAAK,EAAS,EAAO,YAAa,CAAI,CAAC,CAC1F,CAAC,EACM,CACT,EACA,aAAc,SAAsB,EAAU,EAAM,EAAO,CACzD,GAAI,GACJ,UAAQ,QAAQ,SAAU,EAAQ,CAEhC,CAAK,EAAS,EAAO,aAEjB,EAAO,iBAAmB,MAAO,GAAO,gBAAgB,IAAU,YACpE,GAAgB,EAAO,gBAAgB,GAAM,KAAK,EAAS,EAAO,YAAa,CAAK,EAExF,CAAC,EACM,CACT,CACF,EAEA,YAAuB,EAAM,CAC3B,GAAI,GAAW,EAAK,SAChB,EAAS,EAAK,OACd,EAAO,EAAK,KACZ,EAAW,EAAK,SAChB,EAAU,EAAK,QACf,EAAO,EAAK,KACZ,EAAS,EAAK,OACd,EAAW,EAAK,SAChB,EAAW,EAAK,SAChB,EAAoB,EAAK,kBACzB,EAAoB,EAAK,kBACzB,EAAgB,EAAK,cACrB,EAAc,EAAK,YACnB,EAAuB,EAAK,qBAEhC,GADA,EAAW,GAAY,GAAU,EAAO,GACpC,EAAC,EACL,IAAI,GACA,EAAU,EAAS,QACnB,EAAS,KAAO,EAAK,OAAO,CAAC,EAAE,YAAY,EAAI,EAAK,OAAO,CAAC,EAEhE,OAAW,aAAe,CAAC,IAAc,CAAC,GACxC,EAAM,GAAI,aAAY,EAAM,CAC1B,QAAS,GACT,WAAY,EACd,CAAC,EAED,GAAM,SAAS,YAAY,OAAO,EAClC,EAAI,UAAU,EAAM,GAAM,EAAI,GAGhC,EAAI,GAAK,GAAQ,EACjB,EAAI,KAAO,GAAU,EACrB,EAAI,KAAO,GAAY,EACvB,EAAI,MAAQ,EACZ,EAAI,SAAW,EACf,EAAI,SAAW,EACf,EAAI,kBAAoB,EACxB,EAAI,kBAAoB,EACxB,EAAI,cAAgB,EACpB,EAAI,SAAW,EAAc,EAAY,YAAc,OAEvD,GAAI,GAAqB,EAAe,EAAe,CAAC,EAAG,CAAoB,EAAG,GAAc,mBAAmB,EAAM,CAAQ,CAAC,EAElI,OAAS,KAAU,GACjB,EAAI,GAAU,EAAmB,GAGnC,GACE,EAAO,cAAc,CAAG,EAGtB,EAAQ,IACV,EAAQ,GAAQ,KAAK,EAAU,CAAG,EAEtC,CAEA,GAAI,IAAY,CAAC,KAAK,EAElB,EAAc,SAAqB,EAAW,EAAU,CAC1D,GAAI,GAAO,UAAU,OAAS,GAAK,UAAU,KAAO,OAAY,UAAU,GAAK,CAAC,EAC5E,EAAgB,EAAK,IACrB,EAAO,GAAyB,EAAM,EAAS,EAEnD,GAAc,YAAY,KAAK,CAAQ,EAAE,EAAW,EAAU,EAAe,CAC3E,OAAQ,EACR,SAAU,EACV,QAAS,EACT,OAAQ,EACR,OAAQ,GACR,WAAY,GACZ,QAAS,EACT,YAAa,GACb,YAAa,GACb,YAAa,EACb,eAAgB,EAAS,OACzB,cAAe,EACf,SAAU,GACV,kBAAmB,GACnB,SAAU,EACV,kBAAmB,GACnB,mBAAoB,GACpB,qBAAsB,GACtB,eAAgB,UAA0B,CACxC,GAAc,EAChB,EACA,cAAe,UAAyB,CACtC,GAAc,EAChB,EACA,sBAAuB,SAA+B,EAAM,CAC1D,EAAe,CACb,SAAU,EACV,KAAM,EACN,cAAe,CACjB,CAAC,CACH,CACF,EAAG,CAAI,CAAC,CACV,EAEA,WAAwB,EAAM,CAC5B,GAAc,EAAe,CAC3B,YAAa,EACb,QAAS,EACT,SAAU,EACV,OAAQ,EACR,SAAU,GACV,kBAAmB,GACnB,SAAU,EACV,kBAAmB,EACrB,EAAG,CAAI,CAAC,CACV,CAEA,GAAI,GACA,EACA,EACA,EACA,GACA,GACA,EACA,GACA,GACA,EACA,GACA,GACA,GACA,EACA,GAAsB,GACtB,GAAkB,GAClB,GAAY,CAAC,EACb,GACA,EACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GAAwB,GACxB,GAAyB,GACzB,GAEJ,EACI,GAAmC,CAAC,EAExC,GAAU,GACN,GAAoB,CAAC,EAGrB,GAAiB,MAAO,UAAa,IACrC,GAA0B,GAC1B,GAAmB,IAAQ,GAAa,WAAa,QAEzD,GAAmB,IAAkB,CAAC,IAAoB,CAAC,IAAO,aAAe,UAAS,cAAc,KAAK,EACzG,GAA0B,UAAY,CACxC,GAAI,EAAC,GAEL,IAAI,GACF,MAAO,GAGT,GAAI,GAAK,SAAS,cAAc,GAAG,EACnC,SAAG,MAAM,QAAU,sBACZ,EAAG,MAAM,gBAAkB,OACpC,EAAE,EACE,GAAmB,SAA0B,EAAI,EAAS,CAC5D,GAAI,GAAQ,EAAI,CAAE,EACd,EAAU,SAAS,EAAM,KAAK,EAAI,SAAS,EAAM,WAAW,EAAI,SAAS,EAAM,YAAY,EAAI,SAAS,EAAM,eAAe,EAAI,SAAS,EAAM,gBAAgB,EAChK,EAAS,GAAS,EAAI,EAAG,CAAO,EAChC,EAAS,GAAS,EAAI,EAAG,CAAO,EAChC,EAAgB,GAAU,EAAI,CAAM,EACpC,EAAiB,GAAU,EAAI,CAAM,EACrC,EAAkB,GAAiB,SAAS,EAAc,UAAU,EAAI,SAAS,EAAc,WAAW,EAAI,EAAQ,CAAM,EAAE,MAC9H,EAAmB,GAAkB,SAAS,EAAe,UAAU,EAAI,SAAS,EAAe,WAAW,EAAI,EAAQ,CAAM,EAAE,MAEtI,GAAI,EAAM,UAAY,OACpB,MAAO,GAAM,gBAAkB,UAAY,EAAM,gBAAkB,iBAAmB,WAAa,aAGrG,GAAI,EAAM,UAAY,OACpB,MAAO,GAAM,oBAAoB,MAAM,GAAG,EAAE,QAAU,EAAI,WAAa,aAGzE,GAAI,GAAU,EAAc,OAAY,EAAc,QAAa,OAAQ,CACzE,GAAI,GAAqB,EAAc,QAAa,OAAS,OAAS,QACtE,MAAO,IAAW,GAAe,QAAU,QAAU,EAAe,QAAU,GAAsB,WAAa,YACnH,CAEA,MAAO,IAAW,GAAc,UAAY,SAAW,EAAc,UAAY,QAAU,EAAc,UAAY,SAAW,EAAc,UAAY,QAAU,GAAmB,GAAW,EAAM,MAAsB,QAAU,GAAU,EAAM,MAAsB,QAAU,EAAkB,EAAmB,GAAW,WAAa,YACvV,EACI,GAAqB,SAA4B,EAAU,EAAY,EAAU,CACnF,GAAI,GAAc,EAAW,EAAS,KAAO,EAAS,IAClD,EAAc,EAAW,EAAS,MAAQ,EAAS,OACnD,EAAkB,EAAW,EAAS,MAAQ,EAAS,OACvD,EAAc,EAAW,EAAW,KAAO,EAAW,IACtD,EAAc,EAAW,EAAW,MAAQ,EAAW,OACvD,EAAkB,EAAW,EAAW,MAAQ,EAAW,OAC/D,MAAO,KAAgB,GAAe,IAAgB,GAAe,EAAc,EAAkB,IAAM,EAAc,EAAkB,CAC7I,EAQA,GAA8B,SAAqC,EAAG,EAAG,CACvE,GAAI,GACJ,UAAU,KAAK,SAAU,EAAU,CACjC,GAAI,GAAY,EAAS,GAAS,QAAQ,qBAC1C,GAAI,GAAC,GAAa,GAAU,CAAQ,GACpC,IAAI,GAAO,EAAQ,CAAQ,EACvB,EAAqB,GAAK,EAAK,KAAO,GAAa,GAAK,EAAK,MAAQ,EACrE,EAAmB,GAAK,EAAK,IAAM,GAAa,GAAK,EAAK,OAAS,EAEvE,GAAI,GAAsB,EACxB,MAAO,GAAM,EAEjB,CAAC,EACM,CACT,EACI,GAAgB,SAAuB,EAAS,CAClD,WAAc,EAAO,EAAM,CACzB,MAAO,UAAU,EAAI,EAAM,EAAQ,EAAK,CACtC,GAAI,GAAY,EAAG,QAAQ,MAAM,MAAQ,EAAK,QAAQ,MAAM,MAAQ,EAAG,QAAQ,MAAM,OAAS,EAAK,QAAQ,MAAM,KAEjH,GAAI,GAAS,MAAS,IAAQ,GAG5B,MAAO,GACF,GAAI,GAAS,MAAQ,IAAU,GACpC,MAAO,GACF,GAAI,GAAQ,IAAU,QAC3B,MAAO,GACF,GAAI,MAAO,IAAU,WAC1B,MAAO,GAAK,EAAM,EAAI,EAAM,EAAQ,CAAG,EAAG,CAAI,EAAE,EAAI,EAAM,EAAQ,CAAG,EAErE,GAAI,GAAc,GAAO,EAAK,GAAM,QAAQ,MAAM,KAClD,MAAO,KAAU,IAAQ,MAAO,IAAU,UAAY,IAAU,GAAc,EAAM,MAAQ,EAAM,QAAQ,CAAU,EAAI,EAE5H,CACF,CAEA,GAAI,GAAQ,CAAC,EACT,EAAgB,EAAQ,MAE5B,EAAK,GAAiB,GAAQ,CAAa,GAAK,WAC9C,GAAgB,CACd,KAAM,CACR,GAGF,EAAM,KAAO,EAAc,KAC3B,EAAM,UAAY,EAAK,EAAc,KAAM,EAAI,EAC/C,EAAM,SAAW,EAAK,EAAc,GAAG,EACvC,EAAM,YAAc,EAAc,YAClC,EAAQ,MAAQ,CAClB,EACI,GAAsB,UAA+B,CACvD,CAAK,IAA2B,GAC9B,EAAI,EAAS,UAAW,MAAM,CAElC,EACI,GAAwB,UAAiC,CAC3D,CAAK,IAA2B,GAC9B,EAAI,EAAS,UAAW,EAAE,CAE9B,EAGA,IAAsB,CAAC,IACrB,SAAS,iBAAiB,QAAS,SAAU,EAAK,CAChD,GAAI,GACF,SAAI,eAAe,EACnB,EAAI,iBAAmB,EAAI,gBAAgB,EAC3C,EAAI,0BAA4B,EAAI,yBAAyB,EAC7D,GAAkB,GACX,EAEX,EAAG,EAAI,EAGT,GAAI,IAAgC,SAAuC,EAAK,CAC9E,GAAI,EAAQ,CACV,EAAM,EAAI,QAAU,EAAI,QAAQ,GAAK,EAErC,GAAI,GAAU,GAA4B,EAAI,QAAS,EAAI,OAAO,EAElE,GAAI,EAAS,CAEX,GAAI,GAAQ,CAAC,EAEb,OAAS,KAAK,GACZ,EAAQ,eAAe,CAAC,GACtB,GAAM,GAAK,EAAI,IAInB,EAAM,OAAS,EAAM,OAAS,EAC9B,EAAM,eAAiB,OACvB,EAAM,gBAAkB,OAExB,EAAQ,GAAS,YAAY,CAAK,CACpC,CACF,CACF,EAEI,GAAwB,SAA+B,EAAK,CAC9D,GACE,EAAO,WAAW,GAAS,iBAAiB,EAAI,MAAM,CAE1D,EAQA,WAAkB,EAAI,EAAS,CAC7B,GAAI,CAAE,IAAM,EAAG,UAAY,EAAG,WAAa,GACzC,KAAM,8CAA8C,OAAO,CAAC,EAAE,SAAS,KAAK,CAAE,CAAC,EAGjF,KAAK,GAAK,EAEV,KAAK,QAAU,EAAU,EAAS,CAAC,EAAG,CAAO,EAE7C,EAAG,GAAW,KACd,GAAI,GAAW,CACb,MAAO,KACP,KAAM,GACN,SAAU,GACV,MAAO,KACP,OAAQ,KACR,UAAW,WAAW,KAAK,EAAG,QAAQ,EAAI,MAAQ,KAClD,cAAe,EAEf,WAAY,GAEZ,sBAAuB,KAEvB,kBAAmB,GACnB,UAAW,UAAqB,CAC9B,MAAO,IAAiB,EAAI,KAAK,OAAO,CAC1C,EACA,WAAY,iBACZ,YAAa,kBACb,UAAW,gBACX,OAAQ,SACR,OAAQ,KACR,gBAAiB,GACjB,UAAW,EACX,OAAQ,KACR,QAAS,SAAiB,EAAc,EAAQ,CAC9C,EAAa,QAAQ,OAAQ,EAAO,WAAW,CACjD,EACA,WAAY,GACZ,eAAgB,GAChB,WAAY,UACZ,MAAO,EACP,iBAAkB,GAClB,oBAAsB,QAAO,SAAW,OAAS,QAAQ,SAAS,OAAO,iBAAkB,EAAE,GAAK,EAClG,cAAe,GACf,cAAe,oBACf,eAAgB,GAChB,kBAAmB,EACnB,eAAgB,CACd,EAAG,EACH,EAAG,CACL,EACA,eAAgB,EAAS,iBAAmB,IAAS,gBAAkB,SAAU,CAAC,GAClF,qBAAsB,CACxB,EACA,GAAc,kBAAkB,KAAM,EAAI,CAAQ,EAElD,OAAS,KAAQ,GACf,CAAE,KAAQ,KAAa,GAAQ,GAAQ,EAAS,IAGlD,GAAc,CAAO,EAGrB,OAAS,KAAM,MACb,EAAO,OAAO,CAAC,IAAM,KAAO,MAAO,MAAK,IAAQ,YAC9C,MAAK,GAAM,KAAK,GAAI,KAAK,IAAI,GAKjC,KAAK,gBAAkB,EAAQ,cAAgB,GAAQ,GAEnD,KAAK,iBAEP,MAAK,QAAQ,oBAAsB,GAIrC,EAAY,eACV,EAAG,EAAI,cAAe,KAAK,WAAW,EAEtC,GAAG,EAAI,YAAa,KAAK,WAAW,EACpC,EAAG,EAAI,aAAc,KAAK,WAAW,GAGnC,KAAK,iBACP,GAAG,EAAI,WAAY,IAAI,EACvB,EAAG,EAAI,YAAa,IAAI,GAG1B,GAAU,KAAK,KAAK,EAAE,EAEtB,EAAQ,OAAS,EAAQ,MAAM,KAAO,KAAK,KAAK,EAAQ,MAAM,IAAI,IAAI,GAAK,CAAC,CAAC,EAE7E,EAAS,KAAM,GAAsB,CAAC,CACxC,CAEA,EAAS,UAET,CACE,YAAa,EACb,iBAAkB,SAA0B,EAAQ,CAClD,CAAK,KAAK,GAAG,SAAS,CAAM,GAAK,IAAW,KAAK,IAC/C,IAAa,KAEjB,EACA,cAAe,SAAuB,EAAK,EAAQ,CACjD,MAAO,OAAO,MAAK,QAAQ,WAAc,WAAa,KAAK,QAAQ,UAAU,KAAK,KAAM,EAAK,EAAQ,CAAM,EAAI,KAAK,QAAQ,SAC9H,EACA,YAAa,SAEb,EAAK,CACH,GAAI,EAAC,EAAI,WAET,IAAI,GAAQ,KACR,EAAK,KAAK,GACV,EAAU,KAAK,QACf,EAAkB,EAAQ,gBAC1B,EAAO,EAAI,KACX,EAAQ,EAAI,SAAW,EAAI,QAAQ,IAAM,EAAI,aAAe,EAAI,cAAgB,SAAW,EAC3F,EAAU,IAAS,GAAK,OACxB,EAAiB,EAAI,OAAO,YAAe,GAAI,MAAQ,EAAI,KAAK,IAAM,EAAI,cAAgB,EAAI,aAAa,EAAE,KAAO,EACpH,EAAS,EAAQ,OAKrB,GAHA,GAAuB,CAAE,EAGrB,IAIA,0BAAwB,KAAK,CAAI,GAAK,EAAI,SAAW,GAAK,EAAQ,WAKlE,GAAe,mBAKf,GAAC,KAAK,iBAAmB,IAAU,GAAU,EAAO,QAAQ,YAAY,IAAM,WAIlF,GAAS,EAAQ,EAAQ,EAAQ,UAAW,EAAI,EAAK,EAEjD,KAAU,EAAO,WAIjB,KAAe,GASnB,IAHA,GAAW,EAAM,CAAM,EACvB,GAAoB,EAAM,EAAQ,EAAQ,SAAS,EAE/C,MAAO,IAAW,YACpB,GAAI,EAAO,KAAK,KAAM,EAAK,EAAQ,IAAI,EAAG,CACxC,EAAe,CACb,SAAU,EACV,OAAQ,EACR,KAAM,SACN,SAAU,EACV,KAAM,EACN,OAAQ,CACV,CAAC,EAED,EAAY,SAAU,EAAO,CAC3B,IAAK,CACP,CAAC,EACD,GAAmB,EAAI,YAAc,EAAI,eAAe,EACxD,MACF,UACS,GACT,GAAS,EAAO,MAAM,GAAG,EAAE,KAAK,SAAU,EAAU,CAGlD,GAFA,EAAW,EAAQ,EAAgB,EAAS,KAAK,EAAG,EAAI,EAAK,EAEzD,EACF,SAAe,CACb,SAAU,EACV,OAAQ,EACR,KAAM,SACN,SAAU,EACV,OAAQ,EACR,KAAM,CACR,CAAC,EAED,EAAY,SAAU,EAAO,CAC3B,IAAK,CACP,CAAC,EACM,EAEX,CAAC,EAEG,GAAQ,CACV,GAAmB,EAAI,YAAc,EAAI,eAAe,EACxD,MACF,CAGF,EAAY,QAAU,CAAC,EAAQ,EAAgB,EAAQ,OAAQ,EAAI,EAAK,GAKxE,KAAK,kBAAkB,EAAK,EAAO,CAAM,GAC3C,EACA,kBAAmB,SAEnB,EAEA,EAEA,EAAQ,CACN,GAAI,GAAQ,KACR,EAAK,EAAM,GACX,EAAU,EAAM,QAChB,EAAgB,EAAG,cACnB,EAEJ,GAAI,GAAU,CAAC,GAAU,EAAO,aAAe,EAAI,CACjD,GAAI,GAAW,EAAQ,CAAM,EAwE7B,GAvEA,EAAS,EACT,EAAS,EACT,EAAW,EAAO,WAClB,GAAS,EAAO,YAChB,GAAa,EACb,GAAc,EAAQ,MACtB,EAAS,QAAU,EACnB,GAAS,CACP,OAAQ,EACR,QAAU,IAAS,GAAK,QACxB,QAAU,IAAS,GAAK,OAC1B,EACA,GAAkB,GAAO,QAAU,EAAS,KAC5C,GAAiB,GAAO,QAAU,EAAS,IAC3C,KAAK,OAAU,IAAS,GAAK,QAC7B,KAAK,OAAU,IAAS,GAAK,QAC7B,EAAO,MAAM,eAAiB,MAE9B,EAAc,UAAuB,CAKnC,GAJA,EAAY,aAAc,EAAO,CAC/B,IAAK,CACP,CAAC,EAEG,EAAS,cAAe,CAC1B,EAAM,QAAQ,EAEd,MACF,CAIA,EAAM,0BAA0B,EAE5B,CAAC,IAAW,EAAM,iBACpB,GAAO,UAAY,IAIrB,EAAM,kBAAkB,EAAK,CAAK,EAGlC,EAAe,CACb,SAAU,EACV,KAAM,SACN,cAAe,CACjB,CAAC,EAGD,EAAY,EAAQ,EAAQ,YAAa,EAAI,CAC/C,EAGA,EAAQ,OAAO,MAAM,GAAG,EAAE,QAAQ,SAAU,EAAU,CACpD,GAAK,EAAQ,EAAS,KAAK,EAAG,EAAiB,CACjD,CAAC,EACD,EAAG,EAAe,WAAY,EAA6B,EAC3D,EAAG,EAAe,YAAa,EAA6B,EAC5D,EAAG,EAAe,YAAa,EAA6B,EAC5D,EAAG,EAAe,UAAW,EAAM,OAAO,EAC1C,EAAG,EAAe,WAAY,EAAM,OAAO,EAC3C,EAAG,EAAe,cAAe,EAAM,OAAO,EAE1C,IAAW,KAAK,iBAClB,MAAK,QAAQ,oBAAsB,EACnC,EAAO,UAAY,IAGrB,EAAY,aAAc,KAAM,CAC9B,IAAK,CACP,CAAC,EAEG,EAAQ,OAAU,EAAC,EAAQ,kBAAoB,IAAW,EAAC,KAAK,iBAAmB,CAAE,KAAQ,KAAc,CAC7G,GAAI,EAAS,cAAe,CAC1B,KAAK,QAAQ,EAEb,MACF,CAKA,EAAG,EAAe,UAAW,EAAM,mBAAmB,EACtD,EAAG,EAAe,WAAY,EAAM,mBAAmB,EACvD,EAAG,EAAe,cAAe,EAAM,mBAAmB,EAC1D,EAAG,EAAe,YAAa,EAAM,4BAA4B,EACjE,EAAG,EAAe,YAAa,EAAM,4BAA4B,EACjE,EAAQ,gBAAkB,EAAG,EAAe,cAAe,EAAM,4BAA4B,EAC7F,EAAM,gBAAkB,WAAW,EAAa,EAAQ,KAAK,CAC/D,KACE,GAAY,CAEhB,CACF,EACA,6BAA8B,SAE9B,EAAG,CACD,GAAI,GAAQ,EAAE,QAAU,EAAE,QAAQ,GAAK,EAEvC,KAAS,IAAI,KAAK,IAAI,EAAM,QAAU,KAAK,MAAM,EAAG,KAAK,IAAI,EAAM,QAAU,KAAK,MAAM,CAAC,GAAK,KAAK,MAAM,KAAK,QAAQ,oBAAuB,MAAK,iBAAmB,OAAO,kBAAoB,EAAE,GAChM,KAAK,oBAAoB,CAE7B,EACA,oBAAqB,UAA+B,CAClD,GAAU,GAAkB,CAAM,EAClC,aAAa,KAAK,eAAe,EAEjC,KAAK,0BAA0B,CACjC,EACA,0BAA2B,UAAqC,CAC9D,GAAI,GAAgB,KAAK,GAAG,cAC5B,EAAI,EAAe,UAAW,KAAK,mBAAmB,EACtD,EAAI,EAAe,WAAY,KAAK,mBAAmB,EACvD,EAAI,EAAe,cAAe,KAAK,mBAAmB,EAC1D,EAAI,EAAe,YAAa,KAAK,4BAA4B,EACjE,EAAI,EAAe,YAAa,KAAK,4BAA4B,EACjE,EAAI,EAAe,cAAe,KAAK,4BAA4B,CACrE,EACA,kBAAmB,SAEnB,EAEA,EAAO,CACL,EAAQ,GAAS,EAAI,aAAe,SAAW,EAE/C,CAAK,KAAK,iBAAmB,EAC3B,KAAS,QAAQ,eACf,EAAG,SAAU,cAAe,KAAK,YAAY,EACxC,EACL,EAAG,SAAU,YAAa,KAAK,YAAY,EAE3C,EAAG,SAAU,YAAa,KAAK,YAAY,EAG7C,GAAG,EAAQ,UAAW,IAAI,EAC1B,EAAG,EAAQ,YAAa,KAAK,YAAY,GAG3C,GAAI,CACF,SAAa,UAEX,GAAU,UAAY,CACpB,SAAS,UAAU,MAAM,CAC3B,CAAC,EAED,OAAO,aAAa,EAAE,gBAAgB,CAE1C,MAAE,CAAa,CACjB,EACA,aAAc,SAAsB,EAAU,EAAK,CAIjD,GAFA,GAAsB,GAElB,GAAU,EAAQ,CACpB,EAAY,cAAe,KAAM,CAC/B,IAAK,CACP,CAAC,EAEG,KAAK,iBACP,EAAG,SAAU,WAAY,EAAqB,EAGhD,GAAI,GAAU,KAAK,QAEnB,CAAC,GAAY,EAAY,EAAQ,EAAQ,UAAW,EAAK,EACzD,EAAY,EAAQ,EAAQ,WAAY,EAAI,EAC5C,EAAS,OAAS,KAClB,GAAY,KAAK,aAAa,EAE9B,EAAe,CACb,SAAU,KACV,KAAM,QACN,cAAe,CACjB,CAAC,CACH,KACE,MAAK,SAAS,CAElB,EACA,iBAAkB,UAA4B,CAC5C,GAAI,EAAU,CACZ,KAAK,OAAS,EAAS,QACvB,KAAK,OAAS,EAAS,QAEvB,GAAoB,EAKpB,OAHI,GAAS,SAAS,iBAAiB,EAAS,QAAS,EAAS,OAAO,EACrE,EAAS,EAEN,GAAU,EAAO,YACtB,GAAS,EAAO,WAAW,iBAAiB,EAAS,QAAS,EAAS,OAAO,EAC1E,IAAW,IACf,EAAS,EAKX,GAFA,EAAO,WAAW,GAAS,iBAAiB,CAAM,EAE9C,EACF,EAAG,CACD,GAAI,EAAO,GAAU,CACnB,GAAI,GAAW,OAQf,GAPA,EAAW,EAAO,GAAS,YAAY,CACrC,QAAS,EAAS,QAClB,QAAS,EAAS,QAClB,OAAQ,EACR,OAAQ,CACV,CAAC,EAEG,GAAY,CAAC,KAAK,QAAQ,eAC5B,KAEJ,CAEA,EAAS,CACX,OAEO,EAAS,EAAO,YAGzB,GAAsB,CACxB,CACF,EACA,aAAc,SAEd,EAAK,CACH,GAAI,GAAQ,CACV,GAAI,GAAU,KAAK,QACf,EAAoB,EAAQ,kBAC5B,EAAiB,EAAQ,eACzB,EAAQ,EAAI,QAAU,EAAI,QAAQ,GAAK,EACvC,EAAc,GAAW,GAAO,EAAS,EAAI,EAC7C,EAAS,GAAW,GAAe,EAAY,EAC/C,EAAS,GAAW,GAAe,EAAY,EAC/C,EAAuB,IAA2B,GAAuB,GAAwB,CAAmB,EACpH,EAAM,GAAM,QAAU,GAAO,QAAU,EAAe,GAAM,IAAU,GAAM,GAAuB,EAAqB,GAAK,GAAiC,GAAK,GAAM,IAAU,GACnL,EAAM,GAAM,QAAU,GAAO,QAAU,EAAe,GAAM,IAAU,GAAM,GAAuB,EAAqB,GAAK,GAAiC,GAAK,GAAM,IAAU,GAEvL,GAAI,CAAC,EAAS,QAAU,CAAC,GAAqB,CAC5C,GAAI,GAAqB,KAAK,IAAI,KAAK,IAAI,EAAM,QAAU,KAAK,MAAM,EAAG,KAAK,IAAI,EAAM,QAAU,KAAK,MAAM,CAAC,EAAI,EAChH,OAGF,KAAK,aAAa,EAAK,EAAI,CAC7B,CAEA,GAAI,EAAS,CACX,EACE,GAAY,GAAK,EAAM,KAAU,GACjC,EAAY,GAAK,EAAM,KAAU,IAEjC,EAAc,CACZ,EAAG,EACH,EAAG,EACH,EAAG,EACH,EAAG,EACH,EAAG,EACH,EAAG,CACL,EAGF,GAAI,GAAY,UAAU,OAAO,EAAY,EAAG,GAAG,EAAE,OAAO,EAAY,EAAG,GAAG,EAAE,OAAO,EAAY,EAAG,GAAG,EAAE,OAAO,EAAY,EAAG,GAAG,EAAE,OAAO,EAAY,EAAG,GAAG,EAAE,OAAO,EAAY,EAAG,GAAG,EAC1L,EAAI,EAAS,kBAAmB,CAAS,EACzC,EAAI,EAAS,eAAgB,CAAS,EACtC,EAAI,EAAS,cAAe,CAAS,EACrC,EAAI,EAAS,YAAa,CAAS,EACnC,GAAS,EACT,GAAS,EACT,EAAW,CACb,CAEA,EAAI,YAAc,EAAI,eAAe,CACvC,CACF,EACA,aAAc,UAAwB,CAGpC,GAAI,CAAC,EAAS,CACZ,GAAI,GAAY,KAAK,QAAQ,eAAiB,SAAS,KAAO,EAC1D,EAAO,EAAQ,EAAQ,GAAM,GAAyB,GAAM,CAAS,EACrE,EAAU,KAAK,QAEnB,GAAI,GAAyB,CAI3B,IAFA,EAAsB,EAEf,EAAI,EAAqB,UAAU,IAAM,UAAY,EAAI,EAAqB,WAAW,IAAM,QAAU,IAAwB,UACtI,EAAsB,EAAoB,WAG5C,IAA4B,SAAS,MAAQ,IAAwB,SAAS,gBACxE,KAAwB,UAAU,GAAsB,EAA0B,GACtF,EAAK,KAAO,EAAoB,UAChC,EAAK,MAAQ,EAAoB,YAEjC,EAAsB,EAA0B,EAGlD,GAAmC,GAAwB,CAAmB,CAChF,CAEA,EAAU,EAAO,UAAU,EAAI,EAC/B,EAAY,EAAS,EAAQ,WAAY,EAAK,EAC9C,EAAY,EAAS,EAAQ,cAAe,EAAI,EAChD,EAAY,EAAS,EAAQ,UAAW,EAAI,EAC5C,EAAI,EAAS,aAAc,EAAE,EAC7B,EAAI,EAAS,YAAa,EAAE,EAC5B,EAAI,EAAS,aAAc,YAAY,EACvC,EAAI,EAAS,SAAU,CAAC,EACxB,EAAI,EAAS,MAAO,EAAK,GAAG,EAC5B,EAAI,EAAS,OAAQ,EAAK,IAAI,EAC9B,EAAI,EAAS,QAAS,EAAK,KAAK,EAChC,EAAI,EAAS,SAAU,EAAK,MAAM,EAClC,EAAI,EAAS,UAAW,KAAK,EAC7B,EAAI,EAAS,WAAY,GAA0B,WAAa,OAAO,EACvE,EAAI,EAAS,SAAU,QAAQ,EAC/B,EAAI,EAAS,gBAAiB,MAAM,EACpC,EAAS,MAAQ,EACjB,EAAU,YAAY,CAAO,EAE7B,EAAI,EAAS,mBAAoB,GAAkB,SAAS,EAAQ,MAAM,KAAK,EAAI,IAAM,KAAO,GAAiB,SAAS,EAAQ,MAAM,MAAM,EAAI,IAAM,GAAG,CAC7J,CACF,EACA,aAAc,SAEd,EAEA,EAAU,CACR,GAAI,GAAQ,KAER,EAAe,EAAI,aACnB,EAAU,EAAM,QAKpB,GAJA,EAAY,YAAa,KAAM,CAC7B,IAAK,CACP,CAAC,EAEG,EAAS,cAAe,CAC1B,KAAK,QAAQ,EAEb,MACF,CAEA,EAAY,aAAc,IAAI,EAEzB,EAAS,eACZ,GAAU,GAAM,CAAM,EACtB,EAAQ,gBAAgB,IAAI,EAC5B,EAAQ,UAAY,GACpB,EAAQ,MAAM,eAAiB,GAE/B,KAAK,WAAW,EAEhB,EAAY,EAAS,KAAK,QAAQ,YAAa,EAAK,EACpD,EAAS,MAAQ,GAInB,EAAM,QAAU,GAAU,UAAY,CAEpC,EADY,QAAS,CAAK,EACtB,GAAS,eAER,GAAM,QAAQ,mBACjB,EAAO,aAAa,EAAS,CAAM,EAGrC,EAAM,WAAW,EAEjB,EAAe,CACb,SAAU,EACV,KAAM,OACR,CAAC,EACH,CAAC,EACD,CAAC,GAAY,EAAY,EAAQ,EAAQ,UAAW,EAAI,EAExD,EACE,IAAkB,GAClB,EAAM,QAAU,YAAY,EAAM,iBAAkB,EAAE,GAGtD,GAAI,SAAU,UAAW,EAAM,OAAO,EACtC,EAAI,SAAU,WAAY,EAAM,OAAO,EACvC,EAAI,SAAU,cAAe,EAAM,OAAO,EAEtC,GACF,GAAa,cAAgB,OAC7B,EAAQ,SAAW,EAAQ,QAAQ,KAAK,EAAO,EAAc,CAAM,GAGrE,EAAG,SAAU,OAAQ,CAAK,EAE1B,EAAI,EAAQ,YAAa,eAAe,GAG1C,GAAsB,GACtB,EAAM,aAAe,GAAU,EAAM,aAAa,KAAK,EAAO,EAAU,CAAG,CAAC,EAC5E,EAAG,SAAU,cAAe,CAAK,EACjC,GAAQ,GAEJ,IACF,EAAI,SAAS,KAAM,cAAe,MAAM,CAE5C,EAEA,YAAa,SAEb,EAAK,CACH,GAAI,GAAK,KAAK,GACV,EAAS,EAAI,OACb,EACA,EACA,EACA,EAAU,KAAK,QACf,EAAQ,EAAQ,MAChB,EAAiB,EAAS,OAC1B,EAAU,KAAgB,EAC1B,EAAU,EAAQ,KAClB,EAAe,GAAe,EAC9B,EACA,EAAQ,KACR,EAAiB,GAErB,GAAI,GAAS,OAEb,WAAuB,GAAM,GAAO,CAClC,EAAY,GAAM,EAAO,EAAe,CACtC,IAAK,EACL,QAAS,EACT,KAAM,EAAW,WAAa,aAC9B,OAAQ,EACR,SAAU,EACV,WAAY,EACZ,QAAS,EACT,aAAc,EACd,OAAQ,EACR,UAAW,EACX,OAAQ,SAAgB,GAAQ,GAAO,CACrC,MAAO,IAAQ,EAAQ,EAAI,EAAQ,EAAU,GAAQ,EAAQ,EAAM,EAAG,EAAK,EAAK,CAClF,EACA,QAAS,CACX,EAAG,EAAK,CAAC,CACX,CAGA,YAAmB,CACjB,EAAc,0BAA0B,EAExC,EAAM,sBAAsB,EAExB,IAAU,GACZ,EAAa,sBAAsB,CAEvC,CAGA,WAAmB,GAAW,CAC5B,SAAc,oBAAqB,CACjC,UAAW,EACb,CAAC,EAEG,IAEF,CAAI,EACF,EAAe,WAAW,EAE1B,EAAe,WAAW,CAAK,EAG7B,IAAU,GAEZ,GAAY,EAAQ,EAAc,EAAY,QAAQ,WAAa,EAAe,QAAQ,WAAY,EAAK,EAC3G,EAAY,EAAQ,EAAQ,WAAY,EAAI,GAG9C,IAAoB,GAAS,IAAU,EAAS,OAC9C,EAAc,EACL,IAAU,EAAS,QAAU,GACtC,GAAc,MAIZ,IAAiB,GACnB,GAAM,sBAAwB,GAGhC,EAAM,WAAW,UAAY,CAC3B,EAAc,2BAA2B,EACzC,EAAM,sBAAwB,IAChC,CAAC,EAEG,IAAU,GACZ,GAAa,WAAW,EACxB,EAAa,sBAAwB,OAKrC,KAAW,GAAU,CAAC,EAAO,UAAY,IAAW,GAAM,CAAC,EAAO,WACpE,IAAa,MAIX,CAAC,EAAQ,gBAAkB,CAAC,EAAI,QAAU,IAAW,UACvD,GAAO,WAAW,GAAS,iBAAiB,EAAI,MAAM,EAGtD,CAAC,IAAa,GAA8B,CAAG,GAGjD,CAAC,EAAQ,gBAAkB,EAAI,iBAAmB,EAAI,gBAAgB,EAC/D,EAAiB,EAC1B,CAGA,YAAmB,CACjB,EAAW,EAAM,CAAM,EACvB,GAAoB,EAAM,EAAQ,EAAQ,SAAS,EAEnD,EAAe,CACb,SAAU,EACV,KAAM,SACN,KAAM,EACN,SAAU,EACV,kBAAmB,GACnB,cAAe,CACjB,CAAC,CACH,CAQA,GANI,EAAI,iBAAmB,QACzB,EAAI,YAAc,EAAI,eAAe,EAGvC,EAAS,EAAQ,EAAQ,EAAQ,UAAW,EAAI,EAAI,EACpD,EAAc,UAAU,EACpB,EAAS,cAAe,MAAO,GAEnC,GAAI,EAAO,SAAS,EAAI,MAAM,GAAK,EAAO,UAAY,EAAO,YAAc,EAAO,YAAc,EAAM,wBAA0B,EAC9H,MAAO,GAAU,EAAK,EAKxB,GAFA,GAAkB,GAEd,GAAkB,CAAC,EAAQ,UAAa,GAAU,GAAY,GAAS,IAAa,GACtF,IAAgB,MAAS,MAAK,YAAc,GAAY,UAAU,KAAM,EAAgB,EAAQ,CAAG,IAAM,EAAM,SAAS,KAAM,EAAgB,EAAQ,CAAG,GAAI,CAI7J,GAHA,EAAW,KAAK,cAAc,EAAK,CAAM,IAAM,WAC/C,EAAW,EAAQ,CAAM,EACzB,EAAc,eAAe,EACzB,EAAS,cAAe,MAAO,GAEnC,GAAI,EACF,SAAW,EAEX,EAAQ,EAER,KAAK,WAAW,EAEhB,EAAc,QAAQ,EAEjB,EAAS,eACZ,CAAI,GACF,EAAO,aAAa,EAAQ,EAAM,EAElC,EAAO,YAAY,CAAM,GAItB,EAAU,EAAI,EAGvB,GAAI,GAAc,GAAU,EAAI,EAAQ,SAAS,EAEjD,GAAI,CAAC,GAAe,GAAa,EAAK,EAAU,IAAI,GAAK,CAAC,EAAY,SAAU,CAG9E,GAAI,IAAgB,EAClB,MAAO,GAAU,EAAK,EAYxB,GARI,GAAe,IAAO,EAAI,QAC5B,GAAS,GAGP,GACF,GAAa,EAAQ,CAAM,GAGzB,GAAQ,EAAQ,EAAI,EAAQ,EAAU,EAAQ,EAAY,EAAK,CAAC,CAAC,CAAM,IAAM,GAC/E,SAAQ,EAER,GAAmB,EAAY,YAE7B,EAAG,aAAa,EAAQ,EAAY,WAAW,EAE/C,EAAG,YAAY,CAAM,EAGvB,EAAW,EAEX,EAAQ,EACD,EAAU,EAAI,CAEzB,SAAW,GAAe,GAAc,EAAK,EAAU,IAAI,EAAG,CAE5D,GAAI,IAAa,GAAS,EAAI,EAAG,EAAS,EAAI,EAE9C,GAAI,KAAe,EACjB,MAAO,GAAU,EAAK,EAMxB,GAHA,EAAS,GACT,EAAa,EAAQ,CAAM,EAEvB,GAAQ,EAAQ,EAAI,EAAQ,EAAU,EAAQ,EAAY,EAAK,EAAK,IAAM,GAC5E,SAAQ,EACR,EAAG,aAAa,EAAQ,EAAU,EAClC,EAAW,EAEX,EAAQ,EACD,EAAU,EAAI,CAEzB,SAAW,EAAO,aAAe,EAAI,CACnC,EAAa,EAAQ,CAAM,EAC3B,GAAI,IAAY,EACZ,GACA,GAAiB,EAAO,aAAe,EACvC,EAAkB,CAAC,GAAmB,EAAO,UAAY,EAAO,QAAU,EAAU,EAAO,UAAY,EAAO,QAAU,EAAY,CAAQ,EAC5I,GAAQ,EAAW,MAAQ,OAC3B,GAAkB,GAAe,EAAQ,MAAO,KAAK,GAAK,GAAe,EAAQ,MAAO,KAAK,EAC7F,GAAe,GAAkB,GAAgB,UAAY,OAEjE,KAAmB,GACjB,IAAwB,EAAW,IACnC,GAAwB,GACxB,GAAyB,CAAC,GAAmB,EAAQ,YAAc,IAGrE,GAAY,GAAkB,EAAK,EAAQ,EAAY,EAAU,EAAkB,EAAI,EAAQ,cAAe,EAAQ,uBAAyB,KAAO,EAAQ,cAAgB,EAAQ,sBAAuB,GAAwB,KAAe,CAAM,EAC1P,GAAI,IAEJ,GAAI,KAAc,EAAG,CAEnB,GAAI,IAAY,EAAM,CAAM,EAE5B,EACE,KAAa,GACb,GAAU,EAAS,SAAS,UACrB,IAAY,GAAI,GAAS,SAAS,IAAM,QAAU,KAAY,GACzE,CAGA,GAAI,KAAc,GAAK,KAAY,EACjC,MAAO,GAAU,EAAK,EAGxB,GAAa,EACb,GAAgB,GAChB,GAAI,IAAc,EAAO,mBACrB,GAAQ,GACZ,GAAQ,KAAc,EAEtB,GAAI,IAAa,GAAQ,EAAQ,EAAI,EAAQ,EAAU,EAAQ,EAAY,EAAK,EAAK,EAErF,GAAI,KAAe,GACjB,MAAI,MAAe,GAAK,KAAe,KACrC,IAAQ,KAAe,GAGzB,GAAU,GACV,WAAW,GAAW,EAAE,EACxB,EAAQ,EAER,IAAa,CAAC,GACZ,EAAG,YAAY,CAAM,EAErB,EAAO,WAAW,aAAa,EAAQ,GAAQ,GAAc,CAAM,EAIjE,IACF,GAAS,GAAiB,EAAG,GAAe,GAAgB,SAAS,EAGvE,EAAW,EAAO,WAGd,KAA0B,QAAa,CAAC,IAC1C,IAAqB,KAAK,IAAI,GAAwB,EAAQ,CAAM,EAAE,GAAM,GAG9E,EAAQ,EACD,EAAU,EAAI,CAEzB,CAEA,GAAI,EAAG,SAAS,CAAM,EACpB,MAAO,GAAU,EAAK,CAE1B,CAEA,MAAO,EACT,EACA,sBAAuB,KACvB,eAAgB,UAA0B,CACxC,EAAI,SAAU,YAAa,KAAK,YAAY,EAC5C,EAAI,SAAU,YAAa,KAAK,YAAY,EAC5C,EAAI,SAAU,cAAe,KAAK,YAAY,EAC9C,EAAI,SAAU,WAAY,EAA6B,EACvD,EAAI,SAAU,YAAa,EAA6B,EACxD,EAAI,SAAU,YAAa,EAA6B,CAC1D,EACA,aAAc,UAAwB,CACpC,GAAI,GAAgB,KAAK,GAAG,cAC5B,EAAI,EAAe,UAAW,KAAK,OAAO,EAC1C,EAAI,EAAe,WAAY,KAAK,OAAO,EAC3C,EAAI,EAAe,YAAa,KAAK,OAAO,EAC5C,EAAI,EAAe,cAAe,KAAK,OAAO,EAC9C,EAAI,SAAU,cAAe,IAAI,CACnC,EACA,QAAS,SAET,EAAK,CACH,GAAI,GAAK,KAAK,GACV,EAAU,KAAK,QAYnB,GAVA,EAAW,EAAM,CAAM,EACvB,GAAoB,EAAM,EAAQ,EAAQ,SAAS,EACnD,EAAY,OAAQ,KAAM,CACxB,IAAK,CACP,CAAC,EACD,EAAW,GAAU,EAAO,WAE5B,EAAW,EAAM,CAAM,EACvB,GAAoB,EAAM,EAAQ,EAAQ,SAAS,EAE/C,EAAS,cAAe,CAC1B,KAAK,SAAS,EAEd,MACF,CAEA,GAAsB,GACtB,GAAyB,GACzB,GAAwB,GACxB,cAAc,KAAK,OAAO,EAC1B,aAAa,KAAK,eAAe,EAEjC,GAAgB,KAAK,OAAO,EAE5B,GAAgB,KAAK,YAAY,EAG7B,KAAK,iBACP,GAAI,SAAU,OAAQ,IAAI,EAC1B,EAAI,EAAI,YAAa,KAAK,YAAY,GAGxC,KAAK,eAAe,EAEpB,KAAK,aAAa,EAEd,IACF,EAAI,SAAS,KAAM,cAAe,EAAE,EAGtC,EAAI,EAAQ,YAAa,EAAE,EAEvB,GACE,KACF,GAAI,YAAc,EAAI,eAAe,EACrC,CAAC,EAAQ,YAAc,EAAI,gBAAgB,GAG7C,GAAW,EAAQ,YAAc,EAAQ,WAAW,YAAY,CAAO,EAEnE,KAAW,GAAY,GAAe,EAAY,cAAgB,UAEpE,GAAW,EAAQ,YAAc,EAAQ,WAAW,YAAY,CAAO,EAGrE,GACE,MAAK,iBACP,EAAI,EAAQ,UAAW,IAAI,EAG7B,GAAkB,CAAM,EAExB,EAAO,MAAM,eAAiB,GAG1B,IAAS,CAAC,IACZ,EAAY,EAAQ,EAAc,EAAY,QAAQ,WAAa,KAAK,QAAQ,WAAY,EAAK,EAGnG,EAAY,EAAQ,KAAK,QAAQ,YAAa,EAAK,EAEnD,EAAe,CACb,SAAU,KACV,KAAM,WACN,KAAM,EACN,SAAU,KACV,kBAAmB,KACnB,cAAe,CACjB,CAAC,EAED,IAAe,EACT,IAAY,GAEd,GAAe,CACb,OAAQ,EACR,KAAM,MACN,KAAM,EACN,OAAQ,EACR,cAAe,CACjB,CAAC,EAGD,EAAe,CACb,SAAU,KACV,KAAM,SACN,KAAM,EACN,cAAe,CACjB,CAAC,EAGD,EAAe,CACb,OAAQ,EACR,KAAM,OACN,KAAM,EACN,OAAQ,EACR,cAAe,CACjB,CAAC,EAED,EAAe,CACb,SAAU,KACV,KAAM,OACN,KAAM,EACN,cAAe,CACjB,CAAC,GAGH,GAAe,EAAY,KAAK,GAE5B,IAAa,IACX,GAAY,GAEd,GAAe,CACb,SAAU,KACV,KAAM,SACN,KAAM,EACN,cAAe,CACjB,CAAC,EAED,EAAe,CACb,SAAU,KACV,KAAM,OACN,KAAM,EACN,cAAe,CACjB,CAAC,GAKH,EAAS,QAEP,KAAY,MAAQ,IAAa,KACnC,GAAW,GACX,GAAoB,IAGtB,EAAe,CACb,SAAU,KACV,KAAM,MACN,KAAM,EACN,cAAe,CACjB,CAAC,EAGD,KAAK,KAAK,KAKhB,KAAK,SAAS,CAChB,EACA,SAAU,UAAoB,CAC5B,EAAY,UAAW,IAAI,EAC3B,EAAS,EAAS,EAAW,EAAU,GAAS,EAAU,GAAa,GAAc,GAAS,EAAW,GAAQ,EAAW,GAAoB,GAAW,GAAoB,GAAa,GAAgB,EAAc,GAAc,EAAS,QAAU,EAAS,MAAQ,EAAS,MAAQ,EAAS,OAAS,KAC/S,GAAkB,QAAQ,SAAU,EAAI,CACtC,EAAG,QAAU,EACf,CAAC,EACD,GAAkB,OAAS,GAAS,GAAS,CAC/C,EACA,YAAa,SAEb,EAAK,CACH,OAAQ,EAAI,UACL,WACA,UACH,KAAK,QAAQ,CAAG,EAEhB,UAEG,gBACA,WACH,GACE,MAAK,YAAY,CAAG,EAEpB,GAAgB,CAAG,GAGrB,UAEG,cACH,EAAI,eAAe,EACnB,MAEN,EAMA,QAAS,UAAmB,CAQ1B,OAPI,GAAQ,CAAC,EACT,EACA,EAAW,KAAK,GAAG,SACnB,EAAI,EACJ,EAAI,EAAS,OACb,EAAU,KAAK,QAEZ,EAAI,EAAG,IACZ,EAAK,EAAS,GAEV,EAAQ,EAAI,EAAQ,UAAW,KAAK,GAAI,EAAK,GAC/C,EAAM,KAAK,EAAG,aAAa,EAAQ,UAAU,GAAK,GAAY,CAAE,CAAC,EAIrE,MAAO,EACT,EAMA,KAAM,SAAc,EAAO,EAAc,CACvC,GAAI,GAAQ,CAAC,EACT,EAAS,KAAK,GAClB,KAAK,QAAQ,EAAE,QAAQ,SAAU,EAAI,EAAG,CACtC,GAAI,GAAK,EAAO,SAAS,GAEzB,EAAY,EAAI,KAAK,QAAQ,UAAW,EAAQ,EAAK,GACnD,GAAM,GAAM,EAEhB,EAAG,IAAI,EACP,GAAgB,KAAK,sBAAsB,EAC3C,EAAM,QAAQ,SAAU,EAAI,CAC1B,EAAU,IACR,GAAO,YAAY,EAAM,EAAG,EAC5B,EAAO,YAAY,EAAM,EAAG,EAEhC,CAAC,EACD,GAAgB,KAAK,WAAW,CAClC,EAKA,KAAM,UAAgB,CACpB,GAAI,GAAQ,KAAK,QAAQ,MACzB,GAAS,EAAM,KAAO,EAAM,IAAI,IAAI,CACtC,EAQA,QAAS,SAAmB,EAAI,EAAU,CACxC,MAAO,GAAQ,EAAI,GAAY,KAAK,QAAQ,UAAW,KAAK,GAAI,EAAK,CACvE,EAQA,OAAQ,SAAgB,EAAM,EAAO,CACnC,GAAI,GAAU,KAAK,QAEnB,GAAI,IAAU,OACZ,MAAO,GAAQ,GAEf,GAAI,GAAgB,GAAc,aAAa,KAAM,EAAM,CAAK,EAEhE,MAAW,GAAkB,IAC3B,EAAQ,GAAQ,EAEhB,EAAQ,GAAQ,EAGd,IAAS,SACX,GAAc,CAAO,CAG3B,EAKA,QAAS,UAAmB,CAC1B,EAAY,UAAW,IAAI,EAC3B,GAAI,GAAK,KAAK,GACd,EAAG,GAAW,KACd,EAAI,EAAI,YAAa,KAAK,WAAW,EACrC,EAAI,EAAI,aAAc,KAAK,WAAW,EACtC,EAAI,EAAI,cAAe,KAAK,WAAW,EAEnC,KAAK,iBACP,GAAI,EAAI,WAAY,IAAI,EACxB,EAAI,EAAI,YAAa,IAAI,GAI3B,MAAM,UAAU,QAAQ,KAAK,EAAG,iBAAiB,aAAa,EAAG,SAAU,EAAI,CAC7E,EAAG,gBAAgB,WAAW,CAChC,CAAC,EAED,KAAK,QAAQ,EAEb,KAAK,0BAA0B,EAE/B,GAAU,OAAO,GAAU,QAAQ,KAAK,EAAE,EAAG,CAAC,EAC9C,KAAK,GAAK,EAAK,IACjB,EACA,WAAY,UAAsB,CAChC,GAAI,CAAC,GAAa,CAEhB,GADA,EAAY,YAAa,IAAI,EACzB,EAAS,cAAe,OAC5B,EAAI,EAAS,UAAW,MAAM,EAE1B,KAAK,QAAQ,mBAAqB,EAAQ,YAC5C,EAAQ,WAAW,YAAY,CAAO,EAGxC,GAAc,EAChB,CACF,EACA,WAAY,SAAoB,EAAa,CAC3C,GAAI,EAAY,cAAgB,QAAS,CACvC,KAAK,WAAW,EAEhB,MACF,CAEA,GAAI,GAAa,CAEf,GADA,EAAY,YAAa,IAAI,EACzB,EAAS,cAAe,OAE5B,EAAW,YAAc,GAAU,CAAC,KAAK,QAAQ,MAAM,YACrD,EAAO,aAAa,EAAS,CAAM,EAC9B,GACL,EAAO,aAAa,EAAS,EAAM,EAEnC,EAAO,YAAY,CAAO,EAGxB,KAAK,QAAQ,MAAM,aACrB,KAAK,QAAQ,EAAQ,CAAO,EAG9B,EAAI,EAAS,UAAW,EAAE,EAC1B,GAAc,EAChB,CACF,CACF,EAEA,YAEA,EAAK,CACH,EAAQ,cACN,GAAI,aAAa,WAAa,QAGhC,EAAI,YAAc,EAAI,eAAe,CACvC,CAEA,YAAiB,EAAQ,EAAM,EAAQ,EAAU,EAAU,EAAY,EAAe,EAAiB,CACrG,GAAI,GACA,EAAW,EAAO,GAClB,EAAW,EAAS,QAAQ,OAC5B,EAEJ,MAAI,QAAO,aAAe,CAAC,IAAc,CAAC,GACxC,EAAM,GAAI,aAAY,OAAQ,CAC5B,QAAS,GACT,WAAY,EACd,CAAC,EAED,GAAM,SAAS,YAAY,OAAO,EAClC,EAAI,UAAU,OAAQ,GAAM,EAAI,GAGlC,EAAI,GAAK,EACT,EAAI,KAAO,EACX,EAAI,QAAU,EACd,EAAI,YAAc,EAClB,EAAI,QAAU,GAAY,EAC1B,EAAI,YAAc,GAAc,EAAQ,CAAI,EAC5C,EAAI,gBAAkB,EACtB,EAAI,cAAgB,EACpB,EAAO,cAAc,CAAG,EAEpB,GACF,GAAS,EAAS,KAAK,EAAU,EAAK,CAAa,GAG9C,CACT,CAEA,YAA2B,EAAI,CAC7B,EAAG,UAAY,EACjB,CAEA,aAAqB,CACnB,GAAU,EACZ,CAEA,YAAuB,EAAK,EAAU,EAAU,CAC9C,GAAI,GAAO,EAAQ,GAAS,EAAS,GAAI,EAAG,EAAS,QAAS,EAAI,CAAC,EAC/D,EAAS,GACb,MAAO,GAAW,EAAI,QAAU,EAAK,KAAO,GAAU,EAAI,QAAU,EAAK,KAAO,EAAI,QAAU,EAAK,MAAQ,EAAI,QAAU,EAAK,IAAM,GAAU,EAAI,QAAU,EAAK,QAAU,EAAI,QAAU,EAAK,IAChM,CAEA,YAAsB,EAAK,EAAU,EAAU,CAC7C,GAAI,GAAO,EAAQ,GAAU,EAAS,GAAI,EAAS,QAAQ,SAAS,CAAC,EACjE,EAAS,GACb,MAAO,GAAW,EAAI,QAAU,EAAK,MAAQ,GAAU,EAAI,SAAW,EAAK,OAAS,EAAI,QAAU,EAAK,QAAU,EAAI,SAAW,EAAK,KAAO,EAAI,QAAU,EAAK,OAAS,EAAI,QAAU,EAAK,KAAO,EAAI,SAAW,EAAK,OAAS,EAAI,QAAU,EAAK,OAAS,CAC7P,CAEA,YAA2B,EAAK,EAAQ,EAAY,EAAU,EAAe,EAAuB,EAAY,EAAc,CAC5H,GAAI,GAAc,EAAW,EAAI,QAAU,EAAI,QAC3C,EAAe,EAAW,EAAW,OAAS,EAAW,MACzD,EAAW,EAAW,EAAW,IAAM,EAAW,KAClD,EAAW,EAAW,EAAW,OAAS,EAAW,MACrD,EAAS,GAEb,GAAI,CAAC,GAEH,GAAI,GAAgB,GAAqB,EAAe,GAQtD,GALI,CAAC,IAA0B,MAAkB,EAAI,EAAc,EAAW,EAAe,EAAwB,EAAI,EAAc,EAAW,EAAe,EAAwB,IAEvL,IAAwB,IAGrB,GAOH,EAAS,WALL,KAAkB,EAAI,EAAc,EAAW,GACjD,EAAc,EAAW,GACzB,MAAO,CAAC,WAOR,EAAc,EAAW,EAAgB,GAAI,GAAiB,GAAK,EAAc,EAAW,EAAgB,GAAI,GAAiB,EACnI,MAAO,IAAoB,CAAM,EAOvC,MAFA,GAAS,GAAU,EAEf,GAEE,GAAc,EAAW,EAAe,EAAwB,GAAK,EAAc,EAAW,EAAe,EAAwB,GAChI,EAAc,EAAW,EAAe,EAAI,EAAI,GAIpD,CACT,CASA,YAA6B,EAAQ,CACnC,MAAI,GAAM,CAAM,EAAI,EAAM,CAAM,EACvB,EAEA,EAEX,CASA,YAAqB,EAAI,CAKvB,OAJI,GAAM,EAAG,QAAU,EAAG,UAAY,EAAG,IAAM,EAAG,KAAO,EAAG,YACxD,EAAI,EAAI,OACR,EAAM,EAEH,KACL,GAAO,EAAI,WAAW,CAAC,EAGzB,MAAO,GAAI,SAAS,EAAE,CACxB,CAEA,YAAgC,EAAM,CACpC,GAAkB,OAAS,EAI3B,OAHI,GAAS,EAAK,qBAAqB,OAAO,EAC1C,EAAM,EAAO,OAEV,KAAO,CACZ,GAAI,GAAK,EAAO,GAChB,EAAG,SAAW,GAAkB,KAAK,CAAE,CACzC,CACF,CAEA,YAAmB,EAAI,CACrB,MAAO,YAAW,EAAI,CAAC,CACzB,CAEA,YAAyB,EAAI,CAC3B,MAAO,cAAa,CAAE,CACxB,CAGA,IACE,EAAG,SAAU,YAAa,SAAU,EAAK,CACvC,GAAc,QAAU,KAAwB,EAAI,YAClD,EAAI,eAAe,CAEvB,CAAC,EAIH,EAAS,MAAQ,CACf,GAAI,EACJ,IAAK,EACL,IAAK,EACL,KAAM,GACN,GAAI,SAAY,EAAI,EAAU,CAC5B,MAAO,CAAC,CAAC,EAAQ,EAAI,EAAU,EAAI,EAAK,CAC1C,EACA,OAAQ,GACR,SAAU,GACV,QAAS,EACT,YAAa,EACb,MAAO,GACP,MAAO,EACP,SAAU,GACV,eAAgB,GAChB,gBAAiB,GACjB,SAAU,EACZ,EAOA,EAAS,IAAM,SAAU,EAAS,CAChC,MAAO,GAAQ,EACjB,EAOA,EAAS,MAAQ,UAAY,CAC3B,OAAS,GAAO,UAAU,OAAQ,EAAU,GAAI,OAAM,CAAI,EAAG,EAAO,EAAG,EAAO,EAAM,IAClF,EAAQ,GAAQ,UAAU,GAG5B,EAAY,GAAG,cAAgB,OAAO,GAAU,EAAQ,IACxD,EAAQ,QAAQ,SAAU,EAAQ,CAChC,GAAI,CAAC,EAAO,WAAa,CAAC,EAAO,UAAU,YACzC,KAAM,gEAAgE,OAAO,CAAC,EAAE,SAAS,KAAK,CAAM,CAAC,EAGvG,EAAW,OAAO,GAAS,MAAQ,EAAe,EAAe,CAAC,EAAG,EAAS,KAAK,EAAG,EAAO,KAAK,GAClG,GAAc,MAAM,CAAM,CAC5B,CAAC,CACH,EAQA,EAAS,OAAS,SAAU,EAAI,EAAS,CACvC,MAAO,IAAI,GAAS,EAAI,CAAO,CACjC,EAGA,EAAS,QAAU,GAEnB,GAAI,GAAc,CAAC,EACf,GACA,GACA,GAAY,GACZ,GACA,GACA,GACA,GAEJ,aAA4B,CAC1B,YAAsB,CACpB,KAAK,SAAW,CACd,OAAQ,GACR,wBAAyB,GACzB,kBAAmB,GACnB,YAAa,GACb,aAAc,EAChB,EAEA,OAAS,KAAM,MACb,EAAO,OAAO,CAAC,IAAM,KAAO,MAAO,MAAK,IAAQ,YAC9C,MAAK,GAAM,KAAK,GAAI,KAAK,IAAI,EAGnC,CAEA,SAAW,UAAY,CACrB,YAAa,SAAqB,EAAM,CACtC,GAAI,GAAgB,EAAK,cAEzB,KAAS,SAAS,gBAChB,EAAG,SAAU,WAAY,KAAK,iBAAiB,EAE/C,KAAS,QAAQ,eACf,EAAG,SAAU,cAAe,KAAK,yBAAyB,EACrD,EAAkB,QACvB,EAAG,SAAU,YAAa,KAAK,yBAAyB,EAExD,EAAG,SAAU,YAAa,KAAK,yBAAyB,CAG9D,EACA,kBAAmB,SAA2B,EAAO,CACnD,GAAI,GAAgB,EAAM,cAG1B,CAAK,KAAK,QAAQ,gBAAkB,CAAC,EAAc,QACjD,KAAK,kBAAkB,CAAa,CAExC,EACA,KAAM,UAAgB,CACpB,KAAS,SAAS,gBAChB,EAAI,SAAU,WAAY,KAAK,iBAAiB,EAEhD,GAAI,SAAU,cAAe,KAAK,yBAAyB,EAC3D,EAAI,SAAU,YAAa,KAAK,yBAAyB,EACzD,EAAI,SAAU,YAAa,KAAK,yBAAyB,GAG3D,GAAgC,EAChC,GAAiB,EACjB,GAAe,CACjB,EACA,QAAS,UAAmB,CAC1B,GAAa,GAAe,GAAW,GAAY,GAA6B,GAAkB,GAAkB,KACpH,EAAY,OAAS,CACvB,EACA,0BAA2B,SAAmC,EAAK,CACjE,KAAK,kBAAkB,EAAK,EAAI,CAClC,EACA,kBAAmB,SAA2B,EAAK,EAAU,CAC3D,GAAI,GAAQ,KAER,EAAK,GAAI,QAAU,EAAI,QAAQ,GAAK,GAAK,QACzC,EAAK,GAAI,QAAU,EAAI,QAAQ,GAAK,GAAK,QACzC,EAAO,SAAS,iBAAiB,EAAG,CAAC,EAMzC,GALA,GAAa,EAKT,GAAY,KAAK,QAAQ,yBAA2B,IAAQ,IAAc,GAAQ,CACpF,GAAW,EAAK,KAAK,QAAS,EAAM,CAAQ,EAE5C,GAAI,GAAiB,GAA2B,EAAM,EAAI,EAE1D,IAAkB,EAAC,IAA8B,IAAM,IAAmB,IAAM,KAC9E,KAA8B,GAAgC,EAE9D,GAA6B,YAAY,UAAY,CACnD,GAAI,GAAU,GAA2B,SAAS,iBAAiB,EAAG,CAAC,EAAG,EAAI,EAE9E,IAAgB,GACd,GAAiB,EACjB,GAAiB,GAGnB,GAAW,EAAK,EAAM,QAAS,EAAS,CAAQ,CAClD,EAAG,EAAE,EACL,GAAkB,EAClB,GAAkB,EAEtB,KAAO,CAEL,GAAI,CAAC,KAAK,QAAQ,cAAgB,GAA2B,EAAM,EAAI,IAAM,EAA0B,EAAG,CACxG,GAAiB,EACjB,MACF,CAEA,GAAW,EAAK,KAAK,QAAS,GAA2B,EAAM,EAAK,EAAG,EAAK,CAC9E,CACF,CACF,EACO,EAAS,EAAY,CAC1B,WAAY,SACZ,oBAAqB,EACvB,CAAC,CACH,CAEA,aAA4B,CAC1B,EAAY,QAAQ,SAAU,EAAY,CACxC,cAAc,EAAW,GAAG,CAC9B,CAAC,EACD,EAAc,CAAC,CACjB,CAEA,aAA2C,CACzC,cAAc,EAA0B,CAC1C,CAEA,GAAI,IAAa,GAAS,SAAU,EAAK,EAAS,EAAQ,EAAY,CAEpE,GAAI,EAAC,EAAQ,OACb,IAAI,GAAK,GAAI,QAAU,EAAI,QAAQ,GAAK,GAAK,QACzC,EAAK,GAAI,QAAU,EAAI,QAAQ,GAAK,GAAK,QACzC,EAAO,EAAQ,kBACf,EAAQ,EAAQ,YAChB,EAAc,EAA0B,EACxC,EAAqB,GACrB,EAEJ,KAAqB,GACnB,IAAe,EACf,GAAiB,EACjB,GAAW,EAAQ,OACnB,EAAiB,EAAQ,SAErB,KAAa,IACf,IAAW,GAA2B,EAAQ,EAAI,IAItD,GAAI,GAAY,EACZ,EAAgB,GAEpB,EAAG,CACD,GAAI,GAAK,EACL,EAAO,EAAQ,CAAE,EACjB,EAAM,EAAK,IACX,EAAS,EAAK,OACd,EAAO,EAAK,KACZ,EAAQ,EAAK,MACb,EAAQ,EAAK,MACb,EAAS,EAAK,OACd,GAAa,OACb,GAAa,OACb,GAAc,EAAG,YACjB,GAAe,EAAG,aAClB,EAAQ,EAAI,CAAE,EACd,GAAa,EAAG,WAChB,GAAa,EAAG,UAEpB,IAAW,EACT,IAAa,EAAQ,IAAgB,GAAM,YAAc,QAAU,EAAM,YAAc,UAAY,EAAM,YAAc,WACvH,GAAa,EAAS,IAAiB,GAAM,YAAc,QAAU,EAAM,YAAc,UAAY,EAAM,YAAc,YAEzH,IAAa,EAAQ,IAAgB,GAAM,YAAc,QAAU,EAAM,YAAc,UACvF,GAAa,EAAS,IAAiB,GAAM,YAAc,QAAU,EAAM,YAAc,WAG3F,GAAI,IAAK,IAAe,MAAK,IAAI,EAAQ,CAAC,GAAK,GAAQ,GAAa,EAAQ,IAAgB,MAAK,IAAI,EAAO,CAAC,GAAK,GAAQ,CAAC,CAAC,IACxH,GAAK,IAAe,MAAK,IAAI,EAAS,CAAC,GAAK,GAAQ,GAAa,EAAS,IAAiB,MAAK,IAAI,EAAM,CAAC,GAAK,GAAQ,CAAC,CAAC,IAE9H,GAAI,CAAC,EAAY,GACf,OAAS,IAAI,EAAG,IAAK,EAAW,KAC9B,EAAiB,KACf,GAAY,IAAK,CAAC,GAKxB,GAAgB,GAAW,IAAM,IAAM,EAAY,GAAW,IAAM,IAAM,EAAY,GAAW,KAAO,IACtG,GAAY,GAAW,GAAK,EAC5B,EAAY,GAAW,GAAK,GAC5B,EAAY,GAAW,GAAK,GAC5B,cAAc,EAAY,GAAW,GAAG,EAEpC,KAAM,GAAK,IAAM,IACnB,GAAqB,GAGrB,EAAY,GAAW,IAAM,YAAY,UAAY,CAEnD,GAAkB,KAAK,QAAU,GAC/B,EAAS,OAAO,aAAa,EAAU,EAIzC,GAAI,IAAgB,EAAY,KAAK,OAAO,GAAK,EAAY,KAAK,OAAO,GAAK,EAAQ,EAClF,GAAgB,EAAY,KAAK,OAAO,GAAK,EAAY,KAAK,OAAO,GAAK,EAAQ,EAEtF,MAAW,IAAmB,YACxB,EAAe,KAAK,EAAS,QAAQ,WAAW,GAAU,GAAe,GAAe,EAAK,GAAY,EAAY,KAAK,OAAO,EAAE,IAAM,YAK/I,GAAS,EAAY,KAAK,OAAO,GAAI,GAAe,EAAa,CACnE,EAAE,KAAK,CACL,MAAO,CACT,CAAC,EAAG,EAAE,IAIV,GACF,OAAS,EAAQ,cAAgB,IAAkB,GAAgB,GAAgB,GAA2B,EAAe,EAAK,IAElI,GAAY,EACd,EAAG,EAAE,EAED,GAAO,SAAc,EAAM,CAC7B,GAAI,GAAgB,EAAK,cACrB,EAAc,EAAK,YACnB,EAAS,EAAK,OACd,EAAiB,EAAK,eACtB,EAAwB,EAAK,sBAC7B,EAAqB,EAAK,mBAC1B,EAAuB,EAAK,qBAChC,GAAI,EAAC,EACL,IAAI,GAAa,GAAe,EAChC,EAAmB,EACnB,GAAI,GAAQ,EAAc,gBAAkB,EAAc,eAAe,OAAS,EAAc,eAAe,GAAK,EAChH,EAAS,SAAS,iBAAiB,EAAM,QAAS,EAAM,OAAO,EACnE,EAAqB,EAEjB,GAAc,CAAC,EAAW,GAAG,SAAS,CAAM,GAC9C,GAAsB,OAAO,EAC7B,KAAK,QAAQ,CACX,OAAQ,EACR,YAAa,CACf,CAAC,GAEL,EAEA,aAAkB,CAAC,CAEnB,GAAO,UAAY,CACjB,WAAY,KACZ,UAAW,SAAmB,EAAO,CACnC,GAAI,GAAoB,EAAM,kBAC9B,KAAK,WAAa,CACpB,EACA,QAAS,SAAiB,EAAO,CAC/B,GAAI,GAAS,EAAM,OACf,EAAc,EAAM,YACxB,KAAK,SAAS,sBAAsB,EAEhC,GACF,EAAY,sBAAsB,EAGpC,GAAI,GAAc,GAAS,KAAK,SAAS,GAAI,KAAK,WAAY,KAAK,OAAO,EAE1E,EACE,KAAK,SAAS,GAAG,aAAa,EAAQ,CAAW,EAEjD,KAAK,SAAS,GAAG,YAAY,CAAM,EAGrC,KAAK,SAAS,WAAW,EAErB,GACF,EAAY,WAAW,CAE3B,EACA,KAAM,EACR,EAEA,EAAS,GAAQ,CACf,WAAY,eACd,CAAC,EAED,aAAkB,CAAC,CAEnB,GAAO,UAAY,CACjB,QAAS,SAAiB,EAAO,CAC/B,GAAI,GAAS,EAAM,OACf,EAAc,EAAM,YACpB,EAAiB,GAAe,KAAK,SACzC,EAAe,sBAAsB,EACrC,EAAO,YAAc,EAAO,WAAW,YAAY,CAAM,EACzD,EAAe,WAAW,CAC5B,EACA,KAAM,EACR,EAEA,EAAS,GAAQ,CACf,WAAY,eACd,CAAC,EAED,GAAI,GAEJ,aAAsB,CACpB,YAAgB,CACd,KAAK,SAAW,CACd,UAAW,yBACb,CACF,CAEA,SAAK,UAAY,CACf,UAAW,SAAmB,EAAM,CAClC,GAAI,GAAS,EAAK,OAClB,EAAa,CACf,EACA,cAAe,SAAuB,EAAO,CAC3C,GAAI,GAAY,EAAM,UAClB,EAAS,EAAM,OACf,EAAS,EAAM,OACf,EAAiB,EAAM,eACvB,EAAU,EAAM,QAChB,EAAS,EAAM,OACnB,GAAI,EAAC,EAAe,QAAQ,KAC5B,IAAI,GAAK,KAAK,SAAS,GACnB,EAAU,KAAK,QAEnB,GAAI,GAAU,IAAW,EAAI,CAC3B,GAAI,GAAa,EAEjB,EAAW,CAAM,IAAM,GACrB,GAAY,EAAQ,EAAQ,UAAW,EAAI,EAC3C,EAAa,GAEb,EAAa,KAGX,GAAc,IAAe,GAC/B,EAAY,EAAY,EAAQ,UAAW,EAAK,CAEpD,CAEA,EAAQ,EACR,EAAU,EAAI,EACd,EAAO,EACT,EACA,KAAM,SAAc,EAAO,CACzB,GAAI,GAAiB,EAAM,eACvB,EAAc,EAAM,YACpB,EAAS,EAAM,OACf,EAAa,GAAe,KAAK,SACjC,EAAU,KAAK,QACnB,GAAc,EAAY,EAAY,EAAQ,UAAW,EAAK,EAE1D,GAAe,GAAQ,MAAQ,GAAe,EAAY,QAAQ,OAChE,IAAW,GACb,GAAW,sBAAsB,EAC7B,IAAe,GAAgB,EAAe,sBAAsB,EACxE,GAAU,EAAQ,CAAU,EAC5B,EAAW,WAAW,EAClB,IAAe,GAAgB,EAAe,WAAW,EAGnE,EACA,QAAS,UAAmB,CAC1B,EAAa,IACf,CACF,EACO,EAAS,EAAM,CACpB,WAAY,OACZ,gBAAiB,UAA2B,CAC1C,MAAO,CACL,SAAU,CACZ,CACF,CACF,CAAC,CACH,CAEA,YAAmB,EAAI,EAAI,CACzB,GAAI,GAAK,EAAG,WACR,EAAK,EAAG,WACR,EACA,EACJ,CAAK,GAAM,CAAC,GAAM,EAAG,YAAY,CAAE,GAAK,EAAG,YAAY,CAAE,GACzD,GAAK,EAAM,CAAE,EACb,EAAK,EAAM,CAAE,EAET,EAAG,YAAY,CAAE,GAAK,EAAK,GAC7B,IAGF,EAAG,aAAa,EAAI,EAAG,SAAS,EAAG,EACnC,EAAG,aAAa,EAAI,EAAG,SAAS,EAAG,EACrC,CAEA,GAAI,GAAoB,KACpB,EAAkB,KAClB,GAEJ,EACI,GAAiB,GAErB,EAAU,GAEV,GAAc,GACV,EACA,GACA,GAEJ,aAA2B,CACzB,WAAmB,EAAU,CAE3B,OAAS,KAAM,MACb,EAAO,OAAO,CAAC,IAAM,KAAO,MAAO,MAAK,IAAQ,YAC9C,MAAK,GAAM,KAAK,GAAI,KAAK,IAAI,GAIjC,EAAc,QAAQ,uBACpB,CAAI,EAAS,QAAQ,eACnB,EAAG,SAAU,YAAa,KAAK,kBAAkB,EAEjD,GAAG,SAAU,UAAW,KAAK,kBAAkB,EAC/C,EAAG,SAAU,WAAY,KAAK,kBAAkB,IAIpD,EAAG,SAAU,UAAW,KAAK,aAAa,EAC1C,EAAG,SAAU,QAAS,KAAK,WAAW,EACtC,KAAK,SAAW,CACd,cAAe,oBACf,aAAc,KACd,sBAAuB,GACvB,QAAS,SAAiB,EAAc,EAAQ,CAC9C,GAAI,GAAO,GAEX,EAAsB,QAAU,IAAsB,EACpD,EAAkB,QAAQ,SAAU,EAAkB,EAAG,CACvD,GAAS,CAAC,EAAS,KAAL,IAAa,EAAiB,WAC9C,CAAC,EAED,EAAO,EAAO,YAGhB,EAAa,QAAQ,OAAQ,CAAI,CACnC,CACF,CACF,CAEA,SAAU,UAAY,CACpB,iBAAkB,GAClB,YAAa,GACb,iBAAkB,SAA0B,EAAM,CAChD,GAAI,GAAU,EAAK,OACnB,EAAW,CACb,EACA,WAAY,UAAsB,CAChC,KAAK,YAAc,CAAC,EAAkB,QAAQ,CAAQ,CACxD,EACA,WAAY,SAAoB,EAAO,CACrC,GAAI,GAAW,EAAM,SACjB,EAAS,EAAM,OACnB,GAAI,EAAC,KAAK,YAEV,QAAS,GAAI,EAAG,EAAI,EAAkB,OAAQ,IAC5C,EAAgB,KAAK,GAAM,EAAkB,EAAE,CAAC,EAChD,EAAgB,GAAG,cAAgB,EAAkB,GAAG,cACxD,EAAgB,GAAG,UAAY,GAC/B,EAAgB,GAAG,MAAM,eAAiB,GAC1C,EAAY,EAAgB,GAAI,KAAK,QAAQ,cAAe,EAAK,EACjE,EAAkB,KAAO,GAAY,EAAY,EAAgB,GAAI,KAAK,QAAQ,YAAa,EAAK,EAGtG,EAAS,WAAW,EAEpB,EAAO,EACT,EACA,MAAO,SAAe,EAAO,CAC3B,GAAI,GAAW,EAAM,SACjB,EAAS,EAAM,OACf,EAAwB,EAAM,sBAC9B,EAAS,EAAM,OACnB,CAAK,KAAK,aAEL,KAAK,QAAQ,mBACZ,EAAkB,QAAU,IAAsB,GACpD,IAAsB,GAAM,CAAM,EAClC,EAAsB,OAAO,EAC7B,EAAO,EAGb,EACA,UAAW,SAAmB,EAAO,CACnC,GAAI,GAAgB,EAAM,cACtB,EAAS,EAAM,OACf,EAAS,EAAM,OACnB,CAAK,KAAK,aACV,IAAsB,GAAO,CAAM,EACnC,EAAgB,QAAQ,SAAU,EAAO,CACvC,EAAI,EAAO,UAAW,EAAE,CAC1B,CAAC,EACD,EAAc,EACd,GAAe,GACf,EAAO,EACT,EACA,UAAW,SAAmB,EAAO,CACnC,GAAI,GAAQ,KAER,EAAW,EAAM,SACjB,EAAiB,EAAM,eACvB,EAAS,EAAM,OACnB,CAAK,KAAK,aACV,GAAgB,QAAQ,SAAU,EAAO,CACvC,EAAI,EAAO,UAAW,MAAM,EAExB,EAAM,QAAQ,mBAAqB,EAAM,YAC3C,EAAM,WAAW,YAAY,CAAK,CAEtC,CAAC,EACD,EAAe,EACf,GAAe,GACf,EAAO,EACT,EACA,gBAAiB,SAAyB,EAAO,CAC/C,GAAI,GAAW,EAAM,SAErB,CAAK,KAAK,aAAe,GACvB,EAAkB,UAAU,mBAAmB,EAGjD,EAAkB,QAAQ,SAAU,EAAkB,CACpD,EAAiB,cAAgB,EAAM,CAAgB,CACzD,CAAC,EAED,EAAoB,EAAkB,KAAK,SAAU,EAAG,EAAG,CACzD,MAAO,GAAE,cAAgB,EAAE,aAC7B,CAAC,EACD,GAAc,EAChB,EACA,YAAa,SAAqB,EAAO,CACvC,GAAI,GAAS,KAET,EAAW,EAAM,SACrB,GAAI,EAAC,KAAK,YAEV,IAAI,KAAK,QAAQ,MAOf,GAAS,sBAAsB,EAE3B,KAAK,QAAQ,WAAW,CAC1B,EAAkB,QAAQ,SAAU,EAAkB,CACpD,IAAyB,GACzB,EAAI,EAAkB,WAAY,UAAU,CAC9C,CAAC,EACD,GAAI,GAAW,EAAQ,EAAU,GAAO,GAAM,EAAI,EAClD,EAAkB,QAAQ,SAAU,EAAkB,CACpD,IAAyB,GACzB,GAAQ,EAAkB,CAAQ,CACpC,CAAC,EACD,EAAU,GACV,GAAiB,EACnB,CAGF,EAAS,WAAW,UAAY,CAC9B,EAAU,GACV,GAAiB,GAEb,EAAO,QAAQ,WACjB,EAAkB,QAAQ,SAAU,EAAkB,CACpD,GAAU,CAAgB,CAC5B,CAAC,EAIC,EAAO,QAAQ,MACjB,GAAwB,CAE5B,CAAC,EACH,EACA,SAAU,SAAkB,EAAO,CACjC,GAAI,GAAS,EAAM,OACf,EAAY,EAAM,UAClB,EAAS,EAAM,OAEnB,GAAe,CAAC,EAAkB,QAAQ,CAAM,GAC9C,GAAU,EAAK,EACf,EAAO,EAEX,EACA,OAAQ,SAAgB,EAAO,CAC7B,GAAI,GAAe,EAAM,aACrB,EAAS,EAAM,OACf,EAAW,EAAM,SACjB,EAAW,EAAM,SAErB,EAAsB,OAAS,GAE7B,GAAkB,QAAQ,SAAU,EAAkB,CACpD,EAAS,kBAAkB,CACzB,OAAQ,EACR,KAAM,EAAU,EAAQ,CAAgB,EAAI,CAC9C,CAAC,EACD,GAAU,CAAgB,EAC1B,EAAiB,SAAW,EAC5B,EAAa,qBAAqB,CAAgB,CACpD,CAAC,EACD,EAAU,GACV,GAAwB,CAAC,KAAK,QAAQ,kBAAmB,CAAM,EAEnE,EACA,kBAAmB,SAA2B,EAAQ,CACpD,GAAI,GAAW,EAAO,SAClB,EAAU,EAAO,QACjB,EAAY,EAAO,UACnB,EAAiB,EAAO,eACxB,EAAW,EAAO,SAClB,EAAc,EAAO,YACrB,EAAU,KAAK,QAEnB,GAAI,EAAW,CAQb,GANI,GACF,EAAe,WAAW,EAG5B,GAAiB,GAEb,EAAQ,WAAa,EAAkB,OAAS,GAAM,IAAW,CAAC,GAAW,CAAC,EAAe,QAAQ,MAAQ,CAAC,GAAc,CAE9H,GAAI,GAAmB,EAAQ,EAAU,GAAO,GAAM,EAAI,EAC1D,EAAkB,QAAQ,SAAU,EAAkB,CACpD,IAAyB,GACzB,IAAQ,EAAkB,CAAgB,EAG1C,EAAS,YAAY,CAAgB,EACvC,CAAC,EACD,EAAU,EACZ,CAGA,GAAI,CAAC,EAMH,GAJK,GACH,GAAwB,EAGtB,EAAkB,OAAS,EAAG,CAChC,GAAI,GAAqB,GAEzB,EAAe,WAAW,CAAQ,EAG9B,EAAe,QAAQ,WAAa,CAAC,IAAgB,GACvD,EAAgB,QAAQ,SAAU,EAAO,CACvC,EAAe,kBAAkB,CAC/B,OAAQ,EACR,KAAM,EACR,CAAC,EACD,EAAM,SAAW,GACjB,EAAM,sBAAwB,IAChC,CAAC,CAEL,KACE,GAAe,WAAW,CAAQ,CAGxC,CACF,EACA,yBAA0B,SAAkC,EAAQ,CAClE,GAAI,GAAW,EAAO,SAClB,EAAU,EAAO,QACjB,EAAiB,EAAO,eAK5B,GAJA,EAAkB,QAAQ,SAAU,EAAkB,CACpD,EAAiB,sBAAwB,IAC3C,CAAC,EAEG,EAAe,QAAQ,WAAa,CAAC,GAAW,EAAe,UAAU,YAAa,CACxF,GAAiB,EAAS,CAAC,EAAG,CAAQ,EACtC,GAAI,GAAa,GAAO,EAAU,EAAI,EACtC,GAAe,KAAO,EAAW,EACjC,GAAe,MAAQ,EAAW,CACpC,CACF,EACA,0BAA2B,UAAqC,CAC9D,GACE,GAAU,GACV,GAAwB,EAE5B,EACA,KAAM,SAAc,EAAQ,CAC1B,GAAI,GAAM,EAAO,cACb,EAAS,EAAO,OAChB,EAAW,EAAO,SAClB,EAAW,EAAO,SAClB,EAAwB,EAAO,sBAC/B,EAAW,EAAO,SAClB,EAAc,EAAO,YACrB,EAAa,GAAe,KAAK,SACrC,GAAI,EAAC,EACL,IAAI,GAAU,KAAK,QACf,EAAW,EAAS,SAExB,GAAI,CAAC,GAOH,GANI,EAAQ,cAAgB,CAAC,KAAK,kBAChC,KAAK,mBAAmB,EAG1B,EAAY,EAAU,EAAQ,cAAe,CAAC,CAAC,EAAkB,QAAQ,CAAQ,CAAC,EAE7E,CAAC,EAAkB,QAAQ,CAAQ,EA8CtC,EAAkB,OAAO,EAAkB,QAAQ,CAAQ,EAAG,CAAC,EAC/D,GAAsB,KACtB,GAAc,CACZ,SAAU,EACV,OAAQ,EACR,KAAM,WACN,SAAU,EACV,cAAe,CACjB,CAAC,MAtDwC,CAUzC,GATA,EAAkB,KAAK,CAAQ,EAC/B,GAAc,CACZ,SAAU,EACV,OAAQ,EACR,KAAM,SACN,SAAU,EACV,cAAe,CACjB,CAAC,EAEG,EAAI,UAAY,IAAuB,EAAS,GAAG,SAAS,EAAmB,EAAG,CACpF,GAAI,GAAY,EAAM,EAAmB,EACrC,EAAe,EAAM,CAAQ,EAEjC,GAAI,CAAC,GAAa,CAAC,GAAgB,IAAc,EAAc,CAG7D,GAAI,GAAG,EAUP,IARA,EAAmB,EACjB,GAAI,EACJ,EAAI,GAEJ,GAAI,EACJ,EAAI,EAAY,GAGX,EAAI,EAAG,IACZ,CAAK,EAAkB,QAAQ,EAAS,EAAE,GAC1C,GAAY,EAAS,GAAI,EAAQ,cAAe,EAAI,EACpD,EAAkB,KAAK,EAAS,EAAE,EAClC,GAAc,CACZ,SAAU,EACV,OAAQ,EACR,KAAM,SACN,SAAU,EAAS,GACnB,cAAe,CACjB,CAAC,EAEL,CACF,KACE,IAAsB,EAGxB,EAAoB,CACtB,CAcF,GAAI,IAAe,KAAK,YAAa,CAGnC,GAFA,EAAU,GAEL,GAAS,GAAS,QAAQ,MAAQ,IAAa,IAAW,EAAkB,OAAS,EAAG,CAC3F,GAAI,GAAW,EAAQ,CAAQ,EAC3B,EAAiB,EAAM,EAAU,SAAW,KAAK,QAAQ,cAAgB,GAAG,EAIhF,GAHI,CAAC,IAAkB,EAAQ,WAAW,GAAS,sBAAwB,MAC3E,EAAW,sBAAsB,EAE7B,CAAC,IACC,GAAQ,WACV,GAAS,SAAW,EACpB,EAAkB,QAAQ,SAAU,EAAkB,CAGpD,GAFA,EAAiB,sBAAwB,KAErC,IAAqB,EAAU,CACjC,GAAI,IAAO,EAAU,EAAQ,CAAgB,EAAI,EACjD,EAAiB,SAAW,GAE5B,EAAW,kBAAkB,CAC3B,OAAQ,EACR,KAAM,EACR,CAAC,CACH,CACF,CAAC,GAKH,GAAwB,EACxB,EAAkB,QAAQ,SAAU,EAAkB,CACpD,EAAa,GACX,EAAS,aAAa,EAAkB,EAAS,EAAe,EAEhE,EAAS,YAAY,CAAgB,EAGvC,GACF,CAAC,EAIG,IAAa,EAAM,CAAQ,GAAG,CAChC,GAAI,GAAS,GACb,EAAkB,QAAQ,SAAU,EAAkB,CACpD,GAAI,EAAiB,gBAAkB,EAAM,CAAgB,EAAG,CAC9D,EAAS,GACT,MACF,CACF,CAAC,EAEG,GACF,EAAsB,QAAQ,CAElC,CAIF,EAAkB,QAAQ,SAAU,EAAkB,CACpD,GAAU,CAAgB,CAC5B,CAAC,EACD,EAAW,WAAW,CACxB,CAEA,EAAoB,CACtB,CAGA,KAAe,GAAY,GAAe,EAAY,cAAgB,UACpE,EAAgB,QAAQ,SAAU,EAAO,CACvC,EAAM,YAAc,EAAM,WAAW,YAAY,CAAK,CACxD,CAAC,EAEL,EACA,cAAe,UAAyB,CACtC,KAAK,YAAc,GAAc,GACjC,EAAgB,OAAS,CAC3B,EACA,cAAe,UAAyB,CACtC,KAAK,mBAAmB,EAExB,EAAI,SAAU,YAAa,KAAK,kBAAkB,EAClD,EAAI,SAAU,UAAW,KAAK,kBAAkB,EAChD,EAAI,SAAU,WAAY,KAAK,kBAAkB,EACjD,EAAI,SAAU,UAAW,KAAK,aAAa,EAC3C,EAAI,SAAU,QAAS,KAAK,WAAW,CACzC,EACA,mBAAoB,SAA4B,EAAK,CACnD,GAAI,QAAO,IAAgB,KAAe,KAEtC,IAAsB,KAAK,UAE3B,KAAO,EAAQ,EAAI,OAAQ,KAAK,QAAQ,UAAW,KAAK,SAAS,GAAI,EAAK,IAE1E,KAAO,EAAI,SAAW,GAE1B,KAAO,EAAkB,QAAQ,CAC/B,GAAI,GAAK,EAAkB,GAC3B,EAAY,EAAI,KAAK,QAAQ,cAAe,EAAK,EACjD,EAAkB,MAAM,EACxB,GAAc,CACZ,SAAU,KAAK,SACf,OAAQ,KAAK,SAAS,GACtB,KAAM,WACN,SAAU,EACV,cAAe,CACjB,CAAC,CACH,CACF,EACA,cAAe,SAAuB,EAAK,CACzC,EAAQ,MAAQ,KAAK,QAAQ,cAC3B,MAAK,iBAAmB,GAE5B,EACA,YAAa,SAAqB,EAAK,CACrC,EAAQ,MAAQ,KAAK,QAAQ,cAC3B,MAAK,iBAAmB,GAE5B,CACF,EACO,EAAS,EAAW,CAEzB,WAAY,YACZ,MAAO,CAKL,OAAQ,SAAgB,EAAI,CAC1B,GAAI,GAAW,EAAG,WAAW,GAC7B,CAAK,GAAY,CAAC,EAAS,QAAQ,WAAa,CAAC,EAAkB,QAAQ,CAAE,GAEzE,IAAqB,IAAsB,GAC7C,GAAkB,UAAU,mBAAmB,EAE/C,EAAoB,GAGtB,EAAY,EAAI,EAAS,QAAQ,cAAe,EAAI,EACpD,EAAkB,KAAK,CAAE,EAC3B,EAMA,SAAU,SAAkB,EAAI,CAC9B,GAAI,GAAW,EAAG,WAAW,GACzB,EAAQ,EAAkB,QAAQ,CAAE,EACxC,CAAK,GAAY,CAAC,EAAS,QAAQ,WAAa,CAAC,CAAC,GAClD,GAAY,EAAI,EAAS,QAAQ,cAAe,EAAK,EACrD,EAAkB,OAAO,EAAO,CAAC,EACnC,CACF,EACA,gBAAiB,UAA2B,CAC1C,GAAI,GAAS,KAET,EAAc,CAAC,EACf,EAAc,CAAC,EACnB,SAAkB,QAAQ,SAAU,EAAkB,CACpD,EAAY,KAAK,CACf,iBAAkB,EAClB,MAAO,EAAiB,aAC1B,CAAC,EAED,GAAI,GAEJ,GAAe,IAAqB,EAClC,EAAW,GACN,EACL,EAAW,EAAM,EAAkB,SAAW,EAAO,QAAQ,cAAgB,GAAG,EAEhF,EAAW,EAAM,CAAgB,EAGnC,EAAY,KAAK,CACf,iBAAkB,EAClB,MAAO,CACT,CAAC,CACH,CAAC,EACM,CACL,MAAO,GAAmB,CAAiB,EAC3C,OAAQ,CAAC,EAAE,OAAO,CAAe,EACjC,YAAa,EACb,YAAa,CACf,CACF,EACA,gBAAiB,CACf,aAAc,SAAsB,EAAK,CACvC,SAAM,EAAI,YAAY,EAEtB,IAAY,OACV,EAAM,UACG,EAAI,OAAS,GACtB,GAAM,EAAI,OAAO,CAAC,EAAE,YAAY,EAAI,EAAI,OAAO,CAAC,GAG3C,CACT,CACF,CACF,CAAC,CACH,CAEA,YAAiC,EAAgB,EAAQ,CACvD,EAAkB,QAAQ,SAAU,EAAkB,EAAG,CACvD,GAAI,GAAS,EAAO,SAAS,EAAiB,cAAiB,GAAiB,OAAO,CAAC,EAAI,IAE5F,EACE,EAAO,aAAa,EAAkB,CAAM,EAE5C,EAAO,YAAY,CAAgB,CAEvC,CAAC,CACH,CAQA,YAA+B,EAAkB,EAAQ,CACvD,EAAgB,QAAQ,SAAU,EAAO,EAAG,CAC1C,GAAI,GAAS,EAAO,SAAS,EAAM,cAAiB,GAAmB,OAAO,CAAC,EAAI,IAEnF,EACE,EAAO,aAAa,EAAO,CAAM,EAEjC,EAAO,YAAY,CAAK,CAE5B,CAAC,CACH,CAEA,aAAmC,CACjC,EAAkB,QAAQ,SAAU,EAAkB,CACpD,IAAyB,GACzB,EAAiB,YAAc,EAAiB,WAAW,YAAY,CAAgB,CACzF,CAAC,CACH,CAEA,EAAS,MAAM,GAAI,GAAkB,EACrC,EAAS,MAAM,GAAQ,EAAM,EAE7B,SAAe,E,qKC9rHf,MAAe,EAA8B,CAE5C,YAA4B,EAAgB,CAAhB,cAD5B,YAC6C,CAC9C,CAMO,MAAM,SAAsC,GAAuB,CAAC,CAIpE,MAAM,UAA2C,GAAuB,CAAC,CAEzE,YACN,EACA,EACA,EACC,CACD,EAAS,SAAW,EAAI,QAExB,EAAG,EAAI,MAA6B,CACrC,CAIO,KAAM,IAA0B,GAAI,GAAe,eAAe,EAM5D,GAAqB,GAAI,GAAqC,iBAAiB,EAS/E,GAA0C,GAAI,GAC1D,uBACD,EAUa,GAAiC,GAAI,GAA0C,sBAAsB,EAQrG,GAAyC,GAAI,IACzD,yBACD,EAOa,GACZ,GAAI,IAA2D,0BAA0B,EAM7E,GAAgC,GAAI,IAAyC,uBAAuB,EC1CpG,GAAmB,GAAI,GAAe,cAAc,EAEpD,GAAqB,GAAI,GAAe,gBAAgB,EAExD,GAAmB,GAAI,GAAe,cAAc,EAEpD,GAAoB,GAAI,GAAe,eAAe,EAKtD,GAAqB,GAAI,GAA8B,gBAAgB,EAMvE,GAAyB,GAAI,GAAkC,qBAAqB,EAOpF,GAAuB,GAAI,GAAgC,mBAAmB,EAO9E,GAA4B,GAAI,IAAqC,kBAAkB,ECrE7F,GAAU,GAAV,CAAU,GAAV,CAyBC,WACN,EACA,EACA,EACA,EACa,CACb,GAAI,GAAW,GAEf,GAAI,MAAO,IAAqB,SAAU,CACzC,KAAM,GAAmB,SAAmB,EAA2C,CACtF,KAAM,GAAS,GAAG,OAClB,CAAK,GAAQ,QAAQ,CAAgB,GAErC,EAAS,EAAG,CAAsB,CACnC,EACA,gBAAS,iBAAiB,EAAM,EAAmC,GAAW,EAAI,EAE3E,CACN,QAAS,IAAM,CACd,GACA,GAAW,GAEX,SAAS,oBAAoB,EAAM,EAAmC,GAAW,EAAI,EACtF,CACD,CACD,CAEA,KAAM,GAAc,SAAmB,EAA2C,CACjF,EAAS,EAAG,IAAoB,CACjC,EACA,SAAiB,iBAAiB,EAAM,EAA8B,GAAW,EAAK,EAC/E,CACN,QAAS,IAAM,CACd,GACA,GAAW,GAEX,EAAiB,oBAAoB,EAAM,EAA8B,GAAW,EAAK,EAC1F,CACD,CACD,CAvCO,EAAS,KAyCT,WACN,EACA,EACA,EACO,CACP,KAAM,GAAY,SAAS,eAAe,CAAE,EAI5C,GAHA,EAAM,gBAAgB,GAAW,QAAQ,UAAU,EAAI,CAAC,EACxD,EAAM,UAAY,EAAU,UAExB,GAAS,SAAW,KAAM,CAC7B,KAAM,GAAO,EAAM,iBAA8B,gBAAgB,EACjE,SAAW,KAAO,GAAM,CACvB,KAAM,GAAM,EAAI,QAAQ,QACxB,CAAK,GAEL,CAAI,EAAQ,QAAQ,GACnB,EAAI,MAAM,QAAU,UAEpB,EAAI,MAAM,QAAU,OAEtB,CACD,CAEA,GAAI,GAAS,UAAY,KAAM,CAC9B,KAAM,GAAO,EAAM,iBAA8B,aAAa,EAC9D,SAAW,KAAO,GAAM,CACvB,KAAM,GAAM,EAAI,QAAQ,KACxB,GAAI,CAAC,EAAK,SAEV,KAAM,GAAQ,EAAQ,SAAS,GAC/B,GAAa,MAEb,GAAI,YAAc,OAAO,CAAK,EAC/B,CACD,CACD,CAnCO,EAAS,iBAqCT,WAAmB,EAAoB,CAC7C,EAAM,gBAAgB,EACtB,EAAM,UAAY,EACnB,CAHO,EAAS,cAvGA,WCNjB,KAAM,IACL,qHAED,YAAqB,EAAe,EAAgB,CACnD,KAAM,GAAK,EAAQ,EACb,EAAI,EAAS,EAAK,EAAK,EAAI,EAAI,EAAM,EAAK,IAAM,IAAM,EAE5D,MAAO,MAAK,MAAM,CAAC,CACpB,CAEO,YAAgB,EAAe,EAAoB,CACzD,MAAO,IAAQ,EAAO,CAAC,CAAU,CAClC,CAEO,YAAiB,EAAe,EAAoB,CAC1D,KAAM,GAAO,GAAO,CAAK,EACzB,GAAI,GAAQ,KAAM,MAAO,GAEzB,KAAM,CAAC,EAAG,EAAG,EAAG,GAAK,EACf,EAAU,IAAM,EAAc,IACpC,MAAO,QAAQ,GAAY,EAAG,CAAM,MAAM,GAAY,EAAG,CAAM,MAAM,GAAY,EAAG,CAAM,MAAM,IACjG,CAEO,YAAiB,EAAe,EAAoB,CAC1D,KAAM,GAAO,GAAO,CAAK,EACzB,GAAI,GAAQ,KAAM,MAAO,GAEzB,KAAM,CAAC,EAAG,EAAG,EAAG,GAAK,EACrB,MAAO,QAAQ,MAAM,MAAM,MAAM,EAAK,GAAa,OACpD,CAEO,YAAgB,EAAe,CACrC,EAAQ,EAAM,KAAK,EAEnB,KAAM,GAAS,GAAc,KAAK,CAAK,EACvC,GAAI,GAAU,KAAM,MAAO,MAE3B,GAAI,EAAO,KAAO,IAAK,CACtB,KAAM,GAAM,EAAO,GACnB,OAAQ,EAAI,YACN,GACJ,MAAO,CAAC,SAAS,EAAI,GAAK,EAAI,GAAI,EAAE,EAAG,SAAS,EAAI,GAAK,EAAI,GAAI,EAAE,EAAG,SAAS,EAAI,GAAK,EAAI,GAAI,EAAE,EAAG,CAAC,MAClG,GACJ,MAAO,CACN,SAAS,EAAI,UAAU,EAAG,CAAC,EAAG,EAAE,EAChC,SAAS,EAAI,UAAU,EAAG,CAAC,EAAG,EAAE,EAChC,SAAS,EAAI,UAAU,EAAG,CAAC,EAAG,EAAE,EAChC,CACD,EAGF,MAAO,KACR,CAEA,OAAQ,EAAO,QACT,MACJ,MAAO,CAAC,SAAS,EAAO,GAAI,EAAE,EAAG,SAAS,EAAO,GAAI,EAAE,EAAG,SAAS,EAAO,GAAI,EAAE,EAAG,CAAC,MAChF,OACJ,MAAO,CAAC,SAAS,EAAO,GAAI,EAAE,EAAG,SAAS,EAAO,GAAI,EAAE,EAAG,SAAS,EAAO,GAAI,EAAE,EAAG,WAAW,EAAO,EAAE,CAAC,UAExG,MAAO,MAEV,CC3DO,aAAyC,CAC/C,KAAM,GAAsB,IAAM,CACjC,KAAM,GAAO,SAAS,KAChB,EAAgB,OAAO,iBAAiB,CAAI,EAE5C,EAAY,EAAK,MAEvB,EAAU,YAAY,gBAAiB,EAAc,iBAAiB,sBAAsB,EAAE,KAAK,CAAC,EACpG,EAAU,YAAY,cAAe,EAAc,iBAAiB,oBAAoB,EAAE,KAAK,CAAC,EAChG,EAAU,YAAY,gBAAiB,EAAc,iBAAiB,sBAAsB,EAAE,KAAK,CAAC,EAEpG,EAAU,YACT,uBACA,EAAc,iBAAiB,6BAA6B,EAAE,KAAK,CACpE,EACA,EAAU,YAAY,qBAAsB,EAAc,iBAAiB,2BAA2B,EAAE,KAAK,CAAC,EAC9G,EAAU,YACT,uBACA,EAAc,iBAAiB,6BAA6B,EAAE,KAAK,CACpE,EAEA,GAAI,GAAQ,EAAc,iBAAiB,4BAA4B,EAAE,KAAK,EAC9E,EAAU,YAAY,qBAAsB,CAAK,EACjD,EAAU,YAAY,iCAAkC,GAAQ,EAAO,CAAC,CAAC,EACzE,EAAU,YAAY,gCAAiC,GAAO,EAAO,CAAC,CAAC,EACvE,EAAU,YAAY,kCAAmC,GAAQ,EAAO,GAAG,CAAC,EAC5E,EAAU,YAAY,iCAAkC,GAAO,EAAO,GAAG,CAAC,EAC1E,EAAU,YAAY,iCAAkC,GAAQ,EAAO,EAAE,CAAC,EAC1E,EAAU,YAAY,gCAAiC,GAAO,EAAO,EAAE,CAAC,EACxE,EAAU,YAAY,iCAAkC,GAAQ,EAAO,EAAE,CAAC,EAC1E,EAAU,YAAY,gCAAiC,GAAO,EAAO,EAAE,CAAC,EACxE,EAAU,YAAY,iCAAkC,GAAQ,EAAO,EAAE,CAAC,EAC1E,EAAU,YAAY,gCAAiC,GAAO,EAAO,EAAE,CAAC,EAExE,EAAQ,EAAc,iBAAiB,4BAA4B,EAAE,KAAK,EAC1E,EAAU,YAAY,4BAA6B,CAAK,EACxD,EAAU,YAAY,uCAAwC,GAAO,EAAO,EAAE,CAAC,EAE/E,EAAQ,EAAc,iBAAiB,qCAAqC,EAAE,KAAK,EACnF,EAAU,YAAY,sCAAuC,CAAK,EAClE,EAAU,YAAY,iDAAkD,GAAO,EAAO,EAAE,CAAC,EAEzF,EAAQ,EAAc,iBAAiB,4BAA4B,EAAE,KAAK,EAC1E,EAAU,YAAY,oBAAqB,CAAK,EAChD,EAAU,YAAY,wBAAyB,GAAQ,EAAO,EAAE,CAAC,EACjE,EAAU,YAAY,wBAAyB,GAAQ,EAAO,EAAE,CAAC,EACjE,EAAU,YAAY,wBAAyB,GAAQ,EAAO,EAAE,CAAC,EAEjE,EAAQ,EAAc,iBAAiB,4BAA4B,EAAE,KAAK,EAC1E,EAAU,YAAY,4BAA6B,CAAK,EAExD,GAAI,GAAkB,EAAc,iBAAiB,4BAA4B,EAAE,KAAK,EACxF,GACC,GAAkB,EAAc,iBAAiB,qBAAqB,EAAE,KAAK,GAE9E,EAAU,YAAY,qBAAsB,CAAe,EAC3D,EAAU,YAAY,yBAA0B,GAAQ,EAAiB,EAAE,CAAC,EAC5E,EAAU,YAAY,yBAA0B,GAAQ,EAAiB,EAAE,CAAC,EAC5E,EAAU,YAAY,yBAA0B,GAAQ,EAAiB,EAAE,CAAC,EAC5E,EAAU,YAAY,yBAA0B,GAAQ,EAAiB,EAAE,CAAC,EAE5E,EAAQ,EAAc,iBAAiB,sBAAsB,EAAE,KAAK,EACpE,EAAU,YAAY,uBAAwB,CAAK,EAEnD,EAAQ,EAAc,iBAAiB,8BAA8B,EAAE,KAAK,EAC5E,EAAU,YAAY,0BAA2B,CAAK,EACtD,EAAU,YAAY,qCAAsC,GAAO,EAAO,EAAE,CAAC,EAC7E,EAAU,YAAY,sCAAuC,GAAQ,EAAO,EAAE,CAAC,EAE/E,EAAQ,EAAc,iBAAiB,6BAA6B,EAAE,KAAK,EAC3E,EAAU,YAAY,0BAA2B,GAAS,CAAe,EAEzE,EAAU,YACT,iCACA,EAAc,iBAAiB,0CAA0C,EAAE,KAAK,GAC/E,GACA,CACF,EAEA,EAAQ,EAAc,iBAAiB,uCAAuC,EAAE,KAAK,EACrF,EAAU,YAAY,2BAA4B,CAAK,EACvD,EAAQ,EAAc,iBAAiB,mCAAmC,EAAE,KAAK,EACjF,EAAU,YAAY,uBAAwB,CAAK,EACnD,EAAQ,EAAc,iBAAiB,uCAAuC,EAAE,KAAK,EACrF,EAAU,YAAY,2BAA4B,CAAK,EACvD,EAAQ,EAAc,iBAAiB,gDAAgD,EAAE,KAAK,EAC9F,EAAU,YAAY,oCAAqC,CAAK,CACjE,EAEM,EAAW,GAAI,kBAAiB,CAAmB,EACzD,SAAS,QAAQ,SAAS,KAAM,CAAE,WAAY,GAAM,gBAAiB,CAAC,OAAO,CAAE,CAAC,EAEhF,EAAoB,EACb,CACR,C,qKC5EA,KAAM,IAAoB,GAAK,GAE/B,GAAI,IAAc,EAClB,aAAqB,CACpB,MAAI,MAAgB,GACnB,GAAc,EAEd,KAGM,WAAW,IACnB,CAEO,MAAe,EAAkB,CAIvC,YAA+B,EAAiB,CAAjB,eAH/B,QAAiB,QACjB,QAAU,SAuCV,QAAQ,mBApCP,KAAK,MAAS,OAAe,UAC5B,OAAe,UAAY,OAE5B,KAAK,IAAI,GAAG,KAAK,WAAW,EAG5B,KAAK,KAAO,iBAAiB,EAC7B,GAA8B,EAE9B,sBAAsB,IAAM,CAC3B,KAAK,IAAI,GAAG,KAAK,sBAAsB,EAEvC,GAAI,CACH,KAAK,eAAe,EACpB,KAAK,KAAK,EAEN,KAAK,mBAAqB,MAC7B,OAAO,iBAAiB,UAAW,KAAK,kBAAkB,KAAK,IAAI,CAAC,EAGrE,KAAK,YAAY,GAAyB,MAAS,EAEnD,KAAK,gBAAgB,CACtB,QAAE,CACD,WAAW,IAAM,CAChB,SAAS,KAAK,UAAU,OAAO,SAAS,CACzC,EAAG,GAAG,CACP,CACD,CAAC,CACF,CAQA,MAAiB,CAChB,KAAK,iBAAiB,QAAQ,GAAK,EAAE,QAAQ,CAAC,EAC9C,KAAK,gBAAkB,KAAK,SAAS,CACtC,CAEA,IAAc,EAAiB,CAE/B,CAEA,UAA4B,CAC3B,MAAO,MAAK,KAAK,SAAS,CAC3B,CAEA,YACC,EACA,EACO,CACP,KAAM,GAAK,GAAU,EACrB,YAAK,IAAI,GAAG,KAAK,uBAAuB,YAAa,EAAQ,QAAQ,EAE9D,KAAK,YAAY,CAAE,KAAQ,OAAQ,EAAQ,OAAQ,QAAe,CAAC,CAC3E,CAEA,0BAIC,EACA,EACA,EACA,EACO,CACP,KAAM,GAAK,GAAU,EACrB,KAAK,IAAI,GAAG,KAAK,qCAAqC,YAAa,EAAQ,QAAQ,EAEnF,KAAM,GAAa,EAAI,GAAG,OAAQ,UAAW,GAAK,CACjD,GAAM,EAAY,EAAE,KAAoB,GAAU,CACjD,EAAW,eAAiB,GAC3B,GAAW,QAAQ,EACnB,EAAS,CAAM,EAEjB,CAAC,CACF,CAAC,EAED,MAAO,MAAK,YAAY,CAAE,KAAQ,OAAQ,EAAQ,OAAQ,QAAe,CAAC,CAC3E,CAEA,SAAmB,EAAc,CAEhC,KADK,MAAQ,EACT,GAAS,MAEb,KAAK,KAAK,SAAS,CAAK,CACzB,CAEA,YAAoB,EAAe,CAClC,KAAK,KAAK,YAAY,CAAC,CACxB,CACD,C,qKCjHA,KAAM,IAAgB,CAAC,OAAQ,SAAU,OAAQ,SAAU,QAAS,MAAM,EACpE,GAAmB,GAAI,KAA+B,CAC3D,CAAC,IAAK,MAAM,EACZ,CAAC,IAAK,MAAM,EACZ,CAAC,IAAK,QAAQ,EACd,CAAC,IAAK,QAAQ,EACd,CAAC,IAAK,MAAM,EACZ,CAAC,IAAK,MAAM,EACZ,CAAC,IAAK,QAAQ,EACd,CAAC,IAAK,QAAQ,EACd,CAAC,IAAK,OAAO,EACb,CAAC,IAAK,OAAO,EACb,CAAC,IAAK,MAAM,EACZ,CAAC,IAAK,MAAM,CACb,CAAC,EAED,MAAM,UAAqB,GAAW,CAGrC,aAAc,CACb,MAAM,cAAc,EAHrB,QAAiB,mBAAmB,GAAI,QAAO,mBAAmB,WAAY,CAAC,CAAC,CAIhF,CAEA,cAAkC,CACjC,KAAK,MAAQ,KAAK,SAAS,GAAK,KAAK,MACjC,KAAK,OAAS,MACjB,KAAK,QAAQ,KAAK,KAAK,CAEzB,CAEA,QAA4B,CAC3B,KAAM,GAAc,MAAM,SAAS,GAAK,CAAC,EAEnC,EAAa,SAAS,eAAe,SAAS,EAmDpD,GAlDA,UAAgB,EAAY,CAC3B,UAAW,IACX,OAAQ,gBACR,OAAQ,eACR,UAAW,cACX,WAAY,kBACZ,SAAU,IAAM,CACf,GAAI,GAAY,GACZ,EAAe,GAEnB,KAAM,GAAW,CAAC,GAAG,SAAS,iBAAgC,cAAc,CAAC,EAC7E,KAAS,MAAM,WACd,EAAS,QAAQ,EAElB,SAAW,KAAU,GACpB,EAAe,GACf,EAAW,UAAU,SAAS,eAAe,GAAK,EAAO,UAAU,SAAS,cAAc,EACzF,EAAY,GACF,GACL,GAAO,UAAU,SAAS,aAAa,GAC3C,GAAe,GACf,EAAY,KAId,EAAO,UAAU,OAChB,mBACA,GAAgB,CAAC,EAAO,UAAU,SAAS,aAAa,CACzD,CAEF,EACA,MAAO,GAAK,CACX,GAAI,EAAE,UAAY,MAAQ,EAAE,WAAa,EAAE,SAC1C,OAGD,KAAM,GAAM,EAAE,KAAK,QAAQ,IAC3B,GAAI,GAAO,KAAM,CAChB,GAAI,GAAc,EAAE,SACpB,KAAS,MAAM,WAAa,EAAE,UAC7B,GAAc,KAAK,cAAc,CAAG,EAAK,GAAc,EAAE,UAAY,IAEtE,KAAK,UAAU,EAAK,EAAa,EAAK,EAEtC,SAAS,iBAAgC,gBAAgB,KAAO,EAAE,IAAI,MAAM,CAC7E,CACD,EACA,OAAQ,GAAK,CAAC,EAAE,QAAQ,UAAU,SAAS,aAAa,CACzD,CAAC,EAEG,OAAO,UAAU,SAAS,WAAW,KAAK,EAAG,CAChD,GAAI,GAAY,SAAS,cAA+B,iCAAiC,EACzF,EAAU,YAAc,YAExB,EAAY,SAAS,cAA+B,iCAAiC,EACrF,EAAU,YAAc,OACzB,CAEA,SAAY,KACX,EAAI,GAAG,OAAQ,UAAW,GAAK,CAC9B,GAAM,SAAW,EAAE,UAClB,CAAI,EAAE,MAAQ,SAAW,EAAE,MAAQ,IAClC,GAAE,eAAe,EACjB,EAAE,gBAAgB,EAElB,KAAK,eAAe,GACV,EAAE,MAAQ,KACpB,GAAE,eAAe,EACjB,EAAE,gBAAgB,EAElB,KAAK,eAAe,GAGvB,CAAC,EACD,EAAI,GAAG,wBAAyB,QAAS,IAAM,KAAK,eAAe,CAAC,EACpE,EAAI,GAAG,wBAAyB,QAAS,IAAM,KAAK,eAAe,CAAC,EACpE,EAAI,GAAG,0BAA2B,QAAS,IAAM,KAAK,iBAAiB,CAAC,EACxE,EAAI,GAAG,yBAA0B,QAAS,IAAM,KAAK,gBAAgB,CAAC,EACtE,EAAI,GAAG,eAAgB,UAAW,CAAC,EAAG,IAAwB,CAC7D,GAAI,EAAO,QAAQ,kBAAkB,EAAG,CACvC,EAAM,MAAQ,UACb,EAAO,MAAM,EAGd,MACD,CAEA,GAAI,EAAE,MAAQ,SAAW,EAAE,MAAQ,IAAK,CACvC,GAAI,EAAE,MAAQ,SAAW,EAAO,QAAQ,aAAa,EACpD,OAGD,KAAM,GAAU,EAAO,iBAAoC,kBAAkB,EAAE,GAC/E,GACS,MAAM,CAEhB,SAAW,EAAE,MAAQ,WAAa,EAAE,MAAQ,aAC3C,GAAI,CAAC,EAAE,SAAW,CAAC,EAAE,SAAW,CAAC,EAAE,SAAU,CAC5C,KAAM,GACJ,EAAE,MAAQ,aAAe,CAAC,KAAK,MAAM,WACrC,EAAE,MAAQ,WAAa,KAAK,MAAM,UAChC,EACA,GACJ,GAAI,EAAE,OAAQ,CACb,KAAM,GAAM,EAAO,QAAQ,IAC3B,GACC,GAAE,gBAAgB,EAElB,KAAK,UAAU,EAAK,EAAS,EAAI,EAEnC,KAAO,CACN,GAAI,KAAK,OAAS,KAAM,OAExB,GAAI,GAAM,EAAO,QAAQ,IACzB,GAAI,GAAO,KAAM,OAEjB,EAAE,eAAe,EAEjB,GAAI,GAAQ,KAAK,cAAc,CAAG,EAAI,EACtC,EAAY,EACX,EAAQ,KAAK,MAAM,QAAQ,OAAS,EAC1B,IAAU,KAAK,MAAM,QAAQ,QACvC,GAAQ,GAGT,EAAM,KAAK,MAAM,QAAQ,GAAO,IAChC,SAAS,iBAAgC,gBAAgB,KAAO,EAAE,IAAI,MAAM,CAC7E,CACD,UACU,EAAE,MAAQ,KAAO,EAAE,MAAQ,KACrC,GAAI,CAAC,EAAE,SAAW,CAAC,EAAE,SAAW,CAAC,EAAE,UAAY,CAAC,EAAE,OAAQ,CACzD,GAAI,KAAK,OAAS,KAAM,OAExB,GAAI,GAAM,EAAO,QAAQ,IACzB,GAAI,GAAO,KAAM,OAEjB,EAAE,eAAe,EAEjB,GAAI,GAAQ,KAAK,cAAc,CAAG,EAAK,GAAE,MAAQ,IAAM,EAAI,IAC3D,EAAY,EACX,EAAQ,KAAK,MAAM,QAAQ,OAAS,EAC1B,IAAU,KAAK,MAAM,QAAQ,QACvC,GAAQ,GAGT,EAAM,KAAK,MAAM,QAAQ,GAAO,IAChC,SAAS,iBAAgC,gBAAgB,KAAO,EAAE,IAAI,MAAM,CAC7E,UACU,EAAE,MAAQ,KAAO,EAAE,MAAQ,KACrC,GAAI,CAAC,EAAE,SAAW,CAAC,EAAE,SAAW,CAAC,EAAE,QAAU,EAAE,SAAU,CACxD,KAAM,GAAM,EAAO,QAAQ,IAC3B,GACC,GAAE,gBAAgB,EAElB,KAAK,UAAU,EAAK,EAAE,MAAQ,IAAM,EAAI,GAAI,EAAI,EAElD,UACU,CAAC,EAAE,SAAW,CAAC,EAAE,QAAU,CAAC,EAAE,QAAS,CACjD,KAAM,GAAS,GAAiB,IAAI,EAAE,GAAG,EACzC,GAAI,IAAW,OAAW,CACzB,EAAE,gBAAgB,EAElB,KAAM,GAAU,EAAO,iBAAoC,kBAAkB,EAAE,GAC/E,GAAe,MAAQ,CAAC,EAAQ,UAC/B,GAAQ,MAAQ,EAChB,KAAK,gBAAgB,CAAO,EAE9B,CACD,CACD,CAAC,EACD,EAAI,GAAG,mBAAoB,QAAS,CAAC,EAAG,IAA8B,KAAK,gBAAgB,CAAM,CAAC,EAClG,EAAI,GAAG,+BAAgC,QAAS,CAAC,EAAG,IACnD,KAAK,eAAe,CAAM,CAC3B,CACD,EAEO,CACR,CAEA,SAAiB,EAAa,CAC7B,MAAO,MAAK,OAAO,QAAQ,KAAK,GAAK,EAAE,MAAQ,CAAG,CACnD,CAEA,cAAsB,EAAa,CAClC,MAAO,MAAK,OAAO,QAAQ,UAAU,GAAK,EAAE,MAAQ,CAAG,GAAK,EAC7D,CAEA,UAAkB,EAAa,EAAe,EAAmB,CAChE,KAAM,GAAQ,KAAK,SAAS,CAAG,EAC/B,GAAa,MACZ,KAAK,YAAY,GAAsB,CACtC,IAAK,EAAM,IACX,GAAI,EACJ,UACD,CAAC,CAEH,CAEA,eAAuB,EAAa,EAA2B,CAC9D,KAAM,GAAQ,KAAK,SAAS,CAAG,EAC/B,GAAI,GAAS,KAAM,CAClB,GAAI,EAAM,SAAW,EAAQ,OAE7B,KAAK,YAAY,GAAwB,CACxC,IAAK,EAAM,IACX,QACD,CAAC,CACF,CACD,CAEA,gBAAyB,CACxB,KAAK,YAAY,GAAkB,MAAS,CAC7C,CAEA,kBAA2B,CAC1B,KAAK,YAAY,GAAoB,MAAS,CAC/C,CAEA,gBAAwB,EAAwB,CAC/C,KAAM,GAAM,EAAI,QAAQ,IACxB,GACC,KAAK,eAAe,EAAK,EAAI,QAAQ,EAAI,eAAe,KAA0B,CAEpF,CAEA,gBAAyB,CACxB,KAAK,YAAY,GAAkB,MAAS,CAC7C,CAEA,iBAA0B,CACzB,KAAK,YAAY,GAAmB,MAAS,CAC9C,CAEA,eAAuB,EAAuB,CAC7C,KAAM,GAAY,EAAI,QAEtB,KAAK,YAAY,GAAoB,CACpC,UAAW,CACZ,CAAC,CACF,CAEA,kBAAqC,EAAiB,CACrD,KAAM,GAAM,EAAE,KAEd,OAAQ,EAAI,YACN,IAA0B,OAC9B,KAAK,IAAI,GAAG,KAAK,6BAA6B,EAAI,aAAa,EAAI,QAAQ,EAE3E,GAAM,GAA2B,EAAK,GAAU,CAC/C,KAAK,SAAS,CAAE,GAAG,KAAK,MAAO,GAAG,EAAO,KAAM,CAAC,EAChD,KAAK,QAAQ,KAAK,KAAK,CACxB,CAAC,EACD,cAGA,MAAM,oBAAoB,CAAC,EAE9B,CAEA,QAAgB,EAAc,CAC7B,KAAM,GAAW,SAAS,eAAe,QAAuB,cAAc,GAAG,QAAQ,IACzF,GAAI,GAAc,GAClB,SAAa,eAAe,QAAQ,kBAAkB,GACrD,GAAc,IAGf,KAAM,GAAW,SAAS,eAAe,SAAS,EAClD,EAAS,UAAY,GAErB,GAAI,GAA0B,SAAS,cAAc,MAAM,EAC3D,EAAI,YAAc,EAAM,OACxB,EAAI,UAAU,IAAI,eAAgB,MAAM,EACxC,EAAS,YAAY,CAAG,EAExB,EAAM,SAAS,eACd,YAAY,EAAM,QAAQ,gBAAgB,EAAM,QAAQ,SAAW,EAAI,IAAM,KAC5E,EAAM,KAAO,QAAU,IAEzB,EACA,EAAS,YAAY,CAAG,EAEpB,EAAM,MACT,GAAM,SAAS,cAAc,MAAM,EACnC,EAAI,YAAc,EAAM,KACxB,EAAI,UAAU,IAAI,cAAc,EAChC,EAAS,YAAY,CAAG,GAGzB,KAAM,GAAa,SAAS,eAAe,SAAS,EAGpD,GAFA,EAAW,UAAY,GAEnB,EAAM,QAAQ,SAAW,EAAG,CAC/B,EAAW,UAAU,IAAI,gBAAgB,EAEzC,KAAM,GAAU,SAAS,cAAiC,uBAAuB,EACjF,GAAe,MACd,GAAQ,SAAW,IAGpB,KAAM,GAAS,SAAS,cAAc,IAAI,EAEpC,EAAM,SAAS,cAAc,IAAI,EACvC,EAAI,YAAc,uBAElB,EAAO,YAAY,CAAG,EACtB,EAAW,YAAY,CAAM,EAE7B,MACD,CAEA,GAAI,GAAY,GACZ,EAAe,GACf,EAAW,EAEf,KAAM,GAAW,SAAS,uBAAuB,EAC3C,EAAgB,IAAM,CAC3B,KAAM,GAAc,GAAwB,CAC3C,EAAe,GACf,EAAU,SAAW,UAAY,EAAM,SAAW,QACjD,EAAY,GACF,GACN,EAAM,SAAW,QACpB,GAAe,GACf,EAAY,IAId,GAAI,GACJ,OAAC,EAAK,CAAQ,EAAI,KAAK,YAAY,EAAO,EAAO,EAAE,EAAU,CAAY,EAElE,CACR,EAEM,EAAY,EAAM,QAAQ,IAAI,CAAW,EAC/C,EAAU,UACT,EAAU,QAAQ,EAAE,QAAQ,GAAO,EAAS,YAAY,CAAG,CAAC,EAE5D,EAAU,QAAQ,GAAO,EAAS,YAAY,CAAG,CAAC,CAEpD,EAOA,GALK,EAAM,WACV,GAAW,UAAU,OAAO,oBAAoB,EAChD,EAAc,GAGX,EAAM,KAAM,CACf,KAAM,GAAS,EAAM,QAAQ,KAAK,GAAK,EAAE,IAAI,WAAW,EAAM,IAAI,CAAC,EACnE,GAAI,GAAU,KAAM,CACnB,KAAM,CAAC,GAAO,KAAK,YAClB,CACC,OAAQ,OACR,MAAO,EACP,QAAS,EAAO,QAAQ,MAAM;AAAA,CAAI,EAAE,GACpC,IAAK,EAAM,IACZ,EACA,EACA,EAAE,EACF,EACD,EACA,EAAS,YAAY,CAAG,EACxB,EAAW,UAAU,IAAI,eAAe,CACzC,CACD,CAEA,EAAU,WACT,GAAW,UAAU,IAAI,oBAAoB,EAC7C,EAAc,GAGf,KAAM,GAAY,SAAS,eAAe,UAAU,EACpD,GAAiB,MACf,GAA+B,QAAU,EAAM,WAGjD,EAAW,YAAY,CAAQ,EAE/B,SACE,iBACA,GAAG,EAAc,SAAW,kBAAkB,GAAY,EAAM,QAAQ,GAAG,OAC5E,EAAE,IACA,MAAM,EAET,KAAK,KAAK,CACX,CAEA,YACC,EACA,EACA,EACA,EAC0B,CAC1B,KAAM,GAAS,SAAS,cAAc,IAAI,EAK1C,GAJA,EAAO,UAAU,IAAI,QAAS,UAAU,EAAM,QAAU,QAAQ,EAChE,EAAO,UAAU,OAAO,mBAAoB,CAAY,EACxD,EAAO,QAAQ,IAAM,EAAM,IAEvB,EAAM,QAAU,KAAM,CACzB,EAAO,SAAW,EAElB,KAAM,GAAc,SAAS,cAAc,MAAM,EACjD,EAAY,UAAU,IAAI,cAAc,EACxC,EAAO,YAAY,CAAW,EAE9B,KAAM,GAAmB,SAAS,cAAc,KAAK,EACrD,EAAiB,UAAU,IAAI,eAAgB,kBAAkB,EACjE,EAAO,YAAY,CAAgB,EAEnC,KAAM,GAAU,SAAS,cAAc,QAAQ,EAC/C,EAAQ,QAAQ,IAAM,EAAM,IAC5B,EAAQ,KAAO,SAEf,KAAM,GAAW,SAAS,uBAAuB,EACjD,SAAW,KAAU,IAAe,CACnC,KAAM,GAAU,SAAS,cAAc,QAAQ,EAC/C,EAAQ,MAAQ,EAChB,EAAQ,KAAO,EAEX,EAAM,SAAW,GACpB,GAAQ,SAAW,IAGpB,EAAS,YAAY,CAAO,CAC7B,CACA,EAAQ,YAAY,CAAQ,EAC5B,EAAiB,YAAY,CAAO,CACrC,CAEA,KAAM,GAAW,SAAS,cAAc,MAAM,EAC9C,EAAS,UAAU,IAAI,eAAe,EACtC,EAAS,YAAc,EAAM,SAAW,GACxC,EAAO,YAAY,CAAQ,EAE3B,KAAM,GAAS,EAAM,QAAQ,KAAK,GAAK,EAAE,IAAI,WAAW,EAAM,GAAG,CAAC,EAClE,GAAI,GAAU,KAAM,CAGnB,GAFA,EAAS,MAAQ,EAAO,SAAW,GAE/B,EAAO,OAAQ,CAClB,KAAM,GAAS,EAAM,QAAQ,KAAK,GAAK,EAAE,SAAW,EAAO,MAAM,EACjE,GAAI,GAAQ,UAAU,OAAQ,CAC7B,KAAM,GAAU,SAAS,cAAc,KAAK,EAC5C,EAAQ,UAAU,IAAI,cAAc,EACpC,EAAQ,IAAM,EAAO,UACrB,EAAO,YAAY,CAAO,CAC3B,CAEA,KAAM,GAAU,SAAS,cAAc,MAAM,EAC7C,EAAQ,UAAU,IAAI,cAAc,EACpC,EAAQ,YAAc,EAAO,OAC7B,EAAO,YAAY,CAAO,CAC3B,CAEA,GAAI,EAAO,YAAa,CACvB,KAAM,GAAQ,SAAS,cAAc,MAAM,EAC3C,EAAM,MAAQ,EAAO,MAAQ,GAC7B,EAAM,UAAU,IAAI,YAAY,EAChC,EAAM,YAAc,EAAO,YAC3B,EAAO,YAAY,CAAK,CACzB,CACD,CAEA,KAAM,GAAO,SAAS,cAAc,GAAG,EACvC,SAAK,UAAU,IAAI,YAAa,cAAc,EAE9C,EAAK,KAAO,GAAQ,IAAM,EAAM,SAAS,OAAO,QAAQ,KAAK,iBAAkB,EAAO,GAAG,EAAI,IAC7F,EAAK,YAAc,EAAM,IAAI,OAAO,EAAG,CAAC,EACxC,EAAO,YAAY,CAAI,EAEhB,CAAC,EAAQ,CAAQ,CACzB,CACD,CAEA,GAAI,G","sources":["webpack:///../../../node_modules/sortablejs/modular/sortable.esm.js","webpack:///../protocol.ts","webpack:///../rebase/protocol.ts","webpack:///./shared/dom.ts","webpack:///./shared/colors.ts","webpack:///./shared/theme.ts","webpack:///./shared/appBase.ts","webpack:///./rebase/rebase.ts"],"sourcesContent":["/**!\n * Sortable 1.15.0\n * @author\tRubaXa   <trash@rubaxa.org>\n * @author\towenm    <owen23355@gmail.com>\n * @license MIT\n */\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nvar version = \"1.15.0\";\n\nfunction userAgent(pattern) {\n  if (typeof window !== 'undefined' && window.navigator) {\n    return !! /*@__PURE__*/navigator.userAgent.match(pattern);\n  }\n}\n\nvar IE11OrLess = userAgent(/(?:Trident.*rv[ :]?11\\.|msie|iemobile|Windows Phone)/i);\nvar Edge = userAgent(/Edge/i);\nvar FireFox = userAgent(/firefox/i);\nvar Safari = userAgent(/safari/i) && !userAgent(/chrome/i) && !userAgent(/android/i);\nvar IOS = userAgent(/iP(ad|od|hone)/i);\nvar ChromeForAndroid = userAgent(/chrome/i) && userAgent(/android/i);\n\nvar captureMode = {\n  capture: false,\n  passive: false\n};\n\nfunction on(el, event, fn) {\n  el.addEventListener(event, fn, !IE11OrLess && captureMode);\n}\n\nfunction off(el, event, fn) {\n  el.removeEventListener(event, fn, !IE11OrLess && captureMode);\n}\n\nfunction matches(\n/**HTMLElement*/\nel,\n/**String*/\nselector) {\n  if (!selector) return;\n  selector[0] === '>' && (selector = selector.substring(1));\n\n  if (el) {\n    try {\n      if (el.matches) {\n        return el.matches(selector);\n      } else if (el.msMatchesSelector) {\n        return el.msMatchesSelector(selector);\n      } else if (el.webkitMatchesSelector) {\n        return el.webkitMatchesSelector(selector);\n      }\n    } catch (_) {\n      return false;\n    }\n  }\n\n  return false;\n}\n\nfunction getParentOrHost(el) {\n  return el.host && el !== document && el.host.nodeType ? el.host : el.parentNode;\n}\n\nfunction closest(\n/**HTMLElement*/\nel,\n/**String*/\nselector,\n/**HTMLElement*/\nctx, includeCTX) {\n  if (el) {\n    ctx = ctx || document;\n\n    do {\n      if (selector != null && (selector[0] === '>' ? el.parentNode === ctx && matches(el, selector) : matches(el, selector)) || includeCTX && el === ctx) {\n        return el;\n      }\n\n      if (el === ctx) break;\n      /* jshint boss:true */\n    } while (el = getParentOrHost(el));\n  }\n\n  return null;\n}\n\nvar R_SPACE = /\\s+/g;\n\nfunction toggleClass(el, name, state) {\n  if (el && name) {\n    if (el.classList) {\n      el.classList[state ? 'add' : 'remove'](name);\n    } else {\n      var className = (' ' + el.className + ' ').replace(R_SPACE, ' ').replace(' ' + name + ' ', ' ');\n      el.className = (className + (state ? ' ' + name : '')).replace(R_SPACE, ' ');\n    }\n  }\n}\n\nfunction css(el, prop, val) {\n  var style = el && el.style;\n\n  if (style) {\n    if (val === void 0) {\n      if (document.defaultView && document.defaultView.getComputedStyle) {\n        val = document.defaultView.getComputedStyle(el, '');\n      } else if (el.currentStyle) {\n        val = el.currentStyle;\n      }\n\n      return prop === void 0 ? val : val[prop];\n    } else {\n      if (!(prop in style) && prop.indexOf('webkit') === -1) {\n        prop = '-webkit-' + prop;\n      }\n\n      style[prop] = val + (typeof val === 'string' ? '' : 'px');\n    }\n  }\n}\n\nfunction matrix(el, selfOnly) {\n  var appliedTransforms = '';\n\n  if (typeof el === 'string') {\n    appliedTransforms = el;\n  } else {\n    do {\n      var transform = css(el, 'transform');\n\n      if (transform && transform !== 'none') {\n        appliedTransforms = transform + ' ' + appliedTransforms;\n      }\n      /* jshint boss:true */\n\n    } while (!selfOnly && (el = el.parentNode));\n  }\n\n  var matrixFn = window.DOMMatrix || window.WebKitCSSMatrix || window.CSSMatrix || window.MSCSSMatrix;\n  /*jshint -W056 */\n\n  return matrixFn && new matrixFn(appliedTransforms);\n}\n\nfunction find(ctx, tagName, iterator) {\n  if (ctx) {\n    var list = ctx.getElementsByTagName(tagName),\n        i = 0,\n        n = list.length;\n\n    if (iterator) {\n      for (; i < n; i++) {\n        iterator(list[i], i);\n      }\n    }\n\n    return list;\n  }\n\n  return [];\n}\n\nfunction getWindowScrollingElement() {\n  var scrollingElement = document.scrollingElement;\n\n  if (scrollingElement) {\n    return scrollingElement;\n  } else {\n    return document.documentElement;\n  }\n}\n/**\n * Returns the \"bounding client rect\" of given element\n * @param  {HTMLElement} el                       The element whose boundingClientRect is wanted\n * @param  {[Boolean]} relativeToContainingBlock  Whether the rect should be relative to the containing block of (including) the container\n * @param  {[Boolean]} relativeToNonStaticParent  Whether the rect should be relative to the relative parent of (including) the contaienr\n * @param  {[Boolean]} undoScale                  Whether the container's scale() should be undone\n * @param  {[HTMLElement]} container              The parent the element will be placed in\n * @return {Object}                               The boundingClientRect of el, with specified adjustments\n */\n\n\nfunction getRect(el, relativeToContainingBlock, relativeToNonStaticParent, undoScale, container) {\n  if (!el.getBoundingClientRect && el !== window) return;\n  var elRect, top, left, bottom, right, height, width;\n\n  if (el !== window && el.parentNode && el !== getWindowScrollingElement()) {\n    elRect = el.getBoundingClientRect();\n    top = elRect.top;\n    left = elRect.left;\n    bottom = elRect.bottom;\n    right = elRect.right;\n    height = elRect.height;\n    width = elRect.width;\n  } else {\n    top = 0;\n    left = 0;\n    bottom = window.innerHeight;\n    right = window.innerWidth;\n    height = window.innerHeight;\n    width = window.innerWidth;\n  }\n\n  if ((relativeToContainingBlock || relativeToNonStaticParent) && el !== window) {\n    // Adjust for translate()\n    container = container || el.parentNode; // solves #1123 (see: https://stackoverflow.com/a/37953806/6088312)\n    // Not needed on <= IE11\n\n    if (!IE11OrLess) {\n      do {\n        if (container && container.getBoundingClientRect && (css(container, 'transform') !== 'none' || relativeToNonStaticParent && css(container, 'position') !== 'static')) {\n          var containerRect = container.getBoundingClientRect(); // Set relative to edges of padding box of container\n\n          top -= containerRect.top + parseInt(css(container, 'border-top-width'));\n          left -= containerRect.left + parseInt(css(container, 'border-left-width'));\n          bottom = top + elRect.height;\n          right = left + elRect.width;\n          break;\n        }\n        /* jshint boss:true */\n\n      } while (container = container.parentNode);\n    }\n  }\n\n  if (undoScale && el !== window) {\n    // Adjust for scale()\n    var elMatrix = matrix(container || el),\n        scaleX = elMatrix && elMatrix.a,\n        scaleY = elMatrix && elMatrix.d;\n\n    if (elMatrix) {\n      top /= scaleY;\n      left /= scaleX;\n      width /= scaleX;\n      height /= scaleY;\n      bottom = top + height;\n      right = left + width;\n    }\n  }\n\n  return {\n    top: top,\n    left: left,\n    bottom: bottom,\n    right: right,\n    width: width,\n    height: height\n  };\n}\n/**\n * Checks if a side of an element is scrolled past a side of its parents\n * @param  {HTMLElement}  el           The element who's side being scrolled out of view is in question\n * @param  {String}       elSide       Side of the element in question ('top', 'left', 'right', 'bottom')\n * @param  {String}       parentSide   Side of the parent in question ('top', 'left', 'right', 'bottom')\n * @return {HTMLElement}               The parent scroll element that the el's side is scrolled past, or null if there is no such element\n */\n\n\nfunction isScrolledPast(el, elSide, parentSide) {\n  var parent = getParentAutoScrollElement(el, true),\n      elSideVal = getRect(el)[elSide];\n  /* jshint boss:true */\n\n  while (parent) {\n    var parentSideVal = getRect(parent)[parentSide],\n        visible = void 0;\n\n    if (parentSide === 'top' || parentSide === 'left') {\n      visible = elSideVal >= parentSideVal;\n    } else {\n      visible = elSideVal <= parentSideVal;\n    }\n\n    if (!visible) return parent;\n    if (parent === getWindowScrollingElement()) break;\n    parent = getParentAutoScrollElement(parent, false);\n  }\n\n  return false;\n}\n/**\n * Gets nth child of el, ignoring hidden children, sortable's elements (does not ignore clone if it's visible)\n * and non-draggable elements\n * @param  {HTMLElement} el       The parent element\n * @param  {Number} childNum      The index of the child\n * @param  {Object} options       Parent Sortable's options\n * @return {HTMLElement}          The child at index childNum, or null if not found\n */\n\n\nfunction getChild(el, childNum, options, includeDragEl) {\n  var currentChild = 0,\n      i = 0,\n      children = el.children;\n\n  while (i < children.length) {\n    if (children[i].style.display !== 'none' && children[i] !== Sortable.ghost && (includeDragEl || children[i] !== Sortable.dragged) && closest(children[i], options.draggable, el, false)) {\n      if (currentChild === childNum) {\n        return children[i];\n      }\n\n      currentChild++;\n    }\n\n    i++;\n  }\n\n  return null;\n}\n/**\n * Gets the last child in the el, ignoring ghostEl or invisible elements (clones)\n * @param  {HTMLElement} el       Parent element\n * @param  {selector} selector    Any other elements that should be ignored\n * @return {HTMLElement}          The last child, ignoring ghostEl\n */\n\n\nfunction lastChild(el, selector) {\n  var last = el.lastElementChild;\n\n  while (last && (last === Sortable.ghost || css(last, 'display') === 'none' || selector && !matches(last, selector))) {\n    last = last.previousElementSibling;\n  }\n\n  return last || null;\n}\n/**\n * Returns the index of an element within its parent for a selected set of\n * elements\n * @param  {HTMLElement} el\n * @param  {selector} selector\n * @return {number}\n */\n\n\nfunction index(el, selector) {\n  var index = 0;\n\n  if (!el || !el.parentNode) {\n    return -1;\n  }\n  /* jshint boss:true */\n\n\n  while (el = el.previousElementSibling) {\n    if (el.nodeName.toUpperCase() !== 'TEMPLATE' && el !== Sortable.clone && (!selector || matches(el, selector))) {\n      index++;\n    }\n  }\n\n  return index;\n}\n/**\n * Returns the scroll offset of the given element, added with all the scroll offsets of parent elements.\n * The value is returned in real pixels.\n * @param  {HTMLElement} el\n * @return {Array}             Offsets in the format of [left, top]\n */\n\n\nfunction getRelativeScrollOffset(el) {\n  var offsetLeft = 0,\n      offsetTop = 0,\n      winScroller = getWindowScrollingElement();\n\n  if (el) {\n    do {\n      var elMatrix = matrix(el),\n          scaleX = elMatrix.a,\n          scaleY = elMatrix.d;\n      offsetLeft += el.scrollLeft * scaleX;\n      offsetTop += el.scrollTop * scaleY;\n    } while (el !== winScroller && (el = el.parentNode));\n  }\n\n  return [offsetLeft, offsetTop];\n}\n/**\n * Returns the index of the object within the given array\n * @param  {Array} arr   Array that may or may not hold the object\n * @param  {Object} obj  An object that has a key-value pair unique to and identical to a key-value pair in the object you want to find\n * @return {Number}      The index of the object in the array, or -1\n */\n\n\nfunction indexOfObject(arr, obj) {\n  for (var i in arr) {\n    if (!arr.hasOwnProperty(i)) continue;\n\n    for (var key in obj) {\n      if (obj.hasOwnProperty(key) && obj[key] === arr[i][key]) return Number(i);\n    }\n  }\n\n  return -1;\n}\n\nfunction getParentAutoScrollElement(el, includeSelf) {\n  // skip to window\n  if (!el || !el.getBoundingClientRect) return getWindowScrollingElement();\n  var elem = el;\n  var gotSelf = false;\n\n  do {\n    // we don't need to get elem css if it isn't even overflowing in the first place (performance)\n    if (elem.clientWidth < elem.scrollWidth || elem.clientHeight < elem.scrollHeight) {\n      var elemCSS = css(elem);\n\n      if (elem.clientWidth < elem.scrollWidth && (elemCSS.overflowX == 'auto' || elemCSS.overflowX == 'scroll') || elem.clientHeight < elem.scrollHeight && (elemCSS.overflowY == 'auto' || elemCSS.overflowY == 'scroll')) {\n        if (!elem.getBoundingClientRect || elem === document.body) return getWindowScrollingElement();\n        if (gotSelf || includeSelf) return elem;\n        gotSelf = true;\n      }\n    }\n    /* jshint boss:true */\n\n  } while (elem = elem.parentNode);\n\n  return getWindowScrollingElement();\n}\n\nfunction extend(dst, src) {\n  if (dst && src) {\n    for (var key in src) {\n      if (src.hasOwnProperty(key)) {\n        dst[key] = src[key];\n      }\n    }\n  }\n\n  return dst;\n}\n\nfunction isRectEqual(rect1, rect2) {\n  return Math.round(rect1.top) === Math.round(rect2.top) && Math.round(rect1.left) === Math.round(rect2.left) && Math.round(rect1.height) === Math.round(rect2.height) && Math.round(rect1.width) === Math.round(rect2.width);\n}\n\nvar _throttleTimeout;\n\nfunction throttle(callback, ms) {\n  return function () {\n    if (!_throttleTimeout) {\n      var args = arguments,\n          _this = this;\n\n      if (args.length === 1) {\n        callback.call(_this, args[0]);\n      } else {\n        callback.apply(_this, args);\n      }\n\n      _throttleTimeout = setTimeout(function () {\n        _throttleTimeout = void 0;\n      }, ms);\n    }\n  };\n}\n\nfunction cancelThrottle() {\n  clearTimeout(_throttleTimeout);\n  _throttleTimeout = void 0;\n}\n\nfunction scrollBy(el, x, y) {\n  el.scrollLeft += x;\n  el.scrollTop += y;\n}\n\nfunction clone(el) {\n  var Polymer = window.Polymer;\n  var $ = window.jQuery || window.Zepto;\n\n  if (Polymer && Polymer.dom) {\n    return Polymer.dom(el).cloneNode(true);\n  } else if ($) {\n    return $(el).clone(true)[0];\n  } else {\n    return el.cloneNode(true);\n  }\n}\n\nfunction setRect(el, rect) {\n  css(el, 'position', 'absolute');\n  css(el, 'top', rect.top);\n  css(el, 'left', rect.left);\n  css(el, 'width', rect.width);\n  css(el, 'height', rect.height);\n}\n\nfunction unsetRect(el) {\n  css(el, 'position', '');\n  css(el, 'top', '');\n  css(el, 'left', '');\n  css(el, 'width', '');\n  css(el, 'height', '');\n}\n\nvar expando = 'Sortable' + new Date().getTime();\n\nfunction AnimationStateManager() {\n  var animationStates = [],\n      animationCallbackId;\n  return {\n    captureAnimationState: function captureAnimationState() {\n      animationStates = [];\n      if (!this.options.animation) return;\n      var children = [].slice.call(this.el.children);\n      children.forEach(function (child) {\n        if (css(child, 'display') === 'none' || child === Sortable.ghost) return;\n        animationStates.push({\n          target: child,\n          rect: getRect(child)\n        });\n\n        var fromRect = _objectSpread2({}, animationStates[animationStates.length - 1].rect); // If animating: compensate for current animation\n\n\n        if (child.thisAnimationDuration) {\n          var childMatrix = matrix(child, true);\n\n          if (childMatrix) {\n            fromRect.top -= childMatrix.f;\n            fromRect.left -= childMatrix.e;\n          }\n        }\n\n        child.fromRect = fromRect;\n      });\n    },\n    addAnimationState: function addAnimationState(state) {\n      animationStates.push(state);\n    },\n    removeAnimationState: function removeAnimationState(target) {\n      animationStates.splice(indexOfObject(animationStates, {\n        target: target\n      }), 1);\n    },\n    animateAll: function animateAll(callback) {\n      var _this = this;\n\n      if (!this.options.animation) {\n        clearTimeout(animationCallbackId);\n        if (typeof callback === 'function') callback();\n        return;\n      }\n\n      var animating = false,\n          animationTime = 0;\n      animationStates.forEach(function (state) {\n        var time = 0,\n            target = state.target,\n            fromRect = target.fromRect,\n            toRect = getRect(target),\n            prevFromRect = target.prevFromRect,\n            prevToRect = target.prevToRect,\n            animatingRect = state.rect,\n            targetMatrix = matrix(target, true);\n\n        if (targetMatrix) {\n          // Compensate for current animation\n          toRect.top -= targetMatrix.f;\n          toRect.left -= targetMatrix.e;\n        }\n\n        target.toRect = toRect;\n\n        if (target.thisAnimationDuration) {\n          // Could also check if animatingRect is between fromRect and toRect\n          if (isRectEqual(prevFromRect, toRect) && !isRectEqual(fromRect, toRect) && // Make sure animatingRect is on line between toRect & fromRect\n          (animatingRect.top - toRect.top) / (animatingRect.left - toRect.left) === (fromRect.top - toRect.top) / (fromRect.left - toRect.left)) {\n            // If returning to same place as started from animation and on same axis\n            time = calculateRealTime(animatingRect, prevFromRect, prevToRect, _this.options);\n          }\n        } // if fromRect != toRect: animate\n\n\n        if (!isRectEqual(toRect, fromRect)) {\n          target.prevFromRect = fromRect;\n          target.prevToRect = toRect;\n\n          if (!time) {\n            time = _this.options.animation;\n          }\n\n          _this.animate(target, animatingRect, toRect, time);\n        }\n\n        if (time) {\n          animating = true;\n          animationTime = Math.max(animationTime, time);\n          clearTimeout(target.animationResetTimer);\n          target.animationResetTimer = setTimeout(function () {\n            target.animationTime = 0;\n            target.prevFromRect = null;\n            target.fromRect = null;\n            target.prevToRect = null;\n            target.thisAnimationDuration = null;\n          }, time);\n          target.thisAnimationDuration = time;\n        }\n      });\n      clearTimeout(animationCallbackId);\n\n      if (!animating) {\n        if (typeof callback === 'function') callback();\n      } else {\n        animationCallbackId = setTimeout(function () {\n          if (typeof callback === 'function') callback();\n        }, animationTime);\n      }\n\n      animationStates = [];\n    },\n    animate: function animate(target, currentRect, toRect, duration) {\n      if (duration) {\n        css(target, 'transition', '');\n        css(target, 'transform', '');\n        var elMatrix = matrix(this.el),\n            scaleX = elMatrix && elMatrix.a,\n            scaleY = elMatrix && elMatrix.d,\n            translateX = (currentRect.left - toRect.left) / (scaleX || 1),\n            translateY = (currentRect.top - toRect.top) / (scaleY || 1);\n        target.animatingX = !!translateX;\n        target.animatingY = !!translateY;\n        css(target, 'transform', 'translate3d(' + translateX + 'px,' + translateY + 'px,0)');\n        this.forRepaintDummy = repaint(target); // repaint\n\n        css(target, 'transition', 'transform ' + duration + 'ms' + (this.options.easing ? ' ' + this.options.easing : ''));\n        css(target, 'transform', 'translate3d(0,0,0)');\n        typeof target.animated === 'number' && clearTimeout(target.animated);\n        target.animated = setTimeout(function () {\n          css(target, 'transition', '');\n          css(target, 'transform', '');\n          target.animated = false;\n          target.animatingX = false;\n          target.animatingY = false;\n        }, duration);\n      }\n    }\n  };\n}\n\nfunction repaint(target) {\n  return target.offsetWidth;\n}\n\nfunction calculateRealTime(animatingRect, fromRect, toRect, options) {\n  return Math.sqrt(Math.pow(fromRect.top - animatingRect.top, 2) + Math.pow(fromRect.left - animatingRect.left, 2)) / Math.sqrt(Math.pow(fromRect.top - toRect.top, 2) + Math.pow(fromRect.left - toRect.left, 2)) * options.animation;\n}\n\nvar plugins = [];\nvar defaults = {\n  initializeByDefault: true\n};\nvar PluginManager = {\n  mount: function mount(plugin) {\n    // Set default static properties\n    for (var option in defaults) {\n      if (defaults.hasOwnProperty(option) && !(option in plugin)) {\n        plugin[option] = defaults[option];\n      }\n    }\n\n    plugins.forEach(function (p) {\n      if (p.pluginName === plugin.pluginName) {\n        throw \"Sortable: Cannot mount plugin \".concat(plugin.pluginName, \" more than once\");\n      }\n    });\n    plugins.push(plugin);\n  },\n  pluginEvent: function pluginEvent(eventName, sortable, evt) {\n    var _this = this;\n\n    this.eventCanceled = false;\n\n    evt.cancel = function () {\n      _this.eventCanceled = true;\n    };\n\n    var eventNameGlobal = eventName + 'Global';\n    plugins.forEach(function (plugin) {\n      if (!sortable[plugin.pluginName]) return; // Fire global events if it exists in this sortable\n\n      if (sortable[plugin.pluginName][eventNameGlobal]) {\n        sortable[plugin.pluginName][eventNameGlobal](_objectSpread2({\n          sortable: sortable\n        }, evt));\n      } // Only fire plugin event if plugin is enabled in this sortable,\n      // and plugin has event defined\n\n\n      if (sortable.options[plugin.pluginName] && sortable[plugin.pluginName][eventName]) {\n        sortable[plugin.pluginName][eventName](_objectSpread2({\n          sortable: sortable\n        }, evt));\n      }\n    });\n  },\n  initializePlugins: function initializePlugins(sortable, el, defaults, options) {\n    plugins.forEach(function (plugin) {\n      var pluginName = plugin.pluginName;\n      if (!sortable.options[pluginName] && !plugin.initializeByDefault) return;\n      var initialized = new plugin(sortable, el, sortable.options);\n      initialized.sortable = sortable;\n      initialized.options = sortable.options;\n      sortable[pluginName] = initialized; // Add default options from plugin\n\n      _extends(defaults, initialized.defaults);\n    });\n\n    for (var option in sortable.options) {\n      if (!sortable.options.hasOwnProperty(option)) continue;\n      var modified = this.modifyOption(sortable, option, sortable.options[option]);\n\n      if (typeof modified !== 'undefined') {\n        sortable.options[option] = modified;\n      }\n    }\n  },\n  getEventProperties: function getEventProperties(name, sortable) {\n    var eventProperties = {};\n    plugins.forEach(function (plugin) {\n      if (typeof plugin.eventProperties !== 'function') return;\n\n      _extends(eventProperties, plugin.eventProperties.call(sortable[plugin.pluginName], name));\n    });\n    return eventProperties;\n  },\n  modifyOption: function modifyOption(sortable, name, value) {\n    var modifiedValue;\n    plugins.forEach(function (plugin) {\n      // Plugin must exist on the Sortable\n      if (!sortable[plugin.pluginName]) return; // If static option listener exists for this option, call in the context of the Sortable's instance of this plugin\n\n      if (plugin.optionListeners && typeof plugin.optionListeners[name] === 'function') {\n        modifiedValue = plugin.optionListeners[name].call(sortable[plugin.pluginName], value);\n      }\n    });\n    return modifiedValue;\n  }\n};\n\nfunction dispatchEvent(_ref) {\n  var sortable = _ref.sortable,\n      rootEl = _ref.rootEl,\n      name = _ref.name,\n      targetEl = _ref.targetEl,\n      cloneEl = _ref.cloneEl,\n      toEl = _ref.toEl,\n      fromEl = _ref.fromEl,\n      oldIndex = _ref.oldIndex,\n      newIndex = _ref.newIndex,\n      oldDraggableIndex = _ref.oldDraggableIndex,\n      newDraggableIndex = _ref.newDraggableIndex,\n      originalEvent = _ref.originalEvent,\n      putSortable = _ref.putSortable,\n      extraEventProperties = _ref.extraEventProperties;\n  sortable = sortable || rootEl && rootEl[expando];\n  if (!sortable) return;\n  var evt,\n      options = sortable.options,\n      onName = 'on' + name.charAt(0).toUpperCase() + name.substr(1); // Support for new CustomEvent feature\n\n  if (window.CustomEvent && !IE11OrLess && !Edge) {\n    evt = new CustomEvent(name, {\n      bubbles: true,\n      cancelable: true\n    });\n  } else {\n    evt = document.createEvent('Event');\n    evt.initEvent(name, true, true);\n  }\n\n  evt.to = toEl || rootEl;\n  evt.from = fromEl || rootEl;\n  evt.item = targetEl || rootEl;\n  evt.clone = cloneEl;\n  evt.oldIndex = oldIndex;\n  evt.newIndex = newIndex;\n  evt.oldDraggableIndex = oldDraggableIndex;\n  evt.newDraggableIndex = newDraggableIndex;\n  evt.originalEvent = originalEvent;\n  evt.pullMode = putSortable ? putSortable.lastPutMode : undefined;\n\n  var allEventProperties = _objectSpread2(_objectSpread2({}, extraEventProperties), PluginManager.getEventProperties(name, sortable));\n\n  for (var option in allEventProperties) {\n    evt[option] = allEventProperties[option];\n  }\n\n  if (rootEl) {\n    rootEl.dispatchEvent(evt);\n  }\n\n  if (options[onName]) {\n    options[onName].call(sortable, evt);\n  }\n}\n\nvar _excluded = [\"evt\"];\n\nvar pluginEvent = function pluginEvent(eventName, sortable) {\n  var _ref = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n      originalEvent = _ref.evt,\n      data = _objectWithoutProperties(_ref, _excluded);\n\n  PluginManager.pluginEvent.bind(Sortable)(eventName, sortable, _objectSpread2({\n    dragEl: dragEl,\n    parentEl: parentEl,\n    ghostEl: ghostEl,\n    rootEl: rootEl,\n    nextEl: nextEl,\n    lastDownEl: lastDownEl,\n    cloneEl: cloneEl,\n    cloneHidden: cloneHidden,\n    dragStarted: moved,\n    putSortable: putSortable,\n    activeSortable: Sortable.active,\n    originalEvent: originalEvent,\n    oldIndex: oldIndex,\n    oldDraggableIndex: oldDraggableIndex,\n    newIndex: newIndex,\n    newDraggableIndex: newDraggableIndex,\n    hideGhostForTarget: _hideGhostForTarget,\n    unhideGhostForTarget: _unhideGhostForTarget,\n    cloneNowHidden: function cloneNowHidden() {\n      cloneHidden = true;\n    },\n    cloneNowShown: function cloneNowShown() {\n      cloneHidden = false;\n    },\n    dispatchSortableEvent: function dispatchSortableEvent(name) {\n      _dispatchEvent({\n        sortable: sortable,\n        name: name,\n        originalEvent: originalEvent\n      });\n    }\n  }, data));\n};\n\nfunction _dispatchEvent(info) {\n  dispatchEvent(_objectSpread2({\n    putSortable: putSortable,\n    cloneEl: cloneEl,\n    targetEl: dragEl,\n    rootEl: rootEl,\n    oldIndex: oldIndex,\n    oldDraggableIndex: oldDraggableIndex,\n    newIndex: newIndex,\n    newDraggableIndex: newDraggableIndex\n  }, info));\n}\n\nvar dragEl,\n    parentEl,\n    ghostEl,\n    rootEl,\n    nextEl,\n    lastDownEl,\n    cloneEl,\n    cloneHidden,\n    oldIndex,\n    newIndex,\n    oldDraggableIndex,\n    newDraggableIndex,\n    activeGroup,\n    putSortable,\n    awaitingDragStarted = false,\n    ignoreNextClick = false,\n    sortables = [],\n    tapEvt,\n    touchEvt,\n    lastDx,\n    lastDy,\n    tapDistanceLeft,\n    tapDistanceTop,\n    moved,\n    lastTarget,\n    lastDirection,\n    pastFirstInvertThresh = false,\n    isCircumstantialInvert = false,\n    targetMoveDistance,\n    // For positioning ghost absolutely\nghostRelativeParent,\n    ghostRelativeParentInitialScroll = [],\n    // (left, top)\n_silent = false,\n    savedInputChecked = [];\n/** @const */\n\nvar documentExists = typeof document !== 'undefined',\n    PositionGhostAbsolutely = IOS,\n    CSSFloatProperty = Edge || IE11OrLess ? 'cssFloat' : 'float',\n    // This will not pass for IE9, because IE9 DnD only works on anchors\nsupportDraggable = documentExists && !ChromeForAndroid && !IOS && 'draggable' in document.createElement('div'),\n    supportCssPointerEvents = function () {\n  if (!documentExists) return; // false when <= IE11\n\n  if (IE11OrLess) {\n    return false;\n  }\n\n  var el = document.createElement('x');\n  el.style.cssText = 'pointer-events:auto';\n  return el.style.pointerEvents === 'auto';\n}(),\n    _detectDirection = function _detectDirection(el, options) {\n  var elCSS = css(el),\n      elWidth = parseInt(elCSS.width) - parseInt(elCSS.paddingLeft) - parseInt(elCSS.paddingRight) - parseInt(elCSS.borderLeftWidth) - parseInt(elCSS.borderRightWidth),\n      child1 = getChild(el, 0, options),\n      child2 = getChild(el, 1, options),\n      firstChildCSS = child1 && css(child1),\n      secondChildCSS = child2 && css(child2),\n      firstChildWidth = firstChildCSS && parseInt(firstChildCSS.marginLeft) + parseInt(firstChildCSS.marginRight) + getRect(child1).width,\n      secondChildWidth = secondChildCSS && parseInt(secondChildCSS.marginLeft) + parseInt(secondChildCSS.marginRight) + getRect(child2).width;\n\n  if (elCSS.display === 'flex') {\n    return elCSS.flexDirection === 'column' || elCSS.flexDirection === 'column-reverse' ? 'vertical' : 'horizontal';\n  }\n\n  if (elCSS.display === 'grid') {\n    return elCSS.gridTemplateColumns.split(' ').length <= 1 ? 'vertical' : 'horizontal';\n  }\n\n  if (child1 && firstChildCSS[\"float\"] && firstChildCSS[\"float\"] !== 'none') {\n    var touchingSideChild2 = firstChildCSS[\"float\"] === 'left' ? 'left' : 'right';\n    return child2 && (secondChildCSS.clear === 'both' || secondChildCSS.clear === touchingSideChild2) ? 'vertical' : 'horizontal';\n  }\n\n  return child1 && (firstChildCSS.display === 'block' || firstChildCSS.display === 'flex' || firstChildCSS.display === 'table' || firstChildCSS.display === 'grid' || firstChildWidth >= elWidth && elCSS[CSSFloatProperty] === 'none' || child2 && elCSS[CSSFloatProperty] === 'none' && firstChildWidth + secondChildWidth > elWidth) ? 'vertical' : 'horizontal';\n},\n    _dragElInRowColumn = function _dragElInRowColumn(dragRect, targetRect, vertical) {\n  var dragElS1Opp = vertical ? dragRect.left : dragRect.top,\n      dragElS2Opp = vertical ? dragRect.right : dragRect.bottom,\n      dragElOppLength = vertical ? dragRect.width : dragRect.height,\n      targetS1Opp = vertical ? targetRect.left : targetRect.top,\n      targetS2Opp = vertical ? targetRect.right : targetRect.bottom,\n      targetOppLength = vertical ? targetRect.width : targetRect.height;\n  return dragElS1Opp === targetS1Opp || dragElS2Opp === targetS2Opp || dragElS1Opp + dragElOppLength / 2 === targetS1Opp + targetOppLength / 2;\n},\n\n/**\r\n * Detects first nearest empty sortable to X and Y position using emptyInsertThreshold.\r\n * @param  {Number} x      X position\r\n * @param  {Number} y      Y position\r\n * @return {HTMLElement}   Element of the first found nearest Sortable\r\n */\n_detectNearestEmptySortable = function _detectNearestEmptySortable(x, y) {\n  var ret;\n  sortables.some(function (sortable) {\n    var threshold = sortable[expando].options.emptyInsertThreshold;\n    if (!threshold || lastChild(sortable)) return;\n    var rect = getRect(sortable),\n        insideHorizontally = x >= rect.left - threshold && x <= rect.right + threshold,\n        insideVertically = y >= rect.top - threshold && y <= rect.bottom + threshold;\n\n    if (insideHorizontally && insideVertically) {\n      return ret = sortable;\n    }\n  });\n  return ret;\n},\n    _prepareGroup = function _prepareGroup(options) {\n  function toFn(value, pull) {\n    return function (to, from, dragEl, evt) {\n      var sameGroup = to.options.group.name && from.options.group.name && to.options.group.name === from.options.group.name;\n\n      if (value == null && (pull || sameGroup)) {\n        // Default pull value\n        // Default pull and put value if same group\n        return true;\n      } else if (value == null || value === false) {\n        return false;\n      } else if (pull && value === 'clone') {\n        return value;\n      } else if (typeof value === 'function') {\n        return toFn(value(to, from, dragEl, evt), pull)(to, from, dragEl, evt);\n      } else {\n        var otherGroup = (pull ? to : from).options.group.name;\n        return value === true || typeof value === 'string' && value === otherGroup || value.join && value.indexOf(otherGroup) > -1;\n      }\n    };\n  }\n\n  var group = {};\n  var originalGroup = options.group;\n\n  if (!originalGroup || _typeof(originalGroup) != 'object') {\n    originalGroup = {\n      name: originalGroup\n    };\n  }\n\n  group.name = originalGroup.name;\n  group.checkPull = toFn(originalGroup.pull, true);\n  group.checkPut = toFn(originalGroup.put);\n  group.revertClone = originalGroup.revertClone;\n  options.group = group;\n},\n    _hideGhostForTarget = function _hideGhostForTarget() {\n  if (!supportCssPointerEvents && ghostEl) {\n    css(ghostEl, 'display', 'none');\n  }\n},\n    _unhideGhostForTarget = function _unhideGhostForTarget() {\n  if (!supportCssPointerEvents && ghostEl) {\n    css(ghostEl, 'display', '');\n  }\n}; // #1184 fix - Prevent click event on fallback if dragged but item not changed position\n\n\nif (documentExists && !ChromeForAndroid) {\n  document.addEventListener('click', function (evt) {\n    if (ignoreNextClick) {\n      evt.preventDefault();\n      evt.stopPropagation && evt.stopPropagation();\n      evt.stopImmediatePropagation && evt.stopImmediatePropagation();\n      ignoreNextClick = false;\n      return false;\n    }\n  }, true);\n}\n\nvar nearestEmptyInsertDetectEvent = function nearestEmptyInsertDetectEvent(evt) {\n  if (dragEl) {\n    evt = evt.touches ? evt.touches[0] : evt;\n\n    var nearest = _detectNearestEmptySortable(evt.clientX, evt.clientY);\n\n    if (nearest) {\n      // Create imitation event\n      var event = {};\n\n      for (var i in evt) {\n        if (evt.hasOwnProperty(i)) {\n          event[i] = evt[i];\n        }\n      }\n\n      event.target = event.rootEl = nearest;\n      event.preventDefault = void 0;\n      event.stopPropagation = void 0;\n\n      nearest[expando]._onDragOver(event);\n    }\n  }\n};\n\nvar _checkOutsideTargetEl = function _checkOutsideTargetEl(evt) {\n  if (dragEl) {\n    dragEl.parentNode[expando]._isOutsideThisEl(evt.target);\n  }\n};\n/**\r\n * @class  Sortable\r\n * @param  {HTMLElement}  el\r\n * @param  {Object}       [options]\r\n */\n\n\nfunction Sortable(el, options) {\n  if (!(el && el.nodeType && el.nodeType === 1)) {\n    throw \"Sortable: `el` must be an HTMLElement, not \".concat({}.toString.call(el));\n  }\n\n  this.el = el; // root element\n\n  this.options = options = _extends({}, options); // Export instance\n\n  el[expando] = this;\n  var defaults = {\n    group: null,\n    sort: true,\n    disabled: false,\n    store: null,\n    handle: null,\n    draggable: /^[uo]l$/i.test(el.nodeName) ? '>li' : '>*',\n    swapThreshold: 1,\n    // percentage; 0 <= x <= 1\n    invertSwap: false,\n    // invert always\n    invertedSwapThreshold: null,\n    // will be set to same as swapThreshold if default\n    removeCloneOnHide: true,\n    direction: function direction() {\n      return _detectDirection(el, this.options);\n    },\n    ghostClass: 'sortable-ghost',\n    chosenClass: 'sortable-chosen',\n    dragClass: 'sortable-drag',\n    ignore: 'a, img',\n    filter: null,\n    preventOnFilter: true,\n    animation: 0,\n    easing: null,\n    setData: function setData(dataTransfer, dragEl) {\n      dataTransfer.setData('Text', dragEl.textContent);\n    },\n    dropBubble: false,\n    dragoverBubble: false,\n    dataIdAttr: 'data-id',\n    delay: 0,\n    delayOnTouchOnly: false,\n    touchStartThreshold: (Number.parseInt ? Number : window).parseInt(window.devicePixelRatio, 10) || 1,\n    forceFallback: false,\n    fallbackClass: 'sortable-fallback',\n    fallbackOnBody: false,\n    fallbackTolerance: 0,\n    fallbackOffset: {\n      x: 0,\n      y: 0\n    },\n    supportPointer: Sortable.supportPointer !== false && 'PointerEvent' in window && !Safari,\n    emptyInsertThreshold: 5\n  };\n  PluginManager.initializePlugins(this, el, defaults); // Set default options\n\n  for (var name in defaults) {\n    !(name in options) && (options[name] = defaults[name]);\n  }\n\n  _prepareGroup(options); // Bind all private methods\n\n\n  for (var fn in this) {\n    if (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n      this[fn] = this[fn].bind(this);\n    }\n  } // Setup drag mode\n\n\n  this.nativeDraggable = options.forceFallback ? false : supportDraggable;\n\n  if (this.nativeDraggable) {\n    // Touch start threshold cannot be greater than the native dragstart threshold\n    this.options.touchStartThreshold = 1;\n  } // Bind events\n\n\n  if (options.supportPointer) {\n    on(el, 'pointerdown', this._onTapStart);\n  } else {\n    on(el, 'mousedown', this._onTapStart);\n    on(el, 'touchstart', this._onTapStart);\n  }\n\n  if (this.nativeDraggable) {\n    on(el, 'dragover', this);\n    on(el, 'dragenter', this);\n  }\n\n  sortables.push(this.el); // Restore sorting\n\n  options.store && options.store.get && this.sort(options.store.get(this) || []); // Add animation state manager\n\n  _extends(this, AnimationStateManager());\n}\n\nSortable.prototype =\n/** @lends Sortable.prototype */\n{\n  constructor: Sortable,\n  _isOutsideThisEl: function _isOutsideThisEl(target) {\n    if (!this.el.contains(target) && target !== this.el) {\n      lastTarget = null;\n    }\n  },\n  _getDirection: function _getDirection(evt, target) {\n    return typeof this.options.direction === 'function' ? this.options.direction.call(this, evt, target, dragEl) : this.options.direction;\n  },\n  _onTapStart: function _onTapStart(\n  /** Event|TouchEvent */\n  evt) {\n    if (!evt.cancelable) return;\n\n    var _this = this,\n        el = this.el,\n        options = this.options,\n        preventOnFilter = options.preventOnFilter,\n        type = evt.type,\n        touch = evt.touches && evt.touches[0] || evt.pointerType && evt.pointerType === 'touch' && evt,\n        target = (touch || evt).target,\n        originalTarget = evt.target.shadowRoot && (evt.path && evt.path[0] || evt.composedPath && evt.composedPath()[0]) || target,\n        filter = options.filter;\n\n    _saveInputCheckedState(el); // Don't trigger start event when an element is been dragged, otherwise the evt.oldindex always wrong when set option.group.\n\n\n    if (dragEl) {\n      return;\n    }\n\n    if (/mousedown|pointerdown/.test(type) && evt.button !== 0 || options.disabled) {\n      return; // only left button and enabled\n    } // cancel dnd if original target is content editable\n\n\n    if (originalTarget.isContentEditable) {\n      return;\n    } // Safari ignores further event handling after mousedown\n\n\n    if (!this.nativeDraggable && Safari && target && target.tagName.toUpperCase() === 'SELECT') {\n      return;\n    }\n\n    target = closest(target, options.draggable, el, false);\n\n    if (target && target.animated) {\n      return;\n    }\n\n    if (lastDownEl === target) {\n      // Ignoring duplicate `down`\n      return;\n    } // Get the index of the dragged element within its parent\n\n\n    oldIndex = index(target);\n    oldDraggableIndex = index(target, options.draggable); // Check filter\n\n    if (typeof filter === 'function') {\n      if (filter.call(this, evt, target, this)) {\n        _dispatchEvent({\n          sortable: _this,\n          rootEl: originalTarget,\n          name: 'filter',\n          targetEl: target,\n          toEl: el,\n          fromEl: el\n        });\n\n        pluginEvent('filter', _this, {\n          evt: evt\n        });\n        preventOnFilter && evt.cancelable && evt.preventDefault();\n        return; // cancel dnd\n      }\n    } else if (filter) {\n      filter = filter.split(',').some(function (criteria) {\n        criteria = closest(originalTarget, criteria.trim(), el, false);\n\n        if (criteria) {\n          _dispatchEvent({\n            sortable: _this,\n            rootEl: criteria,\n            name: 'filter',\n            targetEl: target,\n            fromEl: el,\n            toEl: el\n          });\n\n          pluginEvent('filter', _this, {\n            evt: evt\n          });\n          return true;\n        }\n      });\n\n      if (filter) {\n        preventOnFilter && evt.cancelable && evt.preventDefault();\n        return; // cancel dnd\n      }\n    }\n\n    if (options.handle && !closest(originalTarget, options.handle, el, false)) {\n      return;\n    } // Prepare `dragstart`\n\n\n    this._prepareDragStart(evt, touch, target);\n  },\n  _prepareDragStart: function _prepareDragStart(\n  /** Event */\n  evt,\n  /** Touch */\n  touch,\n  /** HTMLElement */\n  target) {\n    var _this = this,\n        el = _this.el,\n        options = _this.options,\n        ownerDocument = el.ownerDocument,\n        dragStartFn;\n\n    if (target && !dragEl && target.parentNode === el) {\n      var dragRect = getRect(target);\n      rootEl = el;\n      dragEl = target;\n      parentEl = dragEl.parentNode;\n      nextEl = dragEl.nextSibling;\n      lastDownEl = target;\n      activeGroup = options.group;\n      Sortable.dragged = dragEl;\n      tapEvt = {\n        target: dragEl,\n        clientX: (touch || evt).clientX,\n        clientY: (touch || evt).clientY\n      };\n      tapDistanceLeft = tapEvt.clientX - dragRect.left;\n      tapDistanceTop = tapEvt.clientY - dragRect.top;\n      this._lastX = (touch || evt).clientX;\n      this._lastY = (touch || evt).clientY;\n      dragEl.style['will-change'] = 'all';\n\n      dragStartFn = function dragStartFn() {\n        pluginEvent('delayEnded', _this, {\n          evt: evt\n        });\n\n        if (Sortable.eventCanceled) {\n          _this._onDrop();\n\n          return;\n        } // Delayed drag has been triggered\n        // we can re-enable the events: touchmove/mousemove\n\n\n        _this._disableDelayedDragEvents();\n\n        if (!FireFox && _this.nativeDraggable) {\n          dragEl.draggable = true;\n        } // Bind the events: dragstart/dragend\n\n\n        _this._triggerDragStart(evt, touch); // Drag start event\n\n\n        _dispatchEvent({\n          sortable: _this,\n          name: 'choose',\n          originalEvent: evt\n        }); // Chosen item\n\n\n        toggleClass(dragEl, options.chosenClass, true);\n      }; // Disable \"draggable\"\n\n\n      options.ignore.split(',').forEach(function (criteria) {\n        find(dragEl, criteria.trim(), _disableDraggable);\n      });\n      on(ownerDocument, 'dragover', nearestEmptyInsertDetectEvent);\n      on(ownerDocument, 'mousemove', nearestEmptyInsertDetectEvent);\n      on(ownerDocument, 'touchmove', nearestEmptyInsertDetectEvent);\n      on(ownerDocument, 'mouseup', _this._onDrop);\n      on(ownerDocument, 'touchend', _this._onDrop);\n      on(ownerDocument, 'touchcancel', _this._onDrop); // Make dragEl draggable (must be before delay for FireFox)\n\n      if (FireFox && this.nativeDraggable) {\n        this.options.touchStartThreshold = 4;\n        dragEl.draggable = true;\n      }\n\n      pluginEvent('delayStart', this, {\n        evt: evt\n      }); // Delay is impossible for native DnD in Edge or IE\n\n      if (options.delay && (!options.delayOnTouchOnly || touch) && (!this.nativeDraggable || !(Edge || IE11OrLess))) {\n        if (Sortable.eventCanceled) {\n          this._onDrop();\n\n          return;\n        } // If the user moves the pointer or let go the click or touch\n        // before the delay has been reached:\n        // disable the delayed drag\n\n\n        on(ownerDocument, 'mouseup', _this._disableDelayedDrag);\n        on(ownerDocument, 'touchend', _this._disableDelayedDrag);\n        on(ownerDocument, 'touchcancel', _this._disableDelayedDrag);\n        on(ownerDocument, 'mousemove', _this._delayedDragTouchMoveHandler);\n        on(ownerDocument, 'touchmove', _this._delayedDragTouchMoveHandler);\n        options.supportPointer && on(ownerDocument, 'pointermove', _this._delayedDragTouchMoveHandler);\n        _this._dragStartTimer = setTimeout(dragStartFn, options.delay);\n      } else {\n        dragStartFn();\n      }\n    }\n  },\n  _delayedDragTouchMoveHandler: function _delayedDragTouchMoveHandler(\n  /** TouchEvent|PointerEvent **/\n  e) {\n    var touch = e.touches ? e.touches[0] : e;\n\n    if (Math.max(Math.abs(touch.clientX - this._lastX), Math.abs(touch.clientY - this._lastY)) >= Math.floor(this.options.touchStartThreshold / (this.nativeDraggable && window.devicePixelRatio || 1))) {\n      this._disableDelayedDrag();\n    }\n  },\n  _disableDelayedDrag: function _disableDelayedDrag() {\n    dragEl && _disableDraggable(dragEl);\n    clearTimeout(this._dragStartTimer);\n\n    this._disableDelayedDragEvents();\n  },\n  _disableDelayedDragEvents: function _disableDelayedDragEvents() {\n    var ownerDocument = this.el.ownerDocument;\n    off(ownerDocument, 'mouseup', this._disableDelayedDrag);\n    off(ownerDocument, 'touchend', this._disableDelayedDrag);\n    off(ownerDocument, 'touchcancel', this._disableDelayedDrag);\n    off(ownerDocument, 'mousemove', this._delayedDragTouchMoveHandler);\n    off(ownerDocument, 'touchmove', this._delayedDragTouchMoveHandler);\n    off(ownerDocument, 'pointermove', this._delayedDragTouchMoveHandler);\n  },\n  _triggerDragStart: function _triggerDragStart(\n  /** Event */\n  evt,\n  /** Touch */\n  touch) {\n    touch = touch || evt.pointerType == 'touch' && evt;\n\n    if (!this.nativeDraggable || touch) {\n      if (this.options.supportPointer) {\n        on(document, 'pointermove', this._onTouchMove);\n      } else if (touch) {\n        on(document, 'touchmove', this._onTouchMove);\n      } else {\n        on(document, 'mousemove', this._onTouchMove);\n      }\n    } else {\n      on(dragEl, 'dragend', this);\n      on(rootEl, 'dragstart', this._onDragStart);\n    }\n\n    try {\n      if (document.selection) {\n        // Timeout neccessary for IE9\n        _nextTick(function () {\n          document.selection.empty();\n        });\n      } else {\n        window.getSelection().removeAllRanges();\n      }\n    } catch (err) {}\n  },\n  _dragStarted: function _dragStarted(fallback, evt) {\n\n    awaitingDragStarted = false;\n\n    if (rootEl && dragEl) {\n      pluginEvent('dragStarted', this, {\n        evt: evt\n      });\n\n      if (this.nativeDraggable) {\n        on(document, 'dragover', _checkOutsideTargetEl);\n      }\n\n      var options = this.options; // Apply effect\n\n      !fallback && toggleClass(dragEl, options.dragClass, false);\n      toggleClass(dragEl, options.ghostClass, true);\n      Sortable.active = this;\n      fallback && this._appendGhost(); // Drag start event\n\n      _dispatchEvent({\n        sortable: this,\n        name: 'start',\n        originalEvent: evt\n      });\n    } else {\n      this._nulling();\n    }\n  },\n  _emulateDragOver: function _emulateDragOver() {\n    if (touchEvt) {\n      this._lastX = touchEvt.clientX;\n      this._lastY = touchEvt.clientY;\n\n      _hideGhostForTarget();\n\n      var target = document.elementFromPoint(touchEvt.clientX, touchEvt.clientY);\n      var parent = target;\n\n      while (target && target.shadowRoot) {\n        target = target.shadowRoot.elementFromPoint(touchEvt.clientX, touchEvt.clientY);\n        if (target === parent) break;\n        parent = target;\n      }\n\n      dragEl.parentNode[expando]._isOutsideThisEl(target);\n\n      if (parent) {\n        do {\n          if (parent[expando]) {\n            var inserted = void 0;\n            inserted = parent[expando]._onDragOver({\n              clientX: touchEvt.clientX,\n              clientY: touchEvt.clientY,\n              target: target,\n              rootEl: parent\n            });\n\n            if (inserted && !this.options.dragoverBubble) {\n              break;\n            }\n          }\n\n          target = parent; // store last element\n        }\n        /* jshint boss:true */\n        while (parent = parent.parentNode);\n      }\n\n      _unhideGhostForTarget();\n    }\n  },\n  _onTouchMove: function _onTouchMove(\n  /**TouchEvent*/\n  evt) {\n    if (tapEvt) {\n      var options = this.options,\n          fallbackTolerance = options.fallbackTolerance,\n          fallbackOffset = options.fallbackOffset,\n          touch = evt.touches ? evt.touches[0] : evt,\n          ghostMatrix = ghostEl && matrix(ghostEl, true),\n          scaleX = ghostEl && ghostMatrix && ghostMatrix.a,\n          scaleY = ghostEl && ghostMatrix && ghostMatrix.d,\n          relativeScrollOffset = PositionGhostAbsolutely && ghostRelativeParent && getRelativeScrollOffset(ghostRelativeParent),\n          dx = (touch.clientX - tapEvt.clientX + fallbackOffset.x) / (scaleX || 1) + (relativeScrollOffset ? relativeScrollOffset[0] - ghostRelativeParentInitialScroll[0] : 0) / (scaleX || 1),\n          dy = (touch.clientY - tapEvt.clientY + fallbackOffset.y) / (scaleY || 1) + (relativeScrollOffset ? relativeScrollOffset[1] - ghostRelativeParentInitialScroll[1] : 0) / (scaleY || 1); // only set the status to dragging, when we are actually dragging\n\n      if (!Sortable.active && !awaitingDragStarted) {\n        if (fallbackTolerance && Math.max(Math.abs(touch.clientX - this._lastX), Math.abs(touch.clientY - this._lastY)) < fallbackTolerance) {\n          return;\n        }\n\n        this._onDragStart(evt, true);\n      }\n\n      if (ghostEl) {\n        if (ghostMatrix) {\n          ghostMatrix.e += dx - (lastDx || 0);\n          ghostMatrix.f += dy - (lastDy || 0);\n        } else {\n          ghostMatrix = {\n            a: 1,\n            b: 0,\n            c: 0,\n            d: 1,\n            e: dx,\n            f: dy\n          };\n        }\n\n        var cssMatrix = \"matrix(\".concat(ghostMatrix.a, \",\").concat(ghostMatrix.b, \",\").concat(ghostMatrix.c, \",\").concat(ghostMatrix.d, \",\").concat(ghostMatrix.e, \",\").concat(ghostMatrix.f, \")\");\n        css(ghostEl, 'webkitTransform', cssMatrix);\n        css(ghostEl, 'mozTransform', cssMatrix);\n        css(ghostEl, 'msTransform', cssMatrix);\n        css(ghostEl, 'transform', cssMatrix);\n        lastDx = dx;\n        lastDy = dy;\n        touchEvt = touch;\n      }\n\n      evt.cancelable && evt.preventDefault();\n    }\n  },\n  _appendGhost: function _appendGhost() {\n    // Bug if using scale(): https://stackoverflow.com/questions/2637058\n    // Not being adjusted for\n    if (!ghostEl) {\n      var container = this.options.fallbackOnBody ? document.body : rootEl,\n          rect = getRect(dragEl, true, PositionGhostAbsolutely, true, container),\n          options = this.options; // Position absolutely\n\n      if (PositionGhostAbsolutely) {\n        // Get relatively positioned parent\n        ghostRelativeParent = container;\n\n        while (css(ghostRelativeParent, 'position') === 'static' && css(ghostRelativeParent, 'transform') === 'none' && ghostRelativeParent !== document) {\n          ghostRelativeParent = ghostRelativeParent.parentNode;\n        }\n\n        if (ghostRelativeParent !== document.body && ghostRelativeParent !== document.documentElement) {\n          if (ghostRelativeParent === document) ghostRelativeParent = getWindowScrollingElement();\n          rect.top += ghostRelativeParent.scrollTop;\n          rect.left += ghostRelativeParent.scrollLeft;\n        } else {\n          ghostRelativeParent = getWindowScrollingElement();\n        }\n\n        ghostRelativeParentInitialScroll = getRelativeScrollOffset(ghostRelativeParent);\n      }\n\n      ghostEl = dragEl.cloneNode(true);\n      toggleClass(ghostEl, options.ghostClass, false);\n      toggleClass(ghostEl, options.fallbackClass, true);\n      toggleClass(ghostEl, options.dragClass, true);\n      css(ghostEl, 'transition', '');\n      css(ghostEl, 'transform', '');\n      css(ghostEl, 'box-sizing', 'border-box');\n      css(ghostEl, 'margin', 0);\n      css(ghostEl, 'top', rect.top);\n      css(ghostEl, 'left', rect.left);\n      css(ghostEl, 'width', rect.width);\n      css(ghostEl, 'height', rect.height);\n      css(ghostEl, 'opacity', '0.8');\n      css(ghostEl, 'position', PositionGhostAbsolutely ? 'absolute' : 'fixed');\n      css(ghostEl, 'zIndex', '100000');\n      css(ghostEl, 'pointerEvents', 'none');\n      Sortable.ghost = ghostEl;\n      container.appendChild(ghostEl); // Set transform-origin\n\n      css(ghostEl, 'transform-origin', tapDistanceLeft / parseInt(ghostEl.style.width) * 100 + '% ' + tapDistanceTop / parseInt(ghostEl.style.height) * 100 + '%');\n    }\n  },\n  _onDragStart: function _onDragStart(\n  /**Event*/\n  evt,\n  /**boolean*/\n  fallback) {\n    var _this = this;\n\n    var dataTransfer = evt.dataTransfer;\n    var options = _this.options;\n    pluginEvent('dragStart', this, {\n      evt: evt\n    });\n\n    if (Sortable.eventCanceled) {\n      this._onDrop();\n\n      return;\n    }\n\n    pluginEvent('setupClone', this);\n\n    if (!Sortable.eventCanceled) {\n      cloneEl = clone(dragEl);\n      cloneEl.removeAttribute(\"id\");\n      cloneEl.draggable = false;\n      cloneEl.style['will-change'] = '';\n\n      this._hideClone();\n\n      toggleClass(cloneEl, this.options.chosenClass, false);\n      Sortable.clone = cloneEl;\n    } // #1143: IFrame support workaround\n\n\n    _this.cloneId = _nextTick(function () {\n      pluginEvent('clone', _this);\n      if (Sortable.eventCanceled) return;\n\n      if (!_this.options.removeCloneOnHide) {\n        rootEl.insertBefore(cloneEl, dragEl);\n      }\n\n      _this._hideClone();\n\n      _dispatchEvent({\n        sortable: _this,\n        name: 'clone'\n      });\n    });\n    !fallback && toggleClass(dragEl, options.dragClass, true); // Set proper drop events\n\n    if (fallback) {\n      ignoreNextClick = true;\n      _this._loopId = setInterval(_this._emulateDragOver, 50);\n    } else {\n      // Undo what was set in _prepareDragStart before drag started\n      off(document, 'mouseup', _this._onDrop);\n      off(document, 'touchend', _this._onDrop);\n      off(document, 'touchcancel', _this._onDrop);\n\n      if (dataTransfer) {\n        dataTransfer.effectAllowed = 'move';\n        options.setData && options.setData.call(_this, dataTransfer, dragEl);\n      }\n\n      on(document, 'drop', _this); // #1276 fix:\n\n      css(dragEl, 'transform', 'translateZ(0)');\n    }\n\n    awaitingDragStarted = true;\n    _this._dragStartId = _nextTick(_this._dragStarted.bind(_this, fallback, evt));\n    on(document, 'selectstart', _this);\n    moved = true;\n\n    if (Safari) {\n      css(document.body, 'user-select', 'none');\n    }\n  },\n  // Returns true - if no further action is needed (either inserted or another condition)\n  _onDragOver: function _onDragOver(\n  /**Event*/\n  evt) {\n    var el = this.el,\n        target = evt.target,\n        dragRect,\n        targetRect,\n        revert,\n        options = this.options,\n        group = options.group,\n        activeSortable = Sortable.active,\n        isOwner = activeGroup === group,\n        canSort = options.sort,\n        fromSortable = putSortable || activeSortable,\n        vertical,\n        _this = this,\n        completedFired = false;\n\n    if (_silent) return;\n\n    function dragOverEvent(name, extra) {\n      pluginEvent(name, _this, _objectSpread2({\n        evt: evt,\n        isOwner: isOwner,\n        axis: vertical ? 'vertical' : 'horizontal',\n        revert: revert,\n        dragRect: dragRect,\n        targetRect: targetRect,\n        canSort: canSort,\n        fromSortable: fromSortable,\n        target: target,\n        completed: completed,\n        onMove: function onMove(target, after) {\n          return _onMove(rootEl, el, dragEl, dragRect, target, getRect(target), evt, after);\n        },\n        changed: changed\n      }, extra));\n    } // Capture animation state\n\n\n    function capture() {\n      dragOverEvent('dragOverAnimationCapture');\n\n      _this.captureAnimationState();\n\n      if (_this !== fromSortable) {\n        fromSortable.captureAnimationState();\n      }\n    } // Return invocation when dragEl is inserted (or completed)\n\n\n    function completed(insertion) {\n      dragOverEvent('dragOverCompleted', {\n        insertion: insertion\n      });\n\n      if (insertion) {\n        // Clones must be hidden before folding animation to capture dragRectAbsolute properly\n        if (isOwner) {\n          activeSortable._hideClone();\n        } else {\n          activeSortable._showClone(_this);\n        }\n\n        if (_this !== fromSortable) {\n          // Set ghost class to new sortable's ghost class\n          toggleClass(dragEl, putSortable ? putSortable.options.ghostClass : activeSortable.options.ghostClass, false);\n          toggleClass(dragEl, options.ghostClass, true);\n        }\n\n        if (putSortable !== _this && _this !== Sortable.active) {\n          putSortable = _this;\n        } else if (_this === Sortable.active && putSortable) {\n          putSortable = null;\n        } // Animation\n\n\n        if (fromSortable === _this) {\n          _this._ignoreWhileAnimating = target;\n        }\n\n        _this.animateAll(function () {\n          dragOverEvent('dragOverAnimationComplete');\n          _this._ignoreWhileAnimating = null;\n        });\n\n        if (_this !== fromSortable) {\n          fromSortable.animateAll();\n          fromSortable._ignoreWhileAnimating = null;\n        }\n      } // Null lastTarget if it is not inside a previously swapped element\n\n\n      if (target === dragEl && !dragEl.animated || target === el && !target.animated) {\n        lastTarget = null;\n      } // no bubbling and not fallback\n\n\n      if (!options.dragoverBubble && !evt.rootEl && target !== document) {\n        dragEl.parentNode[expando]._isOutsideThisEl(evt.target); // Do not detect for empty insert if already inserted\n\n\n        !insertion && nearestEmptyInsertDetectEvent(evt);\n      }\n\n      !options.dragoverBubble && evt.stopPropagation && evt.stopPropagation();\n      return completedFired = true;\n    } // Call when dragEl has been inserted\n\n\n    function changed() {\n      newIndex = index(dragEl);\n      newDraggableIndex = index(dragEl, options.draggable);\n\n      _dispatchEvent({\n        sortable: _this,\n        name: 'change',\n        toEl: el,\n        newIndex: newIndex,\n        newDraggableIndex: newDraggableIndex,\n        originalEvent: evt\n      });\n    }\n\n    if (evt.preventDefault !== void 0) {\n      evt.cancelable && evt.preventDefault();\n    }\n\n    target = closest(target, options.draggable, el, true);\n    dragOverEvent('dragOver');\n    if (Sortable.eventCanceled) return completedFired;\n\n    if (dragEl.contains(evt.target) || target.animated && target.animatingX && target.animatingY || _this._ignoreWhileAnimating === target) {\n      return completed(false);\n    }\n\n    ignoreNextClick = false;\n\n    if (activeSortable && !options.disabled && (isOwner ? canSort || (revert = parentEl !== rootEl) // Reverting item into the original list\n    : putSortable === this || (this.lastPutMode = activeGroup.checkPull(this, activeSortable, dragEl, evt)) && group.checkPut(this, activeSortable, dragEl, evt))) {\n      vertical = this._getDirection(evt, target) === 'vertical';\n      dragRect = getRect(dragEl);\n      dragOverEvent('dragOverValid');\n      if (Sortable.eventCanceled) return completedFired;\n\n      if (revert) {\n        parentEl = rootEl; // actualization\n\n        capture();\n\n        this._hideClone();\n\n        dragOverEvent('revert');\n\n        if (!Sortable.eventCanceled) {\n          if (nextEl) {\n            rootEl.insertBefore(dragEl, nextEl);\n          } else {\n            rootEl.appendChild(dragEl);\n          }\n        }\n\n        return completed(true);\n      }\n\n      var elLastChild = lastChild(el, options.draggable);\n\n      if (!elLastChild || _ghostIsLast(evt, vertical, this) && !elLastChild.animated) {\n        // Insert to end of list\n        // If already at end of list: Do not insert\n        if (elLastChild === dragEl) {\n          return completed(false);\n        } // if there is a last element, it is the target\n\n\n        if (elLastChild && el === evt.target) {\n          target = elLastChild;\n        }\n\n        if (target) {\n          targetRect = getRect(target);\n        }\n\n        if (_onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, !!target) !== false) {\n          capture();\n\n          if (elLastChild && elLastChild.nextSibling) {\n            // the last draggable element is not the last node\n            el.insertBefore(dragEl, elLastChild.nextSibling);\n          } else {\n            el.appendChild(dragEl);\n          }\n\n          parentEl = el; // actualization\n\n          changed();\n          return completed(true);\n        }\n      } else if (elLastChild && _ghostIsFirst(evt, vertical, this)) {\n        // Insert to start of list\n        var firstChild = getChild(el, 0, options, true);\n\n        if (firstChild === dragEl) {\n          return completed(false);\n        }\n\n        target = firstChild;\n        targetRect = getRect(target);\n\n        if (_onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, false) !== false) {\n          capture();\n          el.insertBefore(dragEl, firstChild);\n          parentEl = el; // actualization\n\n          changed();\n          return completed(true);\n        }\n      } else if (target.parentNode === el) {\n        targetRect = getRect(target);\n        var direction = 0,\n            targetBeforeFirstSwap,\n            differentLevel = dragEl.parentNode !== el,\n            differentRowCol = !_dragElInRowColumn(dragEl.animated && dragEl.toRect || dragRect, target.animated && target.toRect || targetRect, vertical),\n            side1 = vertical ? 'top' : 'left',\n            scrolledPastTop = isScrolledPast(target, 'top', 'top') || isScrolledPast(dragEl, 'top', 'top'),\n            scrollBefore = scrolledPastTop ? scrolledPastTop.scrollTop : void 0;\n\n        if (lastTarget !== target) {\n          targetBeforeFirstSwap = targetRect[side1];\n          pastFirstInvertThresh = false;\n          isCircumstantialInvert = !differentRowCol && options.invertSwap || differentLevel;\n        }\n\n        direction = _getSwapDirection(evt, target, targetRect, vertical, differentRowCol ? 1 : options.swapThreshold, options.invertedSwapThreshold == null ? options.swapThreshold : options.invertedSwapThreshold, isCircumstantialInvert, lastTarget === target);\n        var sibling;\n\n        if (direction !== 0) {\n          // Check if target is beside dragEl in respective direction (ignoring hidden elements)\n          var dragIndex = index(dragEl);\n\n          do {\n            dragIndex -= direction;\n            sibling = parentEl.children[dragIndex];\n          } while (sibling && (css(sibling, 'display') === 'none' || sibling === ghostEl));\n        } // If dragEl is already beside target: Do not insert\n\n\n        if (direction === 0 || sibling === target) {\n          return completed(false);\n        }\n\n        lastTarget = target;\n        lastDirection = direction;\n        var nextSibling = target.nextElementSibling,\n            after = false;\n        after = direction === 1;\n\n        var moveVector = _onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, after);\n\n        if (moveVector !== false) {\n          if (moveVector === 1 || moveVector === -1) {\n            after = moveVector === 1;\n          }\n\n          _silent = true;\n          setTimeout(_unsilent, 30);\n          capture();\n\n          if (after && !nextSibling) {\n            el.appendChild(dragEl);\n          } else {\n            target.parentNode.insertBefore(dragEl, after ? nextSibling : target);\n          } // Undo chrome's scroll adjustment (has no effect on other browsers)\n\n\n          if (scrolledPastTop) {\n            scrollBy(scrolledPastTop, 0, scrollBefore - scrolledPastTop.scrollTop);\n          }\n\n          parentEl = dragEl.parentNode; // actualization\n          // must be done before animation\n\n          if (targetBeforeFirstSwap !== undefined && !isCircumstantialInvert) {\n            targetMoveDistance = Math.abs(targetBeforeFirstSwap - getRect(target)[side1]);\n          }\n\n          changed();\n          return completed(true);\n        }\n      }\n\n      if (el.contains(dragEl)) {\n        return completed(false);\n      }\n    }\n\n    return false;\n  },\n  _ignoreWhileAnimating: null,\n  _offMoveEvents: function _offMoveEvents() {\n    off(document, 'mousemove', this._onTouchMove);\n    off(document, 'touchmove', this._onTouchMove);\n    off(document, 'pointermove', this._onTouchMove);\n    off(document, 'dragover', nearestEmptyInsertDetectEvent);\n    off(document, 'mousemove', nearestEmptyInsertDetectEvent);\n    off(document, 'touchmove', nearestEmptyInsertDetectEvent);\n  },\n  _offUpEvents: function _offUpEvents() {\n    var ownerDocument = this.el.ownerDocument;\n    off(ownerDocument, 'mouseup', this._onDrop);\n    off(ownerDocument, 'touchend', this._onDrop);\n    off(ownerDocument, 'pointerup', this._onDrop);\n    off(ownerDocument, 'touchcancel', this._onDrop);\n    off(document, 'selectstart', this);\n  },\n  _onDrop: function _onDrop(\n  /**Event*/\n  evt) {\n    var el = this.el,\n        options = this.options; // Get the index of the dragged element within its parent\n\n    newIndex = index(dragEl);\n    newDraggableIndex = index(dragEl, options.draggable);\n    pluginEvent('drop', this, {\n      evt: evt\n    });\n    parentEl = dragEl && dragEl.parentNode; // Get again after plugin event\n\n    newIndex = index(dragEl);\n    newDraggableIndex = index(dragEl, options.draggable);\n\n    if (Sortable.eventCanceled) {\n      this._nulling();\n\n      return;\n    }\n\n    awaitingDragStarted = false;\n    isCircumstantialInvert = false;\n    pastFirstInvertThresh = false;\n    clearInterval(this._loopId);\n    clearTimeout(this._dragStartTimer);\n\n    _cancelNextTick(this.cloneId);\n\n    _cancelNextTick(this._dragStartId); // Unbind events\n\n\n    if (this.nativeDraggable) {\n      off(document, 'drop', this);\n      off(el, 'dragstart', this._onDragStart);\n    }\n\n    this._offMoveEvents();\n\n    this._offUpEvents();\n\n    if (Safari) {\n      css(document.body, 'user-select', '');\n    }\n\n    css(dragEl, 'transform', '');\n\n    if (evt) {\n      if (moved) {\n        evt.cancelable && evt.preventDefault();\n        !options.dropBubble && evt.stopPropagation();\n      }\n\n      ghostEl && ghostEl.parentNode && ghostEl.parentNode.removeChild(ghostEl);\n\n      if (rootEl === parentEl || putSortable && putSortable.lastPutMode !== 'clone') {\n        // Remove clone(s)\n        cloneEl && cloneEl.parentNode && cloneEl.parentNode.removeChild(cloneEl);\n      }\n\n      if (dragEl) {\n        if (this.nativeDraggable) {\n          off(dragEl, 'dragend', this);\n        }\n\n        _disableDraggable(dragEl);\n\n        dragEl.style['will-change'] = ''; // Remove classes\n        // ghostClass is added in dragStarted\n\n        if (moved && !awaitingDragStarted) {\n          toggleClass(dragEl, putSortable ? putSortable.options.ghostClass : this.options.ghostClass, false);\n        }\n\n        toggleClass(dragEl, this.options.chosenClass, false); // Drag stop event\n\n        _dispatchEvent({\n          sortable: this,\n          name: 'unchoose',\n          toEl: parentEl,\n          newIndex: null,\n          newDraggableIndex: null,\n          originalEvent: evt\n        });\n\n        if (rootEl !== parentEl) {\n          if (newIndex >= 0) {\n            // Add event\n            _dispatchEvent({\n              rootEl: parentEl,\n              name: 'add',\n              toEl: parentEl,\n              fromEl: rootEl,\n              originalEvent: evt\n            }); // Remove event\n\n\n            _dispatchEvent({\n              sortable: this,\n              name: 'remove',\n              toEl: parentEl,\n              originalEvent: evt\n            }); // drag from one list and drop into another\n\n\n            _dispatchEvent({\n              rootEl: parentEl,\n              name: 'sort',\n              toEl: parentEl,\n              fromEl: rootEl,\n              originalEvent: evt\n            });\n\n            _dispatchEvent({\n              sortable: this,\n              name: 'sort',\n              toEl: parentEl,\n              originalEvent: evt\n            });\n          }\n\n          putSortable && putSortable.save();\n        } else {\n          if (newIndex !== oldIndex) {\n            if (newIndex >= 0) {\n              // drag & drop within the same list\n              _dispatchEvent({\n                sortable: this,\n                name: 'update',\n                toEl: parentEl,\n                originalEvent: evt\n              });\n\n              _dispatchEvent({\n                sortable: this,\n                name: 'sort',\n                toEl: parentEl,\n                originalEvent: evt\n              });\n            }\n          }\n        }\n\n        if (Sortable.active) {\n          /* jshint eqnull:true */\n          if (newIndex == null || newIndex === -1) {\n            newIndex = oldIndex;\n            newDraggableIndex = oldDraggableIndex;\n          }\n\n          _dispatchEvent({\n            sortable: this,\n            name: 'end',\n            toEl: parentEl,\n            originalEvent: evt\n          }); // Save sorting\n\n\n          this.save();\n        }\n      }\n    }\n\n    this._nulling();\n  },\n  _nulling: function _nulling() {\n    pluginEvent('nulling', this);\n    rootEl = dragEl = parentEl = ghostEl = nextEl = cloneEl = lastDownEl = cloneHidden = tapEvt = touchEvt = moved = newIndex = newDraggableIndex = oldIndex = oldDraggableIndex = lastTarget = lastDirection = putSortable = activeGroup = Sortable.dragged = Sortable.ghost = Sortable.clone = Sortable.active = null;\n    savedInputChecked.forEach(function (el) {\n      el.checked = true;\n    });\n    savedInputChecked.length = lastDx = lastDy = 0;\n  },\n  handleEvent: function handleEvent(\n  /**Event*/\n  evt) {\n    switch (evt.type) {\n      case 'drop':\n      case 'dragend':\n        this._onDrop(evt);\n\n        break;\n\n      case 'dragenter':\n      case 'dragover':\n        if (dragEl) {\n          this._onDragOver(evt);\n\n          _globalDragOver(evt);\n        }\n\n        break;\n\n      case 'selectstart':\n        evt.preventDefault();\n        break;\n    }\n  },\n\n  /**\r\n   * Serializes the item into an array of string.\r\n   * @returns {String[]}\r\n   */\n  toArray: function toArray() {\n    var order = [],\n        el,\n        children = this.el.children,\n        i = 0,\n        n = children.length,\n        options = this.options;\n\n    for (; i < n; i++) {\n      el = children[i];\n\n      if (closest(el, options.draggable, this.el, false)) {\n        order.push(el.getAttribute(options.dataIdAttr) || _generateId(el));\n      }\n    }\n\n    return order;\n  },\n\n  /**\r\n   * Sorts the elements according to the array.\r\n   * @param  {String[]}  order  order of the items\r\n   */\n  sort: function sort(order, useAnimation) {\n    var items = {},\n        rootEl = this.el;\n    this.toArray().forEach(function (id, i) {\n      var el = rootEl.children[i];\n\n      if (closest(el, this.options.draggable, rootEl, false)) {\n        items[id] = el;\n      }\n    }, this);\n    useAnimation && this.captureAnimationState();\n    order.forEach(function (id) {\n      if (items[id]) {\n        rootEl.removeChild(items[id]);\n        rootEl.appendChild(items[id]);\n      }\n    });\n    useAnimation && this.animateAll();\n  },\n\n  /**\r\n   * Save the current sorting\r\n   */\n  save: function save() {\n    var store = this.options.store;\n    store && store.set && store.set(this);\n  },\n\n  /**\r\n   * For each element in the set, get the first element that matches the selector by testing the element itself and traversing up through its ancestors in the DOM tree.\r\n   * @param   {HTMLElement}  el\r\n   * @param   {String}       [selector]  default: `options.draggable`\r\n   * @returns {HTMLElement|null}\r\n   */\n  closest: function closest$1(el, selector) {\n    return closest(el, selector || this.options.draggable, this.el, false);\n  },\n\n  /**\r\n   * Set/get option\r\n   * @param   {string} name\r\n   * @param   {*}      [value]\r\n   * @returns {*}\r\n   */\n  option: function option(name, value) {\n    var options = this.options;\n\n    if (value === void 0) {\n      return options[name];\n    } else {\n      var modifiedValue = PluginManager.modifyOption(this, name, value);\n\n      if (typeof modifiedValue !== 'undefined') {\n        options[name] = modifiedValue;\n      } else {\n        options[name] = value;\n      }\n\n      if (name === 'group') {\n        _prepareGroup(options);\n      }\n    }\n  },\n\n  /**\r\n   * Destroy\r\n   */\n  destroy: function destroy() {\n    pluginEvent('destroy', this);\n    var el = this.el;\n    el[expando] = null;\n    off(el, 'mousedown', this._onTapStart);\n    off(el, 'touchstart', this._onTapStart);\n    off(el, 'pointerdown', this._onTapStart);\n\n    if (this.nativeDraggable) {\n      off(el, 'dragover', this);\n      off(el, 'dragenter', this);\n    } // Remove draggable attributes\n\n\n    Array.prototype.forEach.call(el.querySelectorAll('[draggable]'), function (el) {\n      el.removeAttribute('draggable');\n    });\n\n    this._onDrop();\n\n    this._disableDelayedDragEvents();\n\n    sortables.splice(sortables.indexOf(this.el), 1);\n    this.el = el = null;\n  },\n  _hideClone: function _hideClone() {\n    if (!cloneHidden) {\n      pluginEvent('hideClone', this);\n      if (Sortable.eventCanceled) return;\n      css(cloneEl, 'display', 'none');\n\n      if (this.options.removeCloneOnHide && cloneEl.parentNode) {\n        cloneEl.parentNode.removeChild(cloneEl);\n      }\n\n      cloneHidden = true;\n    }\n  },\n  _showClone: function _showClone(putSortable) {\n    if (putSortable.lastPutMode !== 'clone') {\n      this._hideClone();\n\n      return;\n    }\n\n    if (cloneHidden) {\n      pluginEvent('showClone', this);\n      if (Sortable.eventCanceled) return; // show clone at dragEl or original position\n\n      if (dragEl.parentNode == rootEl && !this.options.group.revertClone) {\n        rootEl.insertBefore(cloneEl, dragEl);\n      } else if (nextEl) {\n        rootEl.insertBefore(cloneEl, nextEl);\n      } else {\n        rootEl.appendChild(cloneEl);\n      }\n\n      if (this.options.group.revertClone) {\n        this.animate(dragEl, cloneEl);\n      }\n\n      css(cloneEl, 'display', '');\n      cloneHidden = false;\n    }\n  }\n};\n\nfunction _globalDragOver(\n/**Event*/\nevt) {\n  if (evt.dataTransfer) {\n    evt.dataTransfer.dropEffect = 'move';\n  }\n\n  evt.cancelable && evt.preventDefault();\n}\n\nfunction _onMove(fromEl, toEl, dragEl, dragRect, targetEl, targetRect, originalEvent, willInsertAfter) {\n  var evt,\n      sortable = fromEl[expando],\n      onMoveFn = sortable.options.onMove,\n      retVal; // Support for new CustomEvent feature\n\n  if (window.CustomEvent && !IE11OrLess && !Edge) {\n    evt = new CustomEvent('move', {\n      bubbles: true,\n      cancelable: true\n    });\n  } else {\n    evt = document.createEvent('Event');\n    evt.initEvent('move', true, true);\n  }\n\n  evt.to = toEl;\n  evt.from = fromEl;\n  evt.dragged = dragEl;\n  evt.draggedRect = dragRect;\n  evt.related = targetEl || toEl;\n  evt.relatedRect = targetRect || getRect(toEl);\n  evt.willInsertAfter = willInsertAfter;\n  evt.originalEvent = originalEvent;\n  fromEl.dispatchEvent(evt);\n\n  if (onMoveFn) {\n    retVal = onMoveFn.call(sortable, evt, originalEvent);\n  }\n\n  return retVal;\n}\n\nfunction _disableDraggable(el) {\n  el.draggable = false;\n}\n\nfunction _unsilent() {\n  _silent = false;\n}\n\nfunction _ghostIsFirst(evt, vertical, sortable) {\n  var rect = getRect(getChild(sortable.el, 0, sortable.options, true));\n  var spacer = 10;\n  return vertical ? evt.clientX < rect.left - spacer || evt.clientY < rect.top && evt.clientX < rect.right : evt.clientY < rect.top - spacer || evt.clientY < rect.bottom && evt.clientX < rect.left;\n}\n\nfunction _ghostIsLast(evt, vertical, sortable) {\n  var rect = getRect(lastChild(sortable.el, sortable.options.draggable));\n  var spacer = 10;\n  return vertical ? evt.clientX > rect.right + spacer || evt.clientX <= rect.right && evt.clientY > rect.bottom && evt.clientX >= rect.left : evt.clientX > rect.right && evt.clientY > rect.top || evt.clientX <= rect.right && evt.clientY > rect.bottom + spacer;\n}\n\nfunction _getSwapDirection(evt, target, targetRect, vertical, swapThreshold, invertedSwapThreshold, invertSwap, isLastTarget) {\n  var mouseOnAxis = vertical ? evt.clientY : evt.clientX,\n      targetLength = vertical ? targetRect.height : targetRect.width,\n      targetS1 = vertical ? targetRect.top : targetRect.left,\n      targetS2 = vertical ? targetRect.bottom : targetRect.right,\n      invert = false;\n\n  if (!invertSwap) {\n    // Never invert or create dragEl shadow when target movemenet causes mouse to move past the end of regular swapThreshold\n    if (isLastTarget && targetMoveDistance < targetLength * swapThreshold) {\n      // multiplied only by swapThreshold because mouse will already be inside target by (1 - threshold) * targetLength / 2\n      // check if past first invert threshold on side opposite of lastDirection\n      if (!pastFirstInvertThresh && (lastDirection === 1 ? mouseOnAxis > targetS1 + targetLength * invertedSwapThreshold / 2 : mouseOnAxis < targetS2 - targetLength * invertedSwapThreshold / 2)) {\n        // past first invert threshold, do not restrict inverted threshold to dragEl shadow\n        pastFirstInvertThresh = true;\n      }\n\n      if (!pastFirstInvertThresh) {\n        // dragEl shadow (target move distance shadow)\n        if (lastDirection === 1 ? mouseOnAxis < targetS1 + targetMoveDistance // over dragEl shadow\n        : mouseOnAxis > targetS2 - targetMoveDistance) {\n          return -lastDirection;\n        }\n      } else {\n        invert = true;\n      }\n    } else {\n      // Regular\n      if (mouseOnAxis > targetS1 + targetLength * (1 - swapThreshold) / 2 && mouseOnAxis < targetS2 - targetLength * (1 - swapThreshold) / 2) {\n        return _getInsertDirection(target);\n      }\n    }\n  }\n\n  invert = invert || invertSwap;\n\n  if (invert) {\n    // Invert of regular\n    if (mouseOnAxis < targetS1 + targetLength * invertedSwapThreshold / 2 || mouseOnAxis > targetS2 - targetLength * invertedSwapThreshold / 2) {\n      return mouseOnAxis > targetS1 + targetLength / 2 ? 1 : -1;\n    }\n  }\n\n  return 0;\n}\n/**\r\n * Gets the direction dragEl must be swapped relative to target in order to make it\r\n * seem that dragEl has been \"inserted\" into that element's position\r\n * @param  {HTMLElement} target       The target whose position dragEl is being inserted at\r\n * @return {Number}                   Direction dragEl must be swapped\r\n */\n\n\nfunction _getInsertDirection(target) {\n  if (index(dragEl) < index(target)) {\n    return 1;\n  } else {\n    return -1;\n  }\n}\n/**\r\n * Generate id\r\n * @param   {HTMLElement} el\r\n * @returns {String}\r\n * @private\r\n */\n\n\nfunction _generateId(el) {\n  var str = el.tagName + el.className + el.src + el.href + el.textContent,\n      i = str.length,\n      sum = 0;\n\n  while (i--) {\n    sum += str.charCodeAt(i);\n  }\n\n  return sum.toString(36);\n}\n\nfunction _saveInputCheckedState(root) {\n  savedInputChecked.length = 0;\n  var inputs = root.getElementsByTagName('input');\n  var idx = inputs.length;\n\n  while (idx--) {\n    var el = inputs[idx];\n    el.checked && savedInputChecked.push(el);\n  }\n}\n\nfunction _nextTick(fn) {\n  return setTimeout(fn, 0);\n}\n\nfunction _cancelNextTick(id) {\n  return clearTimeout(id);\n} // Fixed #973:\n\n\nif (documentExists) {\n  on(document, 'touchmove', function (evt) {\n    if ((Sortable.active || awaitingDragStarted) && evt.cancelable) {\n      evt.preventDefault();\n    }\n  });\n} // Export utils\n\n\nSortable.utils = {\n  on: on,\n  off: off,\n  css: css,\n  find: find,\n  is: function is(el, selector) {\n    return !!closest(el, selector, el, false);\n  },\n  extend: extend,\n  throttle: throttle,\n  closest: closest,\n  toggleClass: toggleClass,\n  clone: clone,\n  index: index,\n  nextTick: _nextTick,\n  cancelNextTick: _cancelNextTick,\n  detectDirection: _detectDirection,\n  getChild: getChild\n};\n/**\r\n * Get the Sortable instance of an element\r\n * @param  {HTMLElement} element The element\r\n * @return {Sortable|undefined}         The instance of Sortable\r\n */\n\nSortable.get = function (element) {\n  return element[expando];\n};\n/**\r\n * Mount a plugin to Sortable\r\n * @param  {...SortablePlugin|SortablePlugin[]} plugins       Plugins being mounted\r\n */\n\n\nSortable.mount = function () {\n  for (var _len = arguments.length, plugins = new Array(_len), _key = 0; _key < _len; _key++) {\n    plugins[_key] = arguments[_key];\n  }\n\n  if (plugins[0].constructor === Array) plugins = plugins[0];\n  plugins.forEach(function (plugin) {\n    if (!plugin.prototype || !plugin.prototype.constructor) {\n      throw \"Sortable: Mounted plugin must be a constructor function, not \".concat({}.toString.call(plugin));\n    }\n\n    if (plugin.utils) Sortable.utils = _objectSpread2(_objectSpread2({}, Sortable.utils), plugin.utils);\n    PluginManager.mount(plugin);\n  });\n};\n/**\r\n * Create sortable instance\r\n * @param {HTMLElement}  el\r\n * @param {Object}      [options]\r\n */\n\n\nSortable.create = function (el, options) {\n  return new Sortable(el, options);\n}; // Export\n\n\nSortable.version = version;\n\nvar autoScrolls = [],\n    scrollEl,\n    scrollRootEl,\n    scrolling = false,\n    lastAutoScrollX,\n    lastAutoScrollY,\n    touchEvt$1,\n    pointerElemChangedInterval;\n\nfunction AutoScrollPlugin() {\n  function AutoScroll() {\n    this.defaults = {\n      scroll: true,\n      forceAutoScrollFallback: false,\n      scrollSensitivity: 30,\n      scrollSpeed: 10,\n      bubbleScroll: true\n    }; // Bind all private methods\n\n    for (var fn in this) {\n      if (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n        this[fn] = this[fn].bind(this);\n      }\n    }\n  }\n\n  AutoScroll.prototype = {\n    dragStarted: function dragStarted(_ref) {\n      var originalEvent = _ref.originalEvent;\n\n      if (this.sortable.nativeDraggable) {\n        on(document, 'dragover', this._handleAutoScroll);\n      } else {\n        if (this.options.supportPointer) {\n          on(document, 'pointermove', this._handleFallbackAutoScroll);\n        } else if (originalEvent.touches) {\n          on(document, 'touchmove', this._handleFallbackAutoScroll);\n        } else {\n          on(document, 'mousemove', this._handleFallbackAutoScroll);\n        }\n      }\n    },\n    dragOverCompleted: function dragOverCompleted(_ref2) {\n      var originalEvent = _ref2.originalEvent;\n\n      // For when bubbling is canceled and using fallback (fallback 'touchmove' always reached)\n      if (!this.options.dragOverBubble && !originalEvent.rootEl) {\n        this._handleAutoScroll(originalEvent);\n      }\n    },\n    drop: function drop() {\n      if (this.sortable.nativeDraggable) {\n        off(document, 'dragover', this._handleAutoScroll);\n      } else {\n        off(document, 'pointermove', this._handleFallbackAutoScroll);\n        off(document, 'touchmove', this._handleFallbackAutoScroll);\n        off(document, 'mousemove', this._handleFallbackAutoScroll);\n      }\n\n      clearPointerElemChangedInterval();\n      clearAutoScrolls();\n      cancelThrottle();\n    },\n    nulling: function nulling() {\n      touchEvt$1 = scrollRootEl = scrollEl = scrolling = pointerElemChangedInterval = lastAutoScrollX = lastAutoScrollY = null;\n      autoScrolls.length = 0;\n    },\n    _handleFallbackAutoScroll: function _handleFallbackAutoScroll(evt) {\n      this._handleAutoScroll(evt, true);\n    },\n    _handleAutoScroll: function _handleAutoScroll(evt, fallback) {\n      var _this = this;\n\n      var x = (evt.touches ? evt.touches[0] : evt).clientX,\n          y = (evt.touches ? evt.touches[0] : evt).clientY,\n          elem = document.elementFromPoint(x, y);\n      touchEvt$1 = evt; // IE does not seem to have native autoscroll,\n      // Edge's autoscroll seems too conditional,\n      // MACOS Safari does not have autoscroll,\n      // Firefox and Chrome are good\n\n      if (fallback || this.options.forceAutoScrollFallback || Edge || IE11OrLess || Safari) {\n        autoScroll(evt, this.options, elem, fallback); // Listener for pointer element change\n\n        var ogElemScroller = getParentAutoScrollElement(elem, true);\n\n        if (scrolling && (!pointerElemChangedInterval || x !== lastAutoScrollX || y !== lastAutoScrollY)) {\n          pointerElemChangedInterval && clearPointerElemChangedInterval(); // Detect for pointer elem change, emulating native DnD behaviour\n\n          pointerElemChangedInterval = setInterval(function () {\n            var newElem = getParentAutoScrollElement(document.elementFromPoint(x, y), true);\n\n            if (newElem !== ogElemScroller) {\n              ogElemScroller = newElem;\n              clearAutoScrolls();\n            }\n\n            autoScroll(evt, _this.options, newElem, fallback);\n          }, 10);\n          lastAutoScrollX = x;\n          lastAutoScrollY = y;\n        }\n      } else {\n        // if DnD is enabled (and browser has good autoscrolling), first autoscroll will already scroll, so get parent autoscroll of first autoscroll\n        if (!this.options.bubbleScroll || getParentAutoScrollElement(elem, true) === getWindowScrollingElement()) {\n          clearAutoScrolls();\n          return;\n        }\n\n        autoScroll(evt, this.options, getParentAutoScrollElement(elem, false), false);\n      }\n    }\n  };\n  return _extends(AutoScroll, {\n    pluginName: 'scroll',\n    initializeByDefault: true\n  });\n}\n\nfunction clearAutoScrolls() {\n  autoScrolls.forEach(function (autoScroll) {\n    clearInterval(autoScroll.pid);\n  });\n  autoScrolls = [];\n}\n\nfunction clearPointerElemChangedInterval() {\n  clearInterval(pointerElemChangedInterval);\n}\n\nvar autoScroll = throttle(function (evt, options, rootEl, isFallback) {\n  // Bug: https://bugzilla.mozilla.org/show_bug.cgi?id=505521\n  if (!options.scroll) return;\n  var x = (evt.touches ? evt.touches[0] : evt).clientX,\n      y = (evt.touches ? evt.touches[0] : evt).clientY,\n      sens = options.scrollSensitivity,\n      speed = options.scrollSpeed,\n      winScroller = getWindowScrollingElement();\n  var scrollThisInstance = false,\n      scrollCustomFn; // New scroll root, set scrollEl\n\n  if (scrollRootEl !== rootEl) {\n    scrollRootEl = rootEl;\n    clearAutoScrolls();\n    scrollEl = options.scroll;\n    scrollCustomFn = options.scrollFn;\n\n    if (scrollEl === true) {\n      scrollEl = getParentAutoScrollElement(rootEl, true);\n    }\n  }\n\n  var layersOut = 0;\n  var currentParent = scrollEl;\n\n  do {\n    var el = currentParent,\n        rect = getRect(el),\n        top = rect.top,\n        bottom = rect.bottom,\n        left = rect.left,\n        right = rect.right,\n        width = rect.width,\n        height = rect.height,\n        canScrollX = void 0,\n        canScrollY = void 0,\n        scrollWidth = el.scrollWidth,\n        scrollHeight = el.scrollHeight,\n        elCSS = css(el),\n        scrollPosX = el.scrollLeft,\n        scrollPosY = el.scrollTop;\n\n    if (el === winScroller) {\n      canScrollX = width < scrollWidth && (elCSS.overflowX === 'auto' || elCSS.overflowX === 'scroll' || elCSS.overflowX === 'visible');\n      canScrollY = height < scrollHeight && (elCSS.overflowY === 'auto' || elCSS.overflowY === 'scroll' || elCSS.overflowY === 'visible');\n    } else {\n      canScrollX = width < scrollWidth && (elCSS.overflowX === 'auto' || elCSS.overflowX === 'scroll');\n      canScrollY = height < scrollHeight && (elCSS.overflowY === 'auto' || elCSS.overflowY === 'scroll');\n    }\n\n    var vx = canScrollX && (Math.abs(right - x) <= sens && scrollPosX + width < scrollWidth) - (Math.abs(left - x) <= sens && !!scrollPosX);\n    var vy = canScrollY && (Math.abs(bottom - y) <= sens && scrollPosY + height < scrollHeight) - (Math.abs(top - y) <= sens && !!scrollPosY);\n\n    if (!autoScrolls[layersOut]) {\n      for (var i = 0; i <= layersOut; i++) {\n        if (!autoScrolls[i]) {\n          autoScrolls[i] = {};\n        }\n      }\n    }\n\n    if (autoScrolls[layersOut].vx != vx || autoScrolls[layersOut].vy != vy || autoScrolls[layersOut].el !== el) {\n      autoScrolls[layersOut].el = el;\n      autoScrolls[layersOut].vx = vx;\n      autoScrolls[layersOut].vy = vy;\n      clearInterval(autoScrolls[layersOut].pid);\n\n      if (vx != 0 || vy != 0) {\n        scrollThisInstance = true;\n        /* jshint loopfunc:true */\n\n        autoScrolls[layersOut].pid = setInterval(function () {\n          // emulate drag over during autoscroll (fallback), emulating native DnD behaviour\n          if (isFallback && this.layer === 0) {\n            Sortable.active._onTouchMove(touchEvt$1); // To move ghost if it is positioned absolutely\n\n          }\n\n          var scrollOffsetY = autoScrolls[this.layer].vy ? autoScrolls[this.layer].vy * speed : 0;\n          var scrollOffsetX = autoScrolls[this.layer].vx ? autoScrolls[this.layer].vx * speed : 0;\n\n          if (typeof scrollCustomFn === 'function') {\n            if (scrollCustomFn.call(Sortable.dragged.parentNode[expando], scrollOffsetX, scrollOffsetY, evt, touchEvt$1, autoScrolls[this.layer].el) !== 'continue') {\n              return;\n            }\n          }\n\n          scrollBy(autoScrolls[this.layer].el, scrollOffsetX, scrollOffsetY);\n        }.bind({\n          layer: layersOut\n        }), 24);\n      }\n    }\n\n    layersOut++;\n  } while (options.bubbleScroll && currentParent !== winScroller && (currentParent = getParentAutoScrollElement(currentParent, false)));\n\n  scrolling = scrollThisInstance; // in case another function catches scrolling as false in between when it is not\n}, 30);\n\nvar drop = function drop(_ref) {\n  var originalEvent = _ref.originalEvent,\n      putSortable = _ref.putSortable,\n      dragEl = _ref.dragEl,\n      activeSortable = _ref.activeSortable,\n      dispatchSortableEvent = _ref.dispatchSortableEvent,\n      hideGhostForTarget = _ref.hideGhostForTarget,\n      unhideGhostForTarget = _ref.unhideGhostForTarget;\n  if (!originalEvent) return;\n  var toSortable = putSortable || activeSortable;\n  hideGhostForTarget();\n  var touch = originalEvent.changedTouches && originalEvent.changedTouches.length ? originalEvent.changedTouches[0] : originalEvent;\n  var target = document.elementFromPoint(touch.clientX, touch.clientY);\n  unhideGhostForTarget();\n\n  if (toSortable && !toSortable.el.contains(target)) {\n    dispatchSortableEvent('spill');\n    this.onSpill({\n      dragEl: dragEl,\n      putSortable: putSortable\n    });\n  }\n};\n\nfunction Revert() {}\n\nRevert.prototype = {\n  startIndex: null,\n  dragStart: function dragStart(_ref2) {\n    var oldDraggableIndex = _ref2.oldDraggableIndex;\n    this.startIndex = oldDraggableIndex;\n  },\n  onSpill: function onSpill(_ref3) {\n    var dragEl = _ref3.dragEl,\n        putSortable = _ref3.putSortable;\n    this.sortable.captureAnimationState();\n\n    if (putSortable) {\n      putSortable.captureAnimationState();\n    }\n\n    var nextSibling = getChild(this.sortable.el, this.startIndex, this.options);\n\n    if (nextSibling) {\n      this.sortable.el.insertBefore(dragEl, nextSibling);\n    } else {\n      this.sortable.el.appendChild(dragEl);\n    }\n\n    this.sortable.animateAll();\n\n    if (putSortable) {\n      putSortable.animateAll();\n    }\n  },\n  drop: drop\n};\n\n_extends(Revert, {\n  pluginName: 'revertOnSpill'\n});\n\nfunction Remove() {}\n\nRemove.prototype = {\n  onSpill: function onSpill(_ref4) {\n    var dragEl = _ref4.dragEl,\n        putSortable = _ref4.putSortable;\n    var parentSortable = putSortable || this.sortable;\n    parentSortable.captureAnimationState();\n    dragEl.parentNode && dragEl.parentNode.removeChild(dragEl);\n    parentSortable.animateAll();\n  },\n  drop: drop\n};\n\n_extends(Remove, {\n  pluginName: 'removeOnSpill'\n});\n\nvar lastSwapEl;\n\nfunction SwapPlugin() {\n  function Swap() {\n    this.defaults = {\n      swapClass: 'sortable-swap-highlight'\n    };\n  }\n\n  Swap.prototype = {\n    dragStart: function dragStart(_ref) {\n      var dragEl = _ref.dragEl;\n      lastSwapEl = dragEl;\n    },\n    dragOverValid: function dragOverValid(_ref2) {\n      var completed = _ref2.completed,\n          target = _ref2.target,\n          onMove = _ref2.onMove,\n          activeSortable = _ref2.activeSortable,\n          changed = _ref2.changed,\n          cancel = _ref2.cancel;\n      if (!activeSortable.options.swap) return;\n      var el = this.sortable.el,\n          options = this.options;\n\n      if (target && target !== el) {\n        var prevSwapEl = lastSwapEl;\n\n        if (onMove(target) !== false) {\n          toggleClass(target, options.swapClass, true);\n          lastSwapEl = target;\n        } else {\n          lastSwapEl = null;\n        }\n\n        if (prevSwapEl && prevSwapEl !== lastSwapEl) {\n          toggleClass(prevSwapEl, options.swapClass, false);\n        }\n      }\n\n      changed();\n      completed(true);\n      cancel();\n    },\n    drop: function drop(_ref3) {\n      var activeSortable = _ref3.activeSortable,\n          putSortable = _ref3.putSortable,\n          dragEl = _ref3.dragEl;\n      var toSortable = putSortable || this.sortable;\n      var options = this.options;\n      lastSwapEl && toggleClass(lastSwapEl, options.swapClass, false);\n\n      if (lastSwapEl && (options.swap || putSortable && putSortable.options.swap)) {\n        if (dragEl !== lastSwapEl) {\n          toSortable.captureAnimationState();\n          if (toSortable !== activeSortable) activeSortable.captureAnimationState();\n          swapNodes(dragEl, lastSwapEl);\n          toSortable.animateAll();\n          if (toSortable !== activeSortable) activeSortable.animateAll();\n        }\n      }\n    },\n    nulling: function nulling() {\n      lastSwapEl = null;\n    }\n  };\n  return _extends(Swap, {\n    pluginName: 'swap',\n    eventProperties: function eventProperties() {\n      return {\n        swapItem: lastSwapEl\n      };\n    }\n  });\n}\n\nfunction swapNodes(n1, n2) {\n  var p1 = n1.parentNode,\n      p2 = n2.parentNode,\n      i1,\n      i2;\n  if (!p1 || !p2 || p1.isEqualNode(n2) || p2.isEqualNode(n1)) return;\n  i1 = index(n1);\n  i2 = index(n2);\n\n  if (p1.isEqualNode(p2) && i1 < i2) {\n    i2++;\n  }\n\n  p1.insertBefore(n2, p1.children[i1]);\n  p2.insertBefore(n1, p2.children[i2]);\n}\n\nvar multiDragElements = [],\n    multiDragClones = [],\n    lastMultiDragSelect,\n    // for selection with modifier key down (SHIFT)\nmultiDragSortable,\n    initialFolding = false,\n    // Initial multi-drag fold when drag started\nfolding = false,\n    // Folding any other time\ndragStarted = false,\n    dragEl$1,\n    clonesFromRect,\n    clonesHidden;\n\nfunction MultiDragPlugin() {\n  function MultiDrag(sortable) {\n    // Bind all private methods\n    for (var fn in this) {\n      if (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n        this[fn] = this[fn].bind(this);\n      }\n    }\n\n    if (!sortable.options.avoidImplicitDeselect) {\n      if (sortable.options.supportPointer) {\n        on(document, 'pointerup', this._deselectMultiDrag);\n      } else {\n        on(document, 'mouseup', this._deselectMultiDrag);\n        on(document, 'touchend', this._deselectMultiDrag);\n      }\n    }\n\n    on(document, 'keydown', this._checkKeyDown);\n    on(document, 'keyup', this._checkKeyUp);\n    this.defaults = {\n      selectedClass: 'sortable-selected',\n      multiDragKey: null,\n      avoidImplicitDeselect: false,\n      setData: function setData(dataTransfer, dragEl) {\n        var data = '';\n\n        if (multiDragElements.length && multiDragSortable === sortable) {\n          multiDragElements.forEach(function (multiDragElement, i) {\n            data += (!i ? '' : ', ') + multiDragElement.textContent;\n          });\n        } else {\n          data = dragEl.textContent;\n        }\n\n        dataTransfer.setData('Text', data);\n      }\n    };\n  }\n\n  MultiDrag.prototype = {\n    multiDragKeyDown: false,\n    isMultiDrag: false,\n    delayStartGlobal: function delayStartGlobal(_ref) {\n      var dragged = _ref.dragEl;\n      dragEl$1 = dragged;\n    },\n    delayEnded: function delayEnded() {\n      this.isMultiDrag = ~multiDragElements.indexOf(dragEl$1);\n    },\n    setupClone: function setupClone(_ref2) {\n      var sortable = _ref2.sortable,\n          cancel = _ref2.cancel;\n      if (!this.isMultiDrag) return;\n\n      for (var i = 0; i < multiDragElements.length; i++) {\n        multiDragClones.push(clone(multiDragElements[i]));\n        multiDragClones[i].sortableIndex = multiDragElements[i].sortableIndex;\n        multiDragClones[i].draggable = false;\n        multiDragClones[i].style['will-change'] = '';\n        toggleClass(multiDragClones[i], this.options.selectedClass, false);\n        multiDragElements[i] === dragEl$1 && toggleClass(multiDragClones[i], this.options.chosenClass, false);\n      }\n\n      sortable._hideClone();\n\n      cancel();\n    },\n    clone: function clone(_ref3) {\n      var sortable = _ref3.sortable,\n          rootEl = _ref3.rootEl,\n          dispatchSortableEvent = _ref3.dispatchSortableEvent,\n          cancel = _ref3.cancel;\n      if (!this.isMultiDrag) return;\n\n      if (!this.options.removeCloneOnHide) {\n        if (multiDragElements.length && multiDragSortable === sortable) {\n          insertMultiDragClones(true, rootEl);\n          dispatchSortableEvent('clone');\n          cancel();\n        }\n      }\n    },\n    showClone: function showClone(_ref4) {\n      var cloneNowShown = _ref4.cloneNowShown,\n          rootEl = _ref4.rootEl,\n          cancel = _ref4.cancel;\n      if (!this.isMultiDrag) return;\n      insertMultiDragClones(false, rootEl);\n      multiDragClones.forEach(function (clone) {\n        css(clone, 'display', '');\n      });\n      cloneNowShown();\n      clonesHidden = false;\n      cancel();\n    },\n    hideClone: function hideClone(_ref5) {\n      var _this = this;\n\n      var sortable = _ref5.sortable,\n          cloneNowHidden = _ref5.cloneNowHidden,\n          cancel = _ref5.cancel;\n      if (!this.isMultiDrag) return;\n      multiDragClones.forEach(function (clone) {\n        css(clone, 'display', 'none');\n\n        if (_this.options.removeCloneOnHide && clone.parentNode) {\n          clone.parentNode.removeChild(clone);\n        }\n      });\n      cloneNowHidden();\n      clonesHidden = true;\n      cancel();\n    },\n    dragStartGlobal: function dragStartGlobal(_ref6) {\n      var sortable = _ref6.sortable;\n\n      if (!this.isMultiDrag && multiDragSortable) {\n        multiDragSortable.multiDrag._deselectMultiDrag();\n      }\n\n      multiDragElements.forEach(function (multiDragElement) {\n        multiDragElement.sortableIndex = index(multiDragElement);\n      }); // Sort multi-drag elements\n\n      multiDragElements = multiDragElements.sort(function (a, b) {\n        return a.sortableIndex - b.sortableIndex;\n      });\n      dragStarted = true;\n    },\n    dragStarted: function dragStarted(_ref7) {\n      var _this2 = this;\n\n      var sortable = _ref7.sortable;\n      if (!this.isMultiDrag) return;\n\n      if (this.options.sort) {\n        // Capture rects,\n        // hide multi drag elements (by positioning them absolute),\n        // set multi drag elements rects to dragRect,\n        // show multi drag elements,\n        // animate to rects,\n        // unset rects & remove from DOM\n        sortable.captureAnimationState();\n\n        if (this.options.animation) {\n          multiDragElements.forEach(function (multiDragElement) {\n            if (multiDragElement === dragEl$1) return;\n            css(multiDragElement, 'position', 'absolute');\n          });\n          var dragRect = getRect(dragEl$1, false, true, true);\n          multiDragElements.forEach(function (multiDragElement) {\n            if (multiDragElement === dragEl$1) return;\n            setRect(multiDragElement, dragRect);\n          });\n          folding = true;\n          initialFolding = true;\n        }\n      }\n\n      sortable.animateAll(function () {\n        folding = false;\n        initialFolding = false;\n\n        if (_this2.options.animation) {\n          multiDragElements.forEach(function (multiDragElement) {\n            unsetRect(multiDragElement);\n          });\n        } // Remove all auxiliary multidrag items from el, if sorting enabled\n\n\n        if (_this2.options.sort) {\n          removeMultiDragElements();\n        }\n      });\n    },\n    dragOver: function dragOver(_ref8) {\n      var target = _ref8.target,\n          completed = _ref8.completed,\n          cancel = _ref8.cancel;\n\n      if (folding && ~multiDragElements.indexOf(target)) {\n        completed(false);\n        cancel();\n      }\n    },\n    revert: function revert(_ref9) {\n      var fromSortable = _ref9.fromSortable,\n          rootEl = _ref9.rootEl,\n          sortable = _ref9.sortable,\n          dragRect = _ref9.dragRect;\n\n      if (multiDragElements.length > 1) {\n        // Setup unfold animation\n        multiDragElements.forEach(function (multiDragElement) {\n          sortable.addAnimationState({\n            target: multiDragElement,\n            rect: folding ? getRect(multiDragElement) : dragRect\n          });\n          unsetRect(multiDragElement);\n          multiDragElement.fromRect = dragRect;\n          fromSortable.removeAnimationState(multiDragElement);\n        });\n        folding = false;\n        insertMultiDragElements(!this.options.removeCloneOnHide, rootEl);\n      }\n    },\n    dragOverCompleted: function dragOverCompleted(_ref10) {\n      var sortable = _ref10.sortable,\n          isOwner = _ref10.isOwner,\n          insertion = _ref10.insertion,\n          activeSortable = _ref10.activeSortable,\n          parentEl = _ref10.parentEl,\n          putSortable = _ref10.putSortable;\n      var options = this.options;\n\n      if (insertion) {\n        // Clones must be hidden before folding animation to capture dragRectAbsolute properly\n        if (isOwner) {\n          activeSortable._hideClone();\n        }\n\n        initialFolding = false; // If leaving sort:false root, or already folding - Fold to new location\n\n        if (options.animation && multiDragElements.length > 1 && (folding || !isOwner && !activeSortable.options.sort && !putSortable)) {\n          // Fold: Set all multi drag elements's rects to dragEl's rect when multi-drag elements are invisible\n          var dragRectAbsolute = getRect(dragEl$1, false, true, true);\n          multiDragElements.forEach(function (multiDragElement) {\n            if (multiDragElement === dragEl$1) return;\n            setRect(multiDragElement, dragRectAbsolute); // Move element(s) to end of parentEl so that it does not interfere with multi-drag clones insertion if they are inserted\n            // while folding, and so that we can capture them again because old sortable will no longer be fromSortable\n\n            parentEl.appendChild(multiDragElement);\n          });\n          folding = true;\n        } // Clones must be shown (and check to remove multi drags) after folding when interfering multiDragElements are moved out\n\n\n        if (!isOwner) {\n          // Only remove if not folding (folding will remove them anyways)\n          if (!folding) {\n            removeMultiDragElements();\n          }\n\n          if (multiDragElements.length > 1) {\n            var clonesHiddenBefore = clonesHidden;\n\n            activeSortable._showClone(sortable); // Unfold animation for clones if showing from hidden\n\n\n            if (activeSortable.options.animation && !clonesHidden && clonesHiddenBefore) {\n              multiDragClones.forEach(function (clone) {\n                activeSortable.addAnimationState({\n                  target: clone,\n                  rect: clonesFromRect\n                });\n                clone.fromRect = clonesFromRect;\n                clone.thisAnimationDuration = null;\n              });\n            }\n          } else {\n            activeSortable._showClone(sortable);\n          }\n        }\n      }\n    },\n    dragOverAnimationCapture: function dragOverAnimationCapture(_ref11) {\n      var dragRect = _ref11.dragRect,\n          isOwner = _ref11.isOwner,\n          activeSortable = _ref11.activeSortable;\n      multiDragElements.forEach(function (multiDragElement) {\n        multiDragElement.thisAnimationDuration = null;\n      });\n\n      if (activeSortable.options.animation && !isOwner && activeSortable.multiDrag.isMultiDrag) {\n        clonesFromRect = _extends({}, dragRect);\n        var dragMatrix = matrix(dragEl$1, true);\n        clonesFromRect.top -= dragMatrix.f;\n        clonesFromRect.left -= dragMatrix.e;\n      }\n    },\n    dragOverAnimationComplete: function dragOverAnimationComplete() {\n      if (folding) {\n        folding = false;\n        removeMultiDragElements();\n      }\n    },\n    drop: function drop(_ref12) {\n      var evt = _ref12.originalEvent,\n          rootEl = _ref12.rootEl,\n          parentEl = _ref12.parentEl,\n          sortable = _ref12.sortable,\n          dispatchSortableEvent = _ref12.dispatchSortableEvent,\n          oldIndex = _ref12.oldIndex,\n          putSortable = _ref12.putSortable;\n      var toSortable = putSortable || this.sortable;\n      if (!evt) return;\n      var options = this.options,\n          children = parentEl.children; // Multi-drag selection\n\n      if (!dragStarted) {\n        if (options.multiDragKey && !this.multiDragKeyDown) {\n          this._deselectMultiDrag();\n        }\n\n        toggleClass(dragEl$1, options.selectedClass, !~multiDragElements.indexOf(dragEl$1));\n\n        if (!~multiDragElements.indexOf(dragEl$1)) {\n          multiDragElements.push(dragEl$1);\n          dispatchEvent({\n            sortable: sortable,\n            rootEl: rootEl,\n            name: 'select',\n            targetEl: dragEl$1,\n            originalEvent: evt\n          }); // Modifier activated, select from last to dragEl\n\n          if (evt.shiftKey && lastMultiDragSelect && sortable.el.contains(lastMultiDragSelect)) {\n            var lastIndex = index(lastMultiDragSelect),\n                currentIndex = index(dragEl$1);\n\n            if (~lastIndex && ~currentIndex && lastIndex !== currentIndex) {\n              // Must include lastMultiDragSelect (select it), in case modified selection from no selection\n              // (but previous selection existed)\n              var n, i;\n\n              if (currentIndex > lastIndex) {\n                i = lastIndex;\n                n = currentIndex;\n              } else {\n                i = currentIndex;\n                n = lastIndex + 1;\n              }\n\n              for (; i < n; i++) {\n                if (~multiDragElements.indexOf(children[i])) continue;\n                toggleClass(children[i], options.selectedClass, true);\n                multiDragElements.push(children[i]);\n                dispatchEvent({\n                  sortable: sortable,\n                  rootEl: rootEl,\n                  name: 'select',\n                  targetEl: children[i],\n                  originalEvent: evt\n                });\n              }\n            }\n          } else {\n            lastMultiDragSelect = dragEl$1;\n          }\n\n          multiDragSortable = toSortable;\n        } else {\n          multiDragElements.splice(multiDragElements.indexOf(dragEl$1), 1);\n          lastMultiDragSelect = null;\n          dispatchEvent({\n            sortable: sortable,\n            rootEl: rootEl,\n            name: 'deselect',\n            targetEl: dragEl$1,\n            originalEvent: evt\n          });\n        }\n      } // Multi-drag drop\n\n\n      if (dragStarted && this.isMultiDrag) {\n        folding = false; // Do not \"unfold\" after around dragEl if reverted\n\n        if ((parentEl[expando].options.sort || parentEl !== rootEl) && multiDragElements.length > 1) {\n          var dragRect = getRect(dragEl$1),\n              multiDragIndex = index(dragEl$1, ':not(.' + this.options.selectedClass + ')');\n          if (!initialFolding && options.animation) dragEl$1.thisAnimationDuration = null;\n          toSortable.captureAnimationState();\n\n          if (!initialFolding) {\n            if (options.animation) {\n              dragEl$1.fromRect = dragRect;\n              multiDragElements.forEach(function (multiDragElement) {\n                multiDragElement.thisAnimationDuration = null;\n\n                if (multiDragElement !== dragEl$1) {\n                  var rect = folding ? getRect(multiDragElement) : dragRect;\n                  multiDragElement.fromRect = rect; // Prepare unfold animation\n\n                  toSortable.addAnimationState({\n                    target: multiDragElement,\n                    rect: rect\n                  });\n                }\n              });\n            } // Multi drag elements are not necessarily removed from the DOM on drop, so to reinsert\n            // properly they must all be removed\n\n\n            removeMultiDragElements();\n            multiDragElements.forEach(function (multiDragElement) {\n              if (children[multiDragIndex]) {\n                parentEl.insertBefore(multiDragElement, children[multiDragIndex]);\n              } else {\n                parentEl.appendChild(multiDragElement);\n              }\n\n              multiDragIndex++;\n            }); // If initial folding is done, the elements may have changed position because they are now\n            // unfolding around dragEl, even though dragEl may not have his index changed, so update event\n            // must be fired here as Sortable will not.\n\n            if (oldIndex === index(dragEl$1)) {\n              var update = false;\n              multiDragElements.forEach(function (multiDragElement) {\n                if (multiDragElement.sortableIndex !== index(multiDragElement)) {\n                  update = true;\n                  return;\n                }\n              });\n\n              if (update) {\n                dispatchSortableEvent('update');\n              }\n            }\n          } // Must be done after capturing individual rects (scroll bar)\n\n\n          multiDragElements.forEach(function (multiDragElement) {\n            unsetRect(multiDragElement);\n          });\n          toSortable.animateAll();\n        }\n\n        multiDragSortable = toSortable;\n      } // Remove clones if necessary\n\n\n      if (rootEl === parentEl || putSortable && putSortable.lastPutMode !== 'clone') {\n        multiDragClones.forEach(function (clone) {\n          clone.parentNode && clone.parentNode.removeChild(clone);\n        });\n      }\n    },\n    nullingGlobal: function nullingGlobal() {\n      this.isMultiDrag = dragStarted = false;\n      multiDragClones.length = 0;\n    },\n    destroyGlobal: function destroyGlobal() {\n      this._deselectMultiDrag();\n\n      off(document, 'pointerup', this._deselectMultiDrag);\n      off(document, 'mouseup', this._deselectMultiDrag);\n      off(document, 'touchend', this._deselectMultiDrag);\n      off(document, 'keydown', this._checkKeyDown);\n      off(document, 'keyup', this._checkKeyUp);\n    },\n    _deselectMultiDrag: function _deselectMultiDrag(evt) {\n      if (typeof dragStarted !== \"undefined\" && dragStarted) return; // Only deselect if selection is in this sortable\n\n      if (multiDragSortable !== this.sortable) return; // Only deselect if target is not item in this sortable\n\n      if (evt && closest(evt.target, this.options.draggable, this.sortable.el, false)) return; // Only deselect if left click\n\n      if (evt && evt.button !== 0) return;\n\n      while (multiDragElements.length) {\n        var el = multiDragElements[0];\n        toggleClass(el, this.options.selectedClass, false);\n        multiDragElements.shift();\n        dispatchEvent({\n          sortable: this.sortable,\n          rootEl: this.sortable.el,\n          name: 'deselect',\n          targetEl: el,\n          originalEvent: evt\n        });\n      }\n    },\n    _checkKeyDown: function _checkKeyDown(evt) {\n      if (evt.key === this.options.multiDragKey) {\n        this.multiDragKeyDown = true;\n      }\n    },\n    _checkKeyUp: function _checkKeyUp(evt) {\n      if (evt.key === this.options.multiDragKey) {\n        this.multiDragKeyDown = false;\n      }\n    }\n  };\n  return _extends(MultiDrag, {\n    // Static methods & properties\n    pluginName: 'multiDrag',\n    utils: {\n      /**\r\n       * Selects the provided multi-drag item\r\n       * @param  {HTMLElement} el    The element to be selected\r\n       */\n      select: function select(el) {\n        var sortable = el.parentNode[expando];\n        if (!sortable || !sortable.options.multiDrag || ~multiDragElements.indexOf(el)) return;\n\n        if (multiDragSortable && multiDragSortable !== sortable) {\n          multiDragSortable.multiDrag._deselectMultiDrag();\n\n          multiDragSortable = sortable;\n        }\n\n        toggleClass(el, sortable.options.selectedClass, true);\n        multiDragElements.push(el);\n      },\n\n      /**\r\n       * Deselects the provided multi-drag item\r\n       * @param  {HTMLElement} el    The element to be deselected\r\n       */\n      deselect: function deselect(el) {\n        var sortable = el.parentNode[expando],\n            index = multiDragElements.indexOf(el);\n        if (!sortable || !sortable.options.multiDrag || !~index) return;\n        toggleClass(el, sortable.options.selectedClass, false);\n        multiDragElements.splice(index, 1);\n      }\n    },\n    eventProperties: function eventProperties() {\n      var _this3 = this;\n\n      var oldIndicies = [],\n          newIndicies = [];\n      multiDragElements.forEach(function (multiDragElement) {\n        oldIndicies.push({\n          multiDragElement: multiDragElement,\n          index: multiDragElement.sortableIndex\n        }); // multiDragElements will already be sorted if folding\n\n        var newIndex;\n\n        if (folding && multiDragElement !== dragEl$1) {\n          newIndex = -1;\n        } else if (folding) {\n          newIndex = index(multiDragElement, ':not(.' + _this3.options.selectedClass + ')');\n        } else {\n          newIndex = index(multiDragElement);\n        }\n\n        newIndicies.push({\n          multiDragElement: multiDragElement,\n          index: newIndex\n        });\n      });\n      return {\n        items: _toConsumableArray(multiDragElements),\n        clones: [].concat(multiDragClones),\n        oldIndicies: oldIndicies,\n        newIndicies: newIndicies\n      };\n    },\n    optionListeners: {\n      multiDragKey: function multiDragKey(key) {\n        key = key.toLowerCase();\n\n        if (key === 'ctrl') {\n          key = 'Control';\n        } else if (key.length > 1) {\n          key = key.charAt(0).toUpperCase() + key.substr(1);\n        }\n\n        return key;\n      }\n    }\n  });\n}\n\nfunction insertMultiDragElements(clonesInserted, rootEl) {\n  multiDragElements.forEach(function (multiDragElement, i) {\n    var target = rootEl.children[multiDragElement.sortableIndex + (clonesInserted ? Number(i) : 0)];\n\n    if (target) {\n      rootEl.insertBefore(multiDragElement, target);\n    } else {\n      rootEl.appendChild(multiDragElement);\n    }\n  });\n}\n/**\r\n * Insert multi-drag clones\r\n * @param  {[Boolean]} elementsInserted  Whether the multi-drag elements are inserted\r\n * @param  {HTMLElement} rootEl\r\n */\n\n\nfunction insertMultiDragClones(elementsInserted, rootEl) {\n  multiDragClones.forEach(function (clone, i) {\n    var target = rootEl.children[clone.sortableIndex + (elementsInserted ? Number(i) : 0)];\n\n    if (target) {\n      rootEl.insertBefore(clone, target);\n    } else {\n      rootEl.appendChild(clone);\n    }\n  });\n}\n\nfunction removeMultiDragElements() {\n  multiDragElements.forEach(function (multiDragElement) {\n    if (multiDragElement === dragEl$1) return;\n    multiDragElement.parentNode && multiDragElement.parentNode.removeChild(multiDragElement);\n  });\n}\n\nSortable.mount(new AutoScrollPlugin());\nSortable.mount(Remove, Revert);\n\nexport default Sortable;\nexport { MultiDragPlugin as MultiDrag, Sortable, SwapPlugin as Swap };\n","import type { Config } from '../config';\n\nexport interface IpcMessage {\n\tid: string;\n\tmethod: string;\n\tparams?: unknown;\n}\n\nabstract class IpcMessageType<Params = void> {\n\t_?: Params; // Required for type inferencing to work properly\n\tconstructor(public readonly method: string) {}\n}\nexport type IpcMessageParams<T> = T extends IpcMessageType<infer P> ? P : never;\n\n/**\n * Commands are sent from the webview to the extension\n */\nexport class IpcCommandType<Params = void> extends IpcMessageType<Params> {}\n/**\n * Notifications are sent from the extension to the webview\n */\nexport class IpcNotificationType<Params = void> extends IpcMessageType<Params> {}\n\nexport function onIpc<T extends IpcMessageType<any>>(\n\ttype: T,\n\tmsg: IpcMessage,\n\tfn: (params: IpcMessageParams<T>) => unknown,\n) {\n\tif (type.method !== msg.method) return;\n\n\tfn(msg.params as IpcMessageParams<T>);\n}\n\n// COMMANDS\n\nexport const WebviewReadyCommandType = new IpcCommandType('webview/ready');\n\nexport interface ExecuteCommandParams {\n\tcommand: string;\n\targs?: [];\n}\nexport const ExecuteCommandType = new IpcCommandType<ExecuteCommandParams>('command/execute');\n\nexport interface GenerateCommitPreviewParams {\n\tkey: string;\n\ttype: 'commit';\n\tformat: string;\n}\n\ntype GenerateConfigurationPreviewParams = GenerateCommitPreviewParams;\nexport const GenerateConfigurationPreviewCommandType = new IpcCommandType<GenerateConfigurationPreviewParams>(\n\t'configuration/preview',\n);\n\nexport interface UpdateConfigurationParams {\n\tchanges: {\n\t\t[key: string]: any;\n\t};\n\tremoves: string[];\n\tscope?: 'user' | 'workspace';\n\turi?: string;\n}\nexport const UpdateConfigurationCommandType = new IpcCommandType<UpdateConfigurationParams>('configuration/update');\n\n// NOTIFICATIONS\n\nexport interface DidChangeConfigurationParams {\n\tconfig: Config;\n\tcustomSettings: Record<string, boolean>;\n}\nexport const DidChangeConfigurationNotificationType = new IpcNotificationType<DidChangeConfigurationParams>(\n\t'configuration/didChange',\n);\n\nexport interface DidGenerateConfigurationPreviewParams {\n\tcompletionId: string;\n\tpreview: string;\n}\n\nexport const DidGenerateConfigurationPreviewNotificationType =\n\tnew IpcNotificationType<DidGenerateConfigurationPreviewParams>('configuration/didPreview');\n\nexport interface DidOpenAnchorParams {\n\tanchor: string;\n\tscrollBehavior: 'auto' | 'smooth';\n}\nexport const DidOpenAnchorNotificationType = new IpcNotificationType<DidOpenAnchorParams>('webview/didOpenAnchor');\n","import { IpcCommandType, IpcNotificationType } from '../protocol';\n\nexport interface State {\n\tbranch: string;\n\tonto: string;\n\n\tentries: RebaseEntry[];\n\tauthors: Author[];\n\tcommits: Commit[];\n\tcommands: {\n\t\tcommit: string;\n\t};\n\n\tascending: boolean;\n}\n\nexport interface RebaseEntry {\n\treadonly action: RebaseEntryAction;\n\treadonly ref: string;\n\treadonly message: string;\n\treadonly index: number;\n}\n\nexport type RebaseEntryAction = 'pick' | 'reword' | 'edit' | 'squash' | 'fixup' | 'break' | 'drop';\n\nexport interface Author {\n\treadonly author: string;\n\treadonly avatarUrl: string;\n\treadonly email: string | undefined;\n}\n\nexport interface Commit {\n\treadonly ref: string;\n\treadonly author: string;\n\t// readonly avatarUrl: string;\n\treadonly date: string;\n\treadonly dateFromNow: string;\n\t// readonly email: string | undefined;\n\treadonly message: string;\n\t// readonly command: string;\n}\n\n// COMMANDS\n\nexport const AbortCommandType = new IpcCommandType('rebase/abort');\n\nexport const DisableCommandType = new IpcCommandType('rebase/disable');\n\nexport const StartCommandType = new IpcCommandType('rebase/start');\n\nexport const SwitchCommandType = new IpcCommandType('rebase/switch');\n\nexport interface ReorderParams {\n\tascending: boolean;\n}\nexport const ReorderCommandType = new IpcCommandType<ReorderParams>('rebase/reorder');\n\nexport interface ChangeEntryParams {\n\tref: string;\n\taction: RebaseEntryAction;\n}\nexport const ChangeEntryCommandType = new IpcCommandType<ChangeEntryParams>('rebase/change/entry');\n\nexport interface MoveEntryParams {\n\tref: string;\n\tto: number;\n\trelative: boolean;\n}\nexport const MoveEntryCommandType = new IpcCommandType<MoveEntryParams>('rebase/move/entry');\n\n// NOTIFICATIONS\n\nexport interface DidChangeParams {\n\tstate: State;\n}\nexport const DidChangeNotificationType = new IpcNotificationType<DidChangeParams>('rebase/didChange');\n","/*global document*/\n\nexport interface Disposable {\n\tdispose: () => void;\n}\n\nexport namespace DOM {\n\texport function on<K extends keyof WindowEventMap>(\n\t\twindow: Window,\n\t\tname: K,\n\t\tlistener: (e: WindowEventMap[K], target: Window) => void,\n\t\toptions?: boolean | AddEventListenerOptions,\n\t): Disposable;\n\texport function on<K extends keyof DocumentEventMap>(\n\t\tdocument: Document,\n\t\tname: K,\n\t\tlistener: (e: DocumentEventMap[K], target: Document) => void,\n\t\toptions?: boolean | AddEventListenerOptions,\n\t): Disposable;\n\texport function on<T extends HTMLElement, K extends keyof DocumentEventMap>(\n\t\telement: T,\n\t\tname: K,\n\t\tlistener: (e: DocumentEventMap[K], target: T) => void,\n\t\toptions?: boolean | AddEventListenerOptions,\n\t): Disposable;\n\texport function on<T extends Element, K extends keyof DocumentEventMap>(\n\t\tselector: string,\n\t\tname: K,\n\t\tlistener: (e: DocumentEventMap[K], target: T) => void,\n\t\toptions?: boolean | AddEventListenerOptions,\n\t): Disposable;\n\texport function on<K extends keyof (DocumentEventMap | WindowEventMap), T extends Document | Element | Window>(\n\t\tsourceOrSelector: string | Window | Document | Element,\n\t\tname: K,\n\t\tlistener: (e: (DocumentEventMap | WindowEventMap)[K], target: T) => void,\n\t\toptions?: boolean | AddEventListenerOptions,\n\t): Disposable {\n\t\tlet disposed = false;\n\n\t\tif (typeof sourceOrSelector === 'string') {\n\t\t\tconst filteredListener = function (this: T, e: (DocumentEventMap | WindowEventMap)[K]) {\n\t\t\t\tconst target = e?.target as HTMLElement;\n\t\t\t\tif (!target?.matches(sourceOrSelector)) return;\n\n\t\t\t\tlistener(e, target as unknown as T);\n\t\t\t};\n\t\t\tdocument.addEventListener(name, filteredListener as EventListener, options ?? true);\n\n\t\t\treturn {\n\t\t\t\tdispose: () => {\n\t\t\t\t\tif (disposed) return;\n\t\t\t\t\tdisposed = true;\n\n\t\t\t\t\tdocument.removeEventListener(name, filteredListener as EventListener, options ?? true);\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\n\t\tconst newListener = function (this: T, e: (DocumentEventMap | WindowEventMap)[K]) {\n\t\t\tlistener(e, this as unknown as T);\n\t\t};\n\t\tsourceOrSelector.addEventListener(name, newListener as EventListener, options ?? false);\n\t\treturn {\n\t\t\tdispose: () => {\n\t\t\t\tif (disposed) return;\n\t\t\t\tdisposed = true;\n\n\t\t\t\tsourceOrSelector.removeEventListener(name, newListener as EventListener, options ?? false);\n\t\t\t},\n\t\t};\n\t}\n\n\texport function insertTemplate(\n\t\tid: string,\n\t\t$slot: HTMLElement,\n\t\toptions?: { bindings?: Record<string, unknown>; visible?: Record<string, boolean> },\n\t): void {\n\t\tconst $template = document.getElementById(id) as HTMLTemplateElement;\n\t\t$slot.replaceChildren($template?.content.cloneNode(true));\n\t\t$slot.className = $template.className;\n\n\t\tif (options?.visible != null) {\n\t\t\tconst $els = $slot.querySelectorAll<HTMLElement>(`[data-visible]`);\n\t\t\tfor (const $el of $els) {\n\t\t\t\tconst key = $el.dataset.visible;\n\t\t\t\tif (!key) continue;\n\n\t\t\t\tif (options.visible[key]) {\n\t\t\t\t\t$el.style.display = 'initial';\n\t\t\t\t} else {\n\t\t\t\t\t$el.style.display = 'none';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (options?.bindings != null) {\n\t\t\tconst $els = $slot.querySelectorAll<HTMLElement>(`[data-bind]`);\n\t\t\tfor (const $el of $els) {\n\t\t\t\tconst key = $el.dataset.bind;\n\t\t\t\tif (!key) continue;\n\n\t\t\t\tconst value = options.bindings[key];\n\t\t\t\tif (value == null) continue;\n\n\t\t\t\t$el.textContent = String(value);\n\t\t\t}\n\t\t}\n\t}\n\n\texport function resetSlot($slot: HTMLElement) {\n\t\t$slot.replaceChildren();\n\t\t$slot.className = '';\n\t}\n}\n","const cssColorRegex =\n\t/^(?:(#?)([0-9a-f]{3}|[0-9a-f]{6})|((?:rgb|hsl)a?)\\((-?\\d+%?)[,\\s]+(-?\\d+%?)[,\\s]+(-?\\d+%?)[,\\s]*(-?[\\d.]+%?)?\\))$/i;\n\nfunction adjustLight(color: number, amount: number) {\n\tconst cc = color + amount;\n\tconst c = amount < 0 ? (cc < 0 ? 0 : cc) : cc > 255 ? 255 : cc;\n\n\treturn Math.round(c);\n}\n\nexport function darken(color: string, percentage: number) {\n\treturn lighten(color, -percentage);\n}\n\nexport function lighten(color: string, percentage: number) {\n\tconst rgba = toRgba(color);\n\tif (rgba == null) return color;\n\n\tconst [r, g, b, a] = rgba;\n\tconst amount = (255 * percentage) / 100;\n\treturn `rgba(${adjustLight(r, amount)}, ${adjustLight(g, amount)}, ${adjustLight(b, amount)}, ${a})`;\n}\n\nexport function opacity(color: string, percentage: number) {\n\tconst rgba = toRgba(color);\n\tif (rgba == null) return color;\n\n\tconst [r, g, b, a] = rgba;\n\treturn `rgba(${r}, ${g}, ${b}, ${a * (percentage / 100)})`;\n}\n\nexport function toRgba(color: string) {\n\tcolor = color.trim();\n\n\tconst result = cssColorRegex.exec(color);\n\tif (result == null) return null;\n\n\tif (result[1] === '#') {\n\t\tconst hex = result[2];\n\t\tswitch (hex.length) {\n\t\t\tcase 3:\n\t\t\t\treturn [parseInt(hex[0] + hex[0], 16), parseInt(hex[1] + hex[1], 16), parseInt(hex[2] + hex[2], 16), 1];\n\t\t\tcase 6:\n\t\t\t\treturn [\n\t\t\t\t\tparseInt(hex.substring(0, 2), 16),\n\t\t\t\t\tparseInt(hex.substring(2, 4), 16),\n\t\t\t\t\tparseInt(hex.substring(4, 6), 16),\n\t\t\t\t\t1,\n\t\t\t\t];\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tswitch (result[3]) {\n\t\tcase 'rgb':\n\t\t\treturn [parseInt(result[4], 10), parseInt(result[5], 10), parseInt(result[6], 10), 1];\n\t\tcase 'rgba':\n\t\t\treturn [parseInt(result[4], 10), parseInt(result[5], 10), parseInt(result[6], 10), parseFloat(result[7])];\n\t\tdefault:\n\t\t\treturn null;\n\t}\n}\n","/*global window document MutationObserver*/\nimport { darken, lighten, opacity } from './colors';\n\nexport function initializeAndWatchThemeColors() {\n\tconst onColorThemeChanged = () => {\n\t\tconst body = document.body;\n\t\tconst computedStyle = window.getComputedStyle(body);\n\n\t\tconst bodyStyle = body.style;\n\n\t\tbodyStyle.setProperty('--font-family', computedStyle.getPropertyValue('--vscode-font-family').trim());\n\t\tbodyStyle.setProperty('--font-size', computedStyle.getPropertyValue('--vscode-font-size').trim());\n\t\tbodyStyle.setProperty('--font-weight', computedStyle.getPropertyValue('--vscode-font-weight').trim());\n\n\t\tbodyStyle.setProperty(\n\t\t\t'--editor-font-family',\n\t\t\tcomputedStyle.getPropertyValue('--vscode-editor-font-family').trim(),\n\t\t);\n\t\tbodyStyle.setProperty('--editor-font-size', computedStyle.getPropertyValue('--vscode-editor-font-size').trim());\n\t\tbodyStyle.setProperty(\n\t\t\t'--editor-font-weight',\n\t\t\tcomputedStyle.getPropertyValue('--vscode-editor-font-weight').trim(),\n\t\t);\n\n\t\tlet color = computedStyle.getPropertyValue('--vscode-editor-background').trim();\n\t\tbodyStyle.setProperty('--color-background', color);\n\t\tbodyStyle.setProperty('--color-background--lighten-05', lighten(color, 5));\n\t\tbodyStyle.setProperty('--color-background--darken-05', darken(color, 5));\n\t\tbodyStyle.setProperty('--color-background--lighten-075', lighten(color, 7.5));\n\t\tbodyStyle.setProperty('--color-background--darken-075', darken(color, 7.5));\n\t\tbodyStyle.setProperty('--color-background--lighten-15', lighten(color, 15));\n\t\tbodyStyle.setProperty('--color-background--darken-15', darken(color, 15));\n\t\tbodyStyle.setProperty('--color-background--lighten-30', lighten(color, 30));\n\t\tbodyStyle.setProperty('--color-background--darken-30', darken(color, 30));\n\t\tbodyStyle.setProperty('--color-background--lighten-50', lighten(color, 50));\n\t\tbodyStyle.setProperty('--color-background--darken-50', darken(color, 50));\n\n\t\tcolor = computedStyle.getPropertyValue('--vscode-button-background').trim();\n\t\tbodyStyle.setProperty('--color-button-background', color);\n\t\tbodyStyle.setProperty('--color-button-background--darken-30', darken(color, 30));\n\n\t\tcolor = computedStyle.getPropertyValue('--vscode-button-secondaryBackground').trim();\n\t\tbodyStyle.setProperty('--color-button-secondary-background', color);\n\t\tbodyStyle.setProperty('--color-button-secondary-background--darken-30', darken(color, 30));\n\n\t\tcolor = computedStyle.getPropertyValue('--vscode-button-background').trim();\n\t\tbodyStyle.setProperty('--color-highlight', color);\n\t\tbodyStyle.setProperty('--color-highlight--75', opacity(color, 75));\n\t\tbodyStyle.setProperty('--color-highlight--50', opacity(color, 50));\n\t\tbodyStyle.setProperty('--color-highlight--25', opacity(color, 25));\n\n\t\tcolor = computedStyle.getPropertyValue('--vscode-button-foreground').trim();\n\t\tbodyStyle.setProperty('--color-button-foreground', color);\n\n\t\tlet foregroundColor = computedStyle.getPropertyValue('--vscode-editor-foreground').trim();\n\t\tif (!foregroundColor) {\n\t\t\tforegroundColor = computedStyle.getPropertyValue('--vscode-foreground').trim();\n\t\t}\n\t\tbodyStyle.setProperty('--color-foreground', foregroundColor);\n\t\tbodyStyle.setProperty('--color-foreground--85', opacity(foregroundColor, 85));\n\t\tbodyStyle.setProperty('--color-foreground--75', opacity(foregroundColor, 75));\n\t\tbodyStyle.setProperty('--color-foreground--65', opacity(foregroundColor, 65));\n\t\tbodyStyle.setProperty('--color-foreground--50', opacity(foregroundColor, 50));\n\n\t\tcolor = computedStyle.getPropertyValue('--vscode-focusBorder').trim();\n\t\tbodyStyle.setProperty('--color-focus-border', color);\n\n\t\tcolor = computedStyle.getPropertyValue('--vscode-textLink-foreground').trim();\n\t\tbodyStyle.setProperty('--color-link-foreground', color);\n\t\tbodyStyle.setProperty('--color-link-foreground--darken-20', darken(color, 20));\n\t\tbodyStyle.setProperty('--color-link-foreground--lighten-20', lighten(color, 20));\n\n\t\tcolor = computedStyle.getPropertyValue('--vscode-sideBar-foreground').trim();\n\t\tbodyStyle.setProperty('--color-view-foreground', color || foregroundColor);\n\n\t\tbodyStyle.setProperty(\n\t\t\t'--color-view-header-foreground',\n\t\t\tcomputedStyle.getPropertyValue('--vscode-sideBarSectionHeader-foreground').trim() ||\n\t\t\t\tcolor ||\n\t\t\t\tforegroundColor,\n\t\t);\n\n\t\tcolor = computedStyle.getPropertyValue('--vscode-editorHoverWidget-background').trim();\n\t\tbodyStyle.setProperty('--color-hover-background', color);\n\t\tcolor = computedStyle.getPropertyValue('--vscode-editorHoverWidget-border').trim();\n\t\tbodyStyle.setProperty('--color-hover-border', color);\n\t\tcolor = computedStyle.getPropertyValue('--vscode-editorHoverWidget-foreground').trim();\n\t\tbodyStyle.setProperty('--color-hover-foreground', color);\n\t\tcolor = computedStyle.getPropertyValue('--vscode-editorHoverWidget-statusBarBackground').trim();\n\t\tbodyStyle.setProperty('--color-hover-statusBarBackground', color);\n\t};\n\n\tconst observer = new MutationObserver(onColorThemeChanged);\n\tobserver.observe(document.body, { attributes: true, attributeFilter: ['class'] });\n\n\tonColorThemeChanged();\n\treturn observer;\n}\n","/*global window document*/\nimport {\n\tIpcCommandType,\n\tIpcMessage,\n\tIpcMessageParams,\n\tIpcNotificationType,\n\tonIpc,\n\tWebviewReadyCommandType,\n} from '../../protocol';\nimport { DOM } from './dom';\nimport { Disposable } from './events';\nimport { initializeAndWatchThemeColors } from './theme';\n\ninterface VsCodeApi {\n\tpostMessage(msg: unknown): void;\n\tsetState(state: unknown): void;\n\tgetState(): unknown;\n}\n\ndeclare function acquireVsCodeApi(): VsCodeApi;\n\nconst maxSmallIntegerV8 = 2 ** 30; // Max number that can be stored in V8's smis (small integers)\n\nlet ipcSequence = 0;\nfunction nextIpcId() {\n\tif (ipcSequence === maxSmallIntegerV8) {\n\t\tipcSequence = 1;\n\t} else {\n\t\tipcSequence++;\n\t}\n\n\treturn `webview:${ipcSequence}`;\n}\n\nexport abstract class App<State = void> {\n\tprivate readonly _api: VsCodeApi;\n\tprotected state: State;\n\n\tconstructor(protected readonly appName: string) {\n\t\tthis.state = (window as any).bootstrap;\n\t\t(window as any).bootstrap = undefined;\n\n\t\tthis.log(`${this.appName}()`);\n\t\t// this.log(`${this.appName}(${this.state ? JSON.stringify(this.state) : ''})`);\n\n\t\tthis._api = acquireVsCodeApi();\n\t\tinitializeAndWatchThemeColors();\n\n\t\trequestAnimationFrame(() => {\n\t\t\tthis.log(`${this.appName}.initializing`);\n\n\t\t\ttry {\n\t\t\t\tthis.onInitialize?.();\n\t\t\t\tthis.bind();\n\n\t\t\t\tif (this.onMessageReceived != null) {\n\t\t\t\t\twindow.addEventListener('message', this.onMessageReceived.bind(this));\n\t\t\t\t}\n\n\t\t\t\tthis.sendCommand(WebviewReadyCommandType, undefined);\n\n\t\t\t\tthis.onInitialized?.();\n\t\t\t} finally {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tdocument.body.classList.remove('preload');\n\t\t\t\t}, 500);\n\t\t\t}\n\t\t});\n\t}\n\n\tprotected onInitialize?(): void;\n\tprotected onBind?(): Disposable[];\n\tprotected onInitialized?(): void;\n\tprotected onMessageReceived?(e: MessageEvent): void;\n\n\tprivate bindDisposables: Disposable[] | undefined;\n\tprotected bind() {\n\t\tthis.bindDisposables?.forEach(d => d.dispose());\n\t\tthis.bindDisposables = this.onBind?.();\n\t}\n\n\tprotected log(message: string) {\n\t\tconsole.log(message);\n\t}\n\n\tprotected getState(): State {\n\t\treturn this._api.getState() as State;\n\t}\n\n\tprotected sendCommand<TCommand extends IpcCommandType<any>>(\n\t\tcommand: TCommand,\n\t\tparams: IpcMessageParams<TCommand>,\n\t): void {\n\t\tconst id = nextIpcId();\n\t\tthis.log(`${this.appName}.sendCommand(${id}): name=${command.method}`);\n\n\t\treturn this.postMessage({ id: id, method: command.method, params: params });\n\t}\n\n\tprotected sendCommandWithCompletion<\n\t\tTCommand extends IpcCommandType<any>,\n\t\tTCompletion extends IpcNotificationType<{ completionId: string }>,\n\t>(\n\t\tcommand: TCommand,\n\t\tparams: IpcMessageParams<TCommand>,\n\t\tcompletion: TCompletion,\n\t\tcallback: (params: IpcMessageParams<TCompletion>) => void,\n\t): void {\n\t\tconst id = nextIpcId();\n\t\tthis.log(`${this.appName}.sendCommandWithCompletion(${id}): name=${command.method}`);\n\n\t\tconst disposable = DOM.on(window, 'message', e => {\n\t\t\tonIpc(completion, e.data as IpcMessage, params => {\n\t\t\t\tif (params.completionId === id) {\n\t\t\t\t\tdisposable.dispose();\n\t\t\t\t\tcallback(params);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\treturn this.postMessage({ id: id, method: command.method, params: params });\n\t}\n\n\tprotected setState(state: State) {\n\t\tthis.state = state;\n\t\tif (state == null) return;\n\n\t\tthis._api.setState(state);\n\t}\n\n\tprivate postMessage(e: IpcMessage) {\n\t\tthis._api.postMessage(e);\n\t}\n}\n","/*global document window*/\nimport './rebase.scss';\nimport Sortable from 'sortablejs';\nimport { onIpc } from '../../protocol';\nimport {\n\tAbortCommandType,\n\tChangeEntryCommandType,\n\tDidChangeNotificationType,\n\tDisableCommandType,\n\tMoveEntryCommandType,\n\tRebaseEntry,\n\tRebaseEntryAction,\n\tReorderCommandType,\n\tStartCommandType,\n\tState,\n\tSwitchCommandType,\n} from '../../rebase/protocol';\nimport { App } from '../shared/appBase';\nimport { DOM } from '../shared/dom';\n\nconst rebaseActions = ['pick', 'reword', 'edit', 'squash', 'fixup', 'drop'];\nconst rebaseActionsMap = new Map<string, RebaseEntryAction>([\n\t['p', 'pick'],\n\t['P', 'pick'],\n\t['r', 'reword'],\n\t['R', 'reword'],\n\t['e', 'edit'],\n\t['E', 'edit'],\n\t['s', 'squash'],\n\t['S', 'squash'],\n\t['f', 'fixup'],\n\t['F', 'fixup'],\n\t['d', 'drop'],\n\t['D', 'drop'],\n]);\n\nclass RebaseEditor extends App<State> {\n\tprivate readonly commitTokenRegex = new RegExp(encodeURIComponent(`\\${commit}`));\n\n\tconstructor() {\n\t\tsuper('RebaseEditor');\n\t}\n\n\tprotected override onInitialize() {\n\t\tthis.state = this.getState() ?? this.state;\n\t\tif (this.state != null) {\n\t\t\tthis.refresh(this.state);\n\t\t}\n\t}\n\n\tprotected override onBind() {\n\t\tconst disposables = super.onBind?.() ?? [];\n\n\t\tconst $container = document.getElementById('entries')!;\n\t\tSortable.create($container, {\n\t\t\tanimation: 150,\n\t\t\thandle: '.entry-handle',\n\t\t\tfilter: '.entry--base',\n\t\t\tdragClass: 'entry--drag',\n\t\t\tghostClass: 'entry--dragging',\n\t\t\tonChange: () => {\n\t\t\t\tlet squashing = false;\n\t\t\t\tlet squashToHere = false;\n\n\t\t\t\tconst $entries = [...document.querySelectorAll<HTMLLIElement>('li[data-ref]')];\n\t\t\t\tif (this.state.ascending) {\n\t\t\t\t\t$entries.reverse();\n\t\t\t\t}\n\t\t\t\tfor (const $entry of $entries) {\n\t\t\t\t\tsquashToHere = false;\n\t\t\t\t\tif ($entry.classList.contains('entry--squash') || $entry.classList.contains('entry--fixup')) {\n\t\t\t\t\t\tsquashing = true;\n\t\t\t\t\t} else if (squashing) {\n\t\t\t\t\t\tif (!$entry.classList.contains('entry--drop')) {\n\t\t\t\t\t\t\tsquashToHere = true;\n\t\t\t\t\t\t\tsquashing = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t$entry.classList.toggle(\n\t\t\t\t\t\t'entry--squash-to',\n\t\t\t\t\t\tsquashToHere && !$entry.classList.contains('entry--base'),\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t},\n\t\t\tonEnd: e => {\n\t\t\t\tif (e.newIndex == null || e.newIndex === e.oldIndex) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst ref = e.item.dataset.ref;\n\t\t\t\tif (ref != null) {\n\t\t\t\t\tlet indexTarget = e.newIndex;\n\t\t\t\t\tif (this.state.ascending && e.oldIndex) {\n\t\t\t\t\t\tindexTarget = this.getEntryIndex(ref) + (indexTarget - e.oldIndex) * -1;\n\t\t\t\t\t}\n\t\t\t\t\tthis.moveEntry(ref, indexTarget, false);\n\n\t\t\t\t\tdocument.querySelectorAll<HTMLLIElement>(`li[data-ref=\"${ref}\"]`)[0]?.focus();\n\t\t\t\t}\n\t\t\t},\n\t\t\tonMove: e => !e.related.classList.contains('entry--base'),\n\t\t});\n\n\t\tif (window.navigator.platform.startsWith('Mac')) {\n\t\t\tlet $shortcut = document.querySelector<HTMLSpanElement>('[data-action=\"start\"] .shortcut')!;\n\t\t\t$shortcut.textContent = 'Cmd+Enter';\n\n\t\t\t$shortcut = document.querySelector<HTMLSpanElement>('[data-action=\"abort\"] .shortcut')!;\n\t\t\t$shortcut.textContent = 'Cmd+A';\n\t\t}\n\n\t\tdisposables.push(\n\t\t\tDOM.on(window, 'keydown', e => {\n\t\t\t\tif (e.ctrlKey || e.metaKey) {\n\t\t\t\t\tif (e.key === 'Enter' || e.key === 'r') {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\t\tthis.onStartClicked();\n\t\t\t\t\t} else if (e.key === 'a') {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\t\tthis.onAbortClicked();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}),\n\t\t\tDOM.on('[data-action=\"start\"]', 'click', () => this.onStartClicked()),\n\t\t\tDOM.on('[data-action=\"abort\"]', 'click', () => this.onAbortClicked()),\n\t\t\tDOM.on('[data-action=\"disable\"]', 'click', () => this.onDisableClicked()),\n\t\t\tDOM.on('[data-action=\"switch\"]', 'click', () => this.onSwitchClicked()),\n\t\t\tDOM.on('li[data-ref]', 'keydown', (e, target: HTMLElement) => {\n\t\t\t\tif (target.matches('select[data-ref]')) {\n\t\t\t\t\tif (e.key === 'Escape') {\n\t\t\t\t\t\ttarget.focus();\n\t\t\t\t\t}\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (e.key === 'Enter' || e.key === ' ') {\n\t\t\t\t\tif (e.key === 'Enter' && target.matches('a.entry-ref')) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst $select = target.querySelectorAll<HTMLSelectElement>('select[data-ref]')[0];\n\t\t\t\t\tif ($select != null) {\n\t\t\t\t\t\t$select.focus();\n\t\t\t\t\t}\n\t\t\t\t} else if (e.key === 'ArrowUp' || e.key === 'ArrowDown') {\n\t\t\t\t\tif (!e.metaKey && !e.ctrlKey && !e.shiftKey) {\n\t\t\t\t\t\tconst advance =\n\t\t\t\t\t\t\t(e.key === 'ArrowDown' && !this.state.ascending) ||\n\t\t\t\t\t\t\t(e.key === 'ArrowUp' && this.state.ascending)\n\t\t\t\t\t\t\t\t? 1\n\t\t\t\t\t\t\t\t: -1;\n\t\t\t\t\t\tif (e.altKey) {\n\t\t\t\t\t\t\tconst ref = target.dataset.ref;\n\t\t\t\t\t\t\tif (ref) {\n\t\t\t\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\t\t\t\tthis.moveEntry(ref, advance, true);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (this.state == null) return;\n\n\t\t\t\t\t\t\tlet ref = target.dataset.ref;\n\t\t\t\t\t\t\tif (ref == null) return;\n\n\t\t\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\t\t\tlet index = this.getEntryIndex(ref) + advance;\n\t\t\t\t\t\t\tif (index < 0) {\n\t\t\t\t\t\t\t\tindex = this.state.entries.length - 1;\n\t\t\t\t\t\t\t} else if (index === this.state.entries.length) {\n\t\t\t\t\t\t\t\tindex = 0;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tref = this.state.entries[index].ref;\n\t\t\t\t\t\t\tdocument.querySelectorAll<HTMLLIElement>(`li[data-ref=\"${ref}\"]`)[0]?.focus();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else if (e.key === 'j' || e.key === 'k') {\n\t\t\t\t\tif (!e.metaKey && !e.ctrlKey && !e.shiftKey && !e.altKey) {\n\t\t\t\t\t\tif (this.state == null) return;\n\n\t\t\t\t\t\tlet ref = target.dataset.ref;\n\t\t\t\t\t\tif (ref == null) return;\n\n\t\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\t\tlet index = this.getEntryIndex(ref) + (e.key === 'j' ? 1 : -1);\n\t\t\t\t\t\tif (index < 0) {\n\t\t\t\t\t\t\tindex = this.state.entries.length - 1;\n\t\t\t\t\t\t} else if (index === this.state.entries.length) {\n\t\t\t\t\t\t\tindex = 0;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tref = this.state.entries[index].ref;\n\t\t\t\t\t\tdocument.querySelectorAll<HTMLLIElement>(`li[data-ref=\"${ref}\"]`)[0]?.focus();\n\t\t\t\t\t}\n\t\t\t\t} else if (e.key === 'J' || e.key === 'K') {\n\t\t\t\t\tif (!e.metaKey && !e.ctrlKey && !e.altKey && e.shiftKey) {\n\t\t\t\t\t\tconst ref = target.dataset.ref;\n\t\t\t\t\t\tif (ref) {\n\t\t\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\t\t\tthis.moveEntry(ref, e.key === 'J' ? 1 : -1, true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else if (!e.metaKey && !e.altKey && !e.ctrlKey) {\n\t\t\t\t\tconst action = rebaseActionsMap.get(e.key);\n\t\t\t\t\tif (action !== undefined) {\n\t\t\t\t\t\te.stopPropagation();\n\n\t\t\t\t\t\tconst $select = target.querySelectorAll<HTMLSelectElement>('select[data-ref]')[0];\n\t\t\t\t\t\tif ($select != null && !$select.disabled) {\n\t\t\t\t\t\t\t$select.value = action;\n\t\t\t\t\t\t\tthis.onSelectChanged($select);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}),\n\t\t\tDOM.on('select[data-ref]', 'input', (e, target: HTMLSelectElement) => this.onSelectChanged(target)),\n\t\t\tDOM.on('input[data-action=\"reorder\"]', 'input', (e, target: HTMLInputElement) =>\n\t\t\t\tthis.onOrderChanged(target),\n\t\t\t),\n\t\t);\n\n\t\treturn disposables;\n\t}\n\n\tprivate getEntry(ref: string) {\n\t\treturn this.state?.entries.find(e => e.ref === ref);\n\t}\n\n\tprivate getEntryIndex(ref: string) {\n\t\treturn this.state?.entries.findIndex(e => e.ref === ref) ?? -1;\n\t}\n\n\tprivate moveEntry(ref: string, index: number, relative: boolean) {\n\t\tconst entry = this.getEntry(ref);\n\t\tif (entry != null) {\n\t\t\tthis.sendCommand(MoveEntryCommandType, {\n\t\t\t\tref: entry.ref,\n\t\t\t\tto: index,\n\t\t\t\trelative: relative,\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate setEntryAction(ref: string, action: RebaseEntryAction) {\n\t\tconst entry = this.getEntry(ref);\n\t\tif (entry != null) {\n\t\t\tif (entry.action === action) return;\n\n\t\t\tthis.sendCommand(ChangeEntryCommandType, {\n\t\t\t\tref: entry.ref,\n\t\t\t\taction: action,\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate onAbortClicked() {\n\t\tthis.sendCommand(AbortCommandType, undefined);\n\t}\n\n\tprivate onDisableClicked() {\n\t\tthis.sendCommand(DisableCommandType, undefined);\n\t}\n\n\tprivate onSelectChanged($el: HTMLSelectElement) {\n\t\tconst ref = $el.dataset.ref;\n\t\tif (ref) {\n\t\t\tthis.setEntryAction(ref, $el.options[$el.selectedIndex].value as RebaseEntryAction);\n\t\t}\n\t}\n\n\tprivate onStartClicked() {\n\t\tthis.sendCommand(StartCommandType, undefined);\n\t}\n\n\tprivate onSwitchClicked() {\n\t\tthis.sendCommand(SwitchCommandType, undefined);\n\t}\n\n\tprivate onOrderChanged($el: HTMLInputElement) {\n\t\tconst isChecked = $el.checked;\n\n\t\tthis.sendCommand(ReorderCommandType, {\n\t\t\tascending: isChecked,\n\t\t});\n\t}\n\n\tprotected override onMessageReceived(e: MessageEvent) {\n\t\tconst msg = e.data;\n\n\t\tswitch (msg.method) {\n\t\t\tcase DidChangeNotificationType.method:\n\t\t\t\tthis.log(`${this.appName}.onMessageReceived(${msg.id}): name=${msg.method}`);\n\n\t\t\t\tonIpc(DidChangeNotificationType, msg, params => {\n\t\t\t\t\tthis.setState({ ...this.state, ...params.state });\n\t\t\t\t\tthis.refresh(this.state);\n\t\t\t\t});\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tsuper.onMessageReceived?.(e);\n\t\t}\n\t}\n\n\tprivate refresh(state: State) {\n\t\tconst focusRef = document.activeElement?.closest<HTMLLIElement>('li[data-ref]')?.dataset.ref;\n\t\tlet focusSelect = false;\n\t\tif (document.activeElement?.matches('select[data-ref]')) {\n\t\t\tfocusSelect = true;\n\t\t}\n\n\t\tconst $subhead = document.getElementById('subhead')! as HTMLHeadingElement;\n\t\t$subhead.innerHTML = '';\n\n\t\tlet $el: HTMLElement | Text = document.createElement('span');\n\t\t$el.textContent = state.branch;\n\t\t$el.classList.add('icon--branch', 'mr-1');\n\t\t$subhead.appendChild($el);\n\n\t\t$el = document.createTextNode(\n\t\t\t`Rebasing ${state.entries.length} commit${state.entries.length !== 1 ? 's' : ''}${\n\t\t\t\tstate.onto ? ' onto' : ''\n\t\t\t}`,\n\t\t);\n\t\t$subhead.appendChild($el);\n\n\t\tif (state.onto) {\n\t\t\t$el = document.createElement('span');\n\t\t\t$el.textContent = state.onto;\n\t\t\t$el.classList.add('icon--commit');\n\t\t\t$subhead.appendChild($el);\n\t\t}\n\n\t\tconst $container = document.getElementById('entries')!;\n\t\t$container.innerHTML = '';\n\n\t\tif (state.entries.length === 0) {\n\t\t\t$container.classList.add('entries--empty');\n\n\t\t\tconst $button = document.querySelector<HTMLButtonElement>('.button[name=\"start\"]');\n\t\t\tif ($button != null) {\n\t\t\t\t$button.disabled = true;\n\t\t\t}\n\n\t\t\tconst $entry = document.createElement('li');\n\n\t\t\tconst $el = document.createElement('h3');\n\t\t\t$el.textContent = 'No commits to rebase';\n\n\t\t\t$entry.appendChild($el);\n\t\t\t$container.appendChild($entry);\n\n\t\t\treturn;\n\t\t}\n\n\t\tlet squashing = false;\n\t\tlet squashToHere = false;\n\t\tlet tabIndex = 0;\n\n\t\tconst $entries = document.createDocumentFragment();\n\t\tconst appendEntries = () => {\n\t\t\tconst appendEntry = (entry: RebaseEntry) => {\n\t\t\t\tsquashToHere = false;\n\t\t\t\tif (entry.action === 'squash' || entry.action === 'fixup') {\n\t\t\t\t\tsquashing = true;\n\t\t\t\t} else if (squashing) {\n\t\t\t\t\tif (entry.action !== 'drop') {\n\t\t\t\t\t\tsquashToHere = true;\n\t\t\t\t\t\tsquashing = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlet $el: HTMLLIElement;\n\t\t\t\t[$el, tabIndex] = this.createEntry(entry, state, ++tabIndex, squashToHere);\n\n\t\t\t\treturn $el;\n\t\t\t};\n\n\t\t\tconst entryList = state.entries.map(appendEntry);\n\t\t\tif (state.ascending) {\n\t\t\t\tentryList.reverse().forEach($el => $entries.appendChild($el));\n\t\t\t} else {\n\t\t\t\tentryList.forEach($el => $entries.appendChild($el));\n\t\t\t}\n\t\t};\n\n\t\tif (!state.ascending) {\n\t\t\t$container.classList.remove('entries--ascending');\n\t\t\tappendEntries();\n\t\t}\n\n\t\tif (state.onto) {\n\t\t\tconst commit = state.commits.find(c => c.ref.startsWith(state.onto));\n\t\t\tif (commit != null) {\n\t\t\t\tconst [$el] = this.createEntry(\n\t\t\t\t\t{\n\t\t\t\t\t\taction: undefined!,\n\t\t\t\t\t\tindex: 0,\n\t\t\t\t\t\tmessage: commit.message.split('\\n')[0],\n\t\t\t\t\t\tref: state.onto,\n\t\t\t\t\t},\n\t\t\t\t\tstate,\n\t\t\t\t\t++tabIndex,\n\t\t\t\t\tfalse,\n\t\t\t\t);\n\t\t\t\t$entries.appendChild($el);\n\t\t\t\t$container.classList.add('entries--base');\n\t\t\t}\n\t\t}\n\n\t\tif (state.ascending) {\n\t\t\t$container.classList.add('entries--ascending');\n\t\t\tappendEntries();\n\t\t}\n\n\t\tconst $checkbox = document.getElementById('ordering');\n\t\tif ($checkbox != null) {\n\t\t\t($checkbox as HTMLInputElement).checked = state.ascending;\n\t\t}\n\n\t\t$container.appendChild($entries);\n\n\t\tdocument\n\t\t\t.querySelectorAll<HTMLLIElement>(\n\t\t\t\t`${focusSelect ? 'select' : 'li'}[data-ref=\"${focusRef ?? state.entries[0].ref}\"]`,\n\t\t\t)[0]\n\t\t\t?.focus();\n\n\t\tthis.bind();\n\t}\n\n\tprivate createEntry(\n\t\tentry: RebaseEntry,\n\t\tstate: State,\n\t\ttabIndex: number,\n\t\tsquashToHere: boolean,\n\t): [HTMLLIElement, number] {\n\t\tconst $entry = document.createElement('li');\n\t\t$entry.classList.add('entry', `entry--${entry.action ?? 'base'}`);\n\t\t$entry.classList.toggle('entry--squash-to', squashToHere);\n\t\t$entry.dataset.ref = entry.ref;\n\n\t\tif (entry.action != null) {\n\t\t\t$entry.tabIndex = 0;\n\n\t\t\tconst $dragHandle = document.createElement('span');\n\t\t\t$dragHandle.classList.add('entry-handle');\n\t\t\t$entry.appendChild($dragHandle);\n\n\t\t\tconst $selectContainer = document.createElement('div');\n\t\t\t$selectContainer.classList.add('entry-action', 'select-container');\n\t\t\t$entry.appendChild($selectContainer);\n\n\t\t\tconst $select = document.createElement('select');\n\t\t\t$select.dataset.ref = entry.ref;\n\t\t\t$select.name = 'action';\n\n\t\t\tconst $options = document.createDocumentFragment();\n\t\t\tfor (const action of rebaseActions) {\n\t\t\t\tconst $option = document.createElement('option');\n\t\t\t\t$option.value = action;\n\t\t\t\t$option.text = action;\n\n\t\t\t\tif (entry.action === action) {\n\t\t\t\t\t$option.selected = true;\n\t\t\t\t}\n\n\t\t\t\t$options.appendChild($option);\n\t\t\t}\n\t\t\t$select.appendChild($options);\n\t\t\t$selectContainer.appendChild($select);\n\t\t}\n\n\t\tconst $message = document.createElement('span');\n\t\t$message.classList.add('entry-message');\n\t\t$message.textContent = entry.message ?? '';\n\t\t$entry.appendChild($message);\n\n\t\tconst commit = state.commits.find(c => c.ref.startsWith(entry.ref));\n\t\tif (commit != null) {\n\t\t\t$message.title = commit.message ?? '';\n\n\t\t\tif (commit.author) {\n\t\t\t\tconst author = state.authors.find(a => a.author === commit.author);\n\t\t\t\tif (author?.avatarUrl.length) {\n\t\t\t\t\tconst $avatar = document.createElement('img');\n\t\t\t\t\t$avatar.classList.add('entry-avatar');\n\t\t\t\t\t$avatar.src = author.avatarUrl;\n\t\t\t\t\t$entry.appendChild($avatar);\n\t\t\t\t}\n\n\t\t\t\tconst $author = document.createElement('span');\n\t\t\t\t$author.classList.add('entry-author');\n\t\t\t\t$author.textContent = commit.author;\n\t\t\t\t$entry.appendChild($author);\n\t\t\t}\n\n\t\t\tif (commit.dateFromNow) {\n\t\t\t\tconst $date = document.createElement('span');\n\t\t\t\t$date.title = commit.date ?? '';\n\t\t\t\t$date.classList.add('entry-date');\n\t\t\t\t$date.textContent = commit.dateFromNow;\n\t\t\t\t$entry.appendChild($date);\n\t\t\t}\n\t\t}\n\n\t\tconst $ref = document.createElement('a');\n\t\t$ref.classList.add('entry-ref', 'icon--commit');\n\t\t// $ref.dataset.prev = prev ? `${prev} \\u2190 ` : '';\n\t\t$ref.href = commit?.ref ? state.commands.commit.replace(this.commitTokenRegex, commit.ref) : '#';\n\t\t$ref.textContent = entry.ref.substr(0, 7);\n\t\t$entry.appendChild($ref);\n\n\t\treturn [$entry, tabIndex];\n\t}\n}\n\nnew RebaseEditor();\n"],"names":[],"sourceRoot":""}